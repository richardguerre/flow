"use strict";const kc=require("child_process"),nr=require("fs"),Dl=require("https"),Hn=require("querystring"),zn=require("url"),Ll=require("net"),Fl=require("tls"),Ml=require("assert"),Dc=require("events"),Lc=require("os"),Fc=require("path"),Qr=require("crypto"),Nt=require("stream"),Wn=require("buffer"),Pt=require("util"),ql=require("http2"),Vl=require("zlib"),Kl=require("process"),$l=(t,e)=>({slug:t,plugin:e});var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gl(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var c=Function.bind.apply(e,o);return new c}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var zi={},kn={},Yr={},Ar={},Qn={},At={},Yn={},On=Object.prototype.hasOwnProperty,Mc=Object.prototype.toString,Os=Object.defineProperty,Us=Object.getOwnPropertyDescriptor,ks=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Mc.call(e)==="[object Array]"},Ds=function(e){if(!e||Mc.call(e)!=="[object Object]")return!1;var r=On.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&On.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var o;for(o in e);return typeof o>"u"||On.call(e,o)},Ls=function(e,r){Os&&r.name==="__proto__"?Os(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},Fs=function(e,r){if(r==="__proto__")if(On.call(e,r)){if(Us)return Us(e,r).value}else return;return e[r]},os=function t(){var e,r,n,o,c,u,a=arguments[0],g=1,f=arguments.length,A=!1;for(typeof a=="boolean"&&(A=a,a=arguments[1]||{},g=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});g<f;++g)if(e=arguments[g],e!=null)for(r in e)n=Fs(a,r),o=Fs(e,r),a!==o&&(A&&o&&(Ds(o)||(c=ks(o)))?(c?(c=!1,u=n&&ks(n)?n:[]):u=n&&Ds(n)?n:{},Ls(a,{name:r,newValue:t(A,u,o)})):typeof o<"u"&&Ls(a,{name:r,newValue:o}));return a},Wi={exports:{}};(function(t,e){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Be<"u")return Be;throw new Error("unable to locate global object")},n=r();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response})(Wi,Wi.exports);var jl=Wi.exports;const Ct=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Ct.writable=t=>Ct(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Ct.readable=t=>Ct(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Ct.duplex=t=>Ct.writable(t)&&Ct.readable(t);Ct.transform=t=>Ct.duplex(t)&&typeof t._transform=="function";var Hl=Ct,br={};Object.defineProperty(br,"__esModule",{value:!0});br.GaxiosError=void 0;class zl extends Error{constructor(e,r,n){super(e),this.response=n,this.config=r,this.code=n.status.toString()}}br.GaxiosError=zl;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.getRetryConfig=void 0;async function Wl(t){var e;let r=qc(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;const n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!await(r.shouldRetry||Ql)(t))return{shouldRetry:!1,config:t.config};const u=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;const a=r.retryBackoff?r.retryBackoff(t,u):new Promise(g=>{setTimeout(g,u)});return r.onRetryAttempt&&r.onRetryAttempt(t),await a,{shouldRetry:!0,config:t.config}}Jn.getRetryConfig=Wl;function Ql(t){const e=qc(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(const[n,o]of e.statusCodesToRetry){const c=t.response.status;if(c>=n&&c<=o){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function qc(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}var mn={},En={exports:{}},Ba,Ms;function Yl(){if(Ms)return Ba;Ms=1;var t=1e3,e=t*60,r=e*60,n=r*24,o=n*7,c=n*365.25;Ba=function(A,E){E=E||{};var p=typeof A;if(p==="string"&&A.length>0)return u(A);if(p==="number"&&isFinite(A))return E.long?g(A):a(A);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(A))};function u(A){if(A=String(A),!(A.length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(A);if(E){var p=parseFloat(E[1]),s=(E[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return p*c;case"weeks":case"week":case"w":return p*o;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(A){var E=Math.abs(A);return E>=n?Math.round(A/n)+"d":E>=r?Math.round(A/r)+"h":E>=e?Math.round(A/e)+"m":E>=t?Math.round(A/t)+"s":A+"ms"}function g(A){var E=Math.abs(A);return E>=n?f(A,E,n,"day"):E>=r?f(A,E,r,"hour"):E>=e?f(A,E,e,"minute"):E>=t?f(A,E,t,"second"):A+" ms"}function f(A,E,p,s){var m=E>=p*1.5;return Math.round(A/p)+" "+s+(m?"s":"")}return Ba}var Ra,qs;function Jl(){if(qs)return Ra;qs=1;function t(e){n.debug=n,n.default=n,n.coerce=f,n.disable=u,n.enable=c,n.enabled=a,n.humanize=Yl(),n.destroy=A,Object.keys(e).forEach(E=>{n[E]=e[E]}),n.names=[],n.skips=[],n.formatters={};function r(E){let p=0;for(let s=0;s<E.length;s++)p=(p<<5)-p+E.charCodeAt(s),p|=0;return n.colors[Math.abs(p)%n.colors.length]}n.selectColor=r;function n(E){let p,s=null,m,y;function S(...i){if(!S.enabled)return;const v=S,C=Number(new Date),I=C-(p||C);v.diff=I,v.prev=p,v.curr=C,p=C,i[0]=n.coerce(i[0]),typeof i[0]!="string"&&i.unshift("%O");let B=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(h,l)=>{if(h==="%%")return"%";B++;const R=n.formatters[l];if(typeof R=="function"){const N=i[B];h=R.call(v,N),i.splice(B,1),B--}return h}),n.formatArgs.call(v,i),(v.log||n.log).apply(v,i)}return S.namespace=E,S.useColors=n.useColors(),S.color=n.selectColor(E),S.extend=o,S.destroy=n.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>s!==null?s:(m!==n.namespaces&&(m=n.namespaces,y=n.enabled(E)),y),set:i=>{s=i}}),typeof n.init=="function"&&n.init(S),S}function o(E,p){const s=n(this.namespace+(typeof p>"u"?":":p)+E);return s.log=this.log,s}function c(E){n.save(E),n.namespaces=E,n.names=[],n.skips=[];let p;const s=(typeof E=="string"?E:"").split(/[\s,]+/),m=s.length;for(p=0;p<m;p++)s[p]&&(E=s[p].replace(/\*/g,".*?"),E[0]==="-"?n.skips.push(new RegExp("^"+E.slice(1)+"$")):n.names.push(new RegExp("^"+E+"$")))}function u(){const E=[...n.names.map(g),...n.skips.map(g).map(p=>"-"+p)].join(",");return n.enable(""),E}function a(E){if(E[E.length-1]==="*")return!0;let p,s;for(p=0,s=n.skips.length;p<s;p++)if(n.skips[p].test(E))return!1;for(p=0,s=n.names.length;p<s;p++)if(n.names[p].test(E))return!0;return!1}function g(E){return E.toString().substring(2,E.toString().length-2).replace(/\.\*\?$/,"*")}function f(E){return E instanceof Error?E.stack||E.message:E}function A(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Ra=t,Ra}var Vs;function cs(){return Vs||(Vs=1,function(t,e){e.formatArgs=n,e.save=o,e.load=c,e.useColors=r,e.storage=u(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;g.splice(1,0,f,"color: inherit");let A=0,E=0;g[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(A++,p==="%c"&&(E=A))}),g.splice(E,0,f)}e.log=console.debug||console.log||(()=>{});function o(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function c(){let g;try{g=e.storage.getItem("debug")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=process.env.DEBUG),g}function u(){try{return localStorage}catch{}}t.exports=Jl()(e);const{formatters:a}=t.exports;a.j=function(g){try{return JSON.stringify(g)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(En,En.exports)),En.exports}var Cn={},Ks;function Xl(){if(Ks)return Cn;Ks=1,Object.defineProperty(Cn,"__esModule",{value:!0});function t(e){return function(r,n){return new Promise((o,c)=>{e.call(this,r,n,(u,a)=>{u?c(u):o(a)})})}}return Cn.default=t,Cn}var Na,$s;function Zl(){if($s)return Na;$s=1;var t=Be&&Be.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};const e=Dc,r=t(cs()),n=t(Xl()),o=r.default("agent-base");function c(g){return!!g&&typeof g.addRequest=="function"}function u(){const{stack:g}=new Error;return typeof g!="string"?!1:g.split(`
`).some(f=>f.indexOf("(https.js:")!==-1||f.indexOf("node:https:")!==-1)}function a(g,f){return new a.Agent(g,f)}return function(g){class f extends e.EventEmitter{constructor(E,p){super();let s=p;typeof E=="function"?this.callback=E:E&&(s=E),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:u()?443:80}set defaultPort(E){this.explicitDefaultPort=E}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:u()?"https:":"http:"}set protocol(E){this.explicitProtocol=E}callback(E,p,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(E,p){const s=Object.assign({},p);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=u()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,E._last=!0,E.shouldKeepAlive=!1;let m=!1,y=null;const S=s.timeout||this.timeout,i=B=>{E._hadError||(E.emit("error",B),E._hadError=!0)},v=()=>{y=null,m=!0;const B=new Error(`A "socket" was not created for HTTP request before ${S}ms`);B.code="ETIMEOUT",i(B)},C=B=>{m||(y!==null&&(clearTimeout(y),y=null),i(B))},I=B=>{if(m)return;if(y!=null&&(clearTimeout(y),y=null),c(B)){o("Callback returned another Agent instance %o",B.constructor.name),B.addRequest(E,s);return}if(B){B.once("free",()=>{this.freeSocket(B,s)}),E.onSocket(B);return}const T=new Error(`no Duplex stream was returned to agent-base for \`${E.method} ${E.path}\``);i(T)};if(typeof this.callback!="function"){i(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(o("Converting legacy callback function to promise"),this.promisifiedCallback=n.default(this.callback)):this.promisifiedCallback=this.callback),typeof S=="number"&&S>0&&(y=setTimeout(v,S)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{o("Resolving socket for %o request: %o",s.protocol,`${E.method} ${E.path}`),Promise.resolve(this.promisifiedCallback(E,s)).then(I,C)}catch(B){Promise.reject(B).catch(C)}}freeSocket(E,p){o("Freeing socket %o %o",E.constructor.name,p),E.destroy()}destroy(){o("Destroying agent %o",this.constructor.name)}}g.Agent=f,g.prototype=g.Agent.prototype}(a||(a={})),Na=a,Na}var Sn={},Gs;function ef(){if(Gs)return Sn;Gs=1;var t=Be&&Be.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Sn,"__esModule",{value:!0});const r=t(cs()).default("https-proxy-agent:parse-proxy-response");function n(o){return new Promise((c,u)=>{let a=0;const g=[];function f(){const y=o.read();y?m(y):o.once("readable",f)}function A(){o.removeListener("end",p),o.removeListener("error",s),o.removeListener("close",E),o.removeListener("readable",f)}function E(y){r("onclose had error %o",y)}function p(){r("onend")}function s(y){A(),r("onerror %o",y),u(y)}function m(y){g.push(y),a+=y.length;const S=Buffer.concat(g,a);if(S.indexOf(`\r
\r
`)===-1){r("have not received end of HTTP headers yet..."),f();return}const v=S.toString("ascii",0,S.indexOf(`\r
`)),C=+v.split(" ")[1];r("got proxy server response: %o",v),c({statusCode:C,buffered:S})}o.on("error",s),o.on("close",E),o.on("end",p),f()})}return Sn.default=n,Sn}var js;function tf(){if(js)return mn;js=1;var t=Be&&Be.__awaiter||function(y,S,i,v){function C(I){return I instanceof i?I:new i(function(B){B(I)})}return new(i||(i=Promise))(function(I,B){function T(R){try{l(v.next(R))}catch(N){B(N)}}function h(R){try{l(v.throw(R))}catch(N){B(N)}}function l(R){R.done?I(R.value):C(R.value).then(T,h)}l((v=v.apply(y,S||[])).next())})},e=Be&&Be.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(mn,"__esModule",{value:!0});const r=e(Ll),n=e(Fl),o=e(zn),c=e(Ml),u=e(cs()),a=Zl(),g=e(ef()),f=u.default("https-proxy-agent:agent");class A extends a.Agent{constructor(S){let i;if(typeof S=="string"?i=o.default.parse(S):i=S,!i)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");f("creating new HttpsProxyAgent instance: %o",i),super(i);const v=Object.assign({},i);this.secureProxy=i.secureProxy||s(v.protocol),v.host=v.hostname||v.host,typeof v.port=="string"&&(v.port=parseInt(v.port,10)),!v.port&&v.host&&(v.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in v)&&(v.ALPNProtocols=["http 1.1"]),v.host&&v.path&&(delete v.path,delete v.pathname),this.proxy=v}callback(S,i){return t(this,void 0,void 0,function*(){const{proxy:v,secureProxy:C}=this;let I;C?(f("Creating `tls.Socket`: %o",v),I=n.default.connect(v)):(f("Creating `net.Socket`: %o",v),I=r.default.connect(v));const B=Object.assign({},v.headers);let h=`CONNECT ${`${i.host}:${i.port}`} HTTP/1.1\r
`;v.auth&&(B["Proxy-Authorization"]=`Basic ${Buffer.from(v.auth).toString("base64")}`);let{host:l,port:R,secureEndpoint:N}=i;p(R,N)||(l+=`:${R}`),B.Host=l,B.Connection="close";for(const H of Object.keys(B))h+=`${H}: ${B[H]}\r
`;const F=g.default(I);I.write(`${h}\r
`);const{statusCode:D,buffered:q}=yield F;if(D===200){if(S.once("socket",E),i.secureEndpoint){f("Upgrading socket connection to TLS");const H=i.servername||i.host;return n.default.connect(Object.assign(Object.assign({},m(i,"host","hostname","path","port")),{socket:I,servername:H}))}return I}I.destroy();const j=new r.default.Socket({writable:!1});return j.readable=!0,S.once("socket",H=>{f("replaying proxy buffer for failed request"),c.default(H.listenerCount("data")>0),H.push(q),H.push(null)}),j})}}mn.default=A;function E(y){y.resume()}function p(y,S){return!!(!S&&y===80||S&&y===443)}function s(y){return typeof y=="string"?/^https:?$/i.test(y):!1}function m(y,...S){const i={};let v;for(v in y)S.includes(v)||(i[v]=y[v]);return i}return mn}var Pa,Hs;function rf(){if(Hs)return Pa;Hs=1;var t=Be&&Be.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};const e=t(tf());function r(n){return new e.default(n)}return function(n){n.HttpsProxyAgent=e.default,n.prototype=e.default.prototype}(r||(r={})),Pa=r,Pa}var Xn=Be&&Be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.Gaxios=void 0;const nf=Xn(os),af=Dl,sf=Xn(jl),of=Xn(Hn),cf=Xn(Hl),Vc=zn,uf=br,lf=Jn,ff=hf()?window.fetch:sf.default;function df(){return typeof window<"u"&&!!window}function hf(){return df()&&!!window.fetch}function pf(){return typeof Buffer<"u"}function zs(t,e){return!!Kc(t,e)}function Kc(t,e){e=e.toLowerCase();for(const r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}let Qi;function $c(){var t,e,r,n;const o=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return o&&(Qi=rf()),o}$c();function yf(t){var e;const r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;const n=r.split(","),o=new Vc.URL(t);return!!n.find(c=>c.startsWith("*.")||c.startsWith(".")?(c=c.replace(/^\*\./,"."),o.hostname.endsWith(c)):c===o.origin||c===o.hostname)}function gf(t){if(!yf(t))return $c()}class vf{constructor(e){this.agentCache=new Map,this.defaults=e||{}}async request(e={}){return e=this.validateOpts(e),this._request(e)}async _defaultAdapter(e){const n=await(e.fetchImplementation||ff)(e.url,e),o=await this.getResponseData(e,n);return this.translateResponse(e,n,o)}async _request(e={}){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status))throw new uf.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){const n=r;n.config=e;const{shouldRetry:o,config:c}=await(0,lf.getRetryConfig)(n);if(o&&c)return n.config.retryConfig.currentRetryAttempt=c.retryConfig.currentRetryAttempt,this._request(n.config);throw n}}async getResponseData(e,r){switch(e.responseType){case"stream":return r.body;case"json":{let n=await r.text();try{n=JSON.parse(n)}catch{}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}}validateOpts(e){const r=(0,nf.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");const n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let c=r.paramsSerializer(r.params);c.startsWith("?")&&(c=c.slice(1));const u=r.url.includes("?")?"&":"?";r.url=r.url+u+c}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){const c=typeof FormData>"u"?!1:(r==null?void 0:r.data)instanceof FormData;cf.default.readable(r.data)?r.body=r.data:pf()&&Buffer.isBuffer(r.data)?(r.body=r.data,zs(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?c||(Kc(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(zs(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";const o=gf(r.url);if(o)if(this.agentCache.has(o))r.agent=this.agentCache.get(o);else{if(r.cert&&r.key){const c=new Vc.URL(o);r.agent=new Qi({port:c.port,host:c.host,protocol:c.protocol,cert:r.cert,key:r.key})}else r.agent=new Qi(o);this.agentCache.set(o,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new af.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return of.default.stringify(e)}translateResponse(e,r,n){const o={};return r.headers.forEach((c,u)=>{o[u]=c}),{config:e,data:n,headers:o,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}}Yn.Gaxios=vf;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.instance=t.Gaxios=t.GaxiosError=void 0;const e=Yn;Object.defineProperty(t,"Gaxios",{enumerable:!0,get:function(){return e.Gaxios}});var r=br;Object.defineProperty(t,"GaxiosError",{enumerable:!0,get:function(){return r.GaxiosError}}),t.instance=new e.Gaxios;async function n(o){return t.instance.request(o)}t.request=n})(At);var Zn={exports:{}},Gc={exports:{}},jc={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,c=Math.floor,u="[BigNumber Error] ",a=u+"Number primitive has more than 15 significant digits: ",g=1e14,f=14,A=9007199254740991,E=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,s=1e9;function m(T){var h,l,R,N=W.prototype={constructor:W,toString:null,valueOf:null},F=new W(1),D=20,q=4,j=-7,H=21,Q=-1e7,J=1e7,X=!1,re=1,se=0,de={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},ye="0123456789abcdefghijklmnopqrstuvwxyz",_e=!0;function W(x,w){var d,b,U,P,K,V,$,M,G=this;if(!(G instanceof W))return new W(x,w);if(w==null){if(x&&x._isBigNumber===!0){G.s=x.s,!x.c||x.e>J?G.c=G.e=null:x.e<Q?G.c=[G.e=0]:(G.e=x.e,G.c=x.c.slice());return}if((V=typeof x=="number")&&x*0==0){if(G.s=1/x<0?(x=-x,-1):1,x===~~x){for(P=0,K=x;K>=10;K/=10,P++);P>J?G.c=G.e=null:(G.e=P,G.c=[x]);return}M=String(x)}else{if(!n.test(M=String(x)))return R(G,M,V);G.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(P=M.indexOf("."))>-1&&(M=M.replace(".","")),(K=M.search(/e/i))>0?(P<0&&(P=K),P+=+M.slice(K+1),M=M.substring(0,K)):P<0&&(P=M.length)}else{if(v(w,2,ye.length,"Base"),w==10&&_e)return G=new W(x),fe(G,D+G.e+1,q);if(M=String(x),V=typeof x=="number"){if(x*0!=0)return R(G,M,V,w);if(G.s=1/x<0?(M=M.slice(1),-1):1,W.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error(a+x)}else G.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(d=ye.slice(0,w),P=K=0,$=M.length;K<$;K++)if(d.indexOf(b=M.charAt(K))<0){if(b=="."){if(K>P){P=$;continue}}else if(!U&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){U=!0,K=-1,P=0;continue}return R(G,String(x),V,w)}V=!1,M=l(M,w,10,G.s),(P=M.indexOf("."))>-1?M=M.replace(".",""):P=M.length}for(K=0;M.charCodeAt(K)===48;K++);for($=M.length;M.charCodeAt(--$)===48;);if(M=M.slice(K,++$)){if($-=K,V&&W.DEBUG&&$>15&&(x>A||x!==c(x)))throw Error(a+G.s*x);if((P=P-K-1)>J)G.c=G.e=null;else if(P<Q)G.c=[G.e=0];else{if(G.e=P,G.c=[],K=(P+1)%f,P<0&&(K+=f),K<$){for(K&&G.c.push(+M.slice(0,K)),$-=f;K<$;)G.c.push(+M.slice(K,K+=f));K=f-(M=M.slice(K)).length}else K-=$;for(;K--;M+="0");G.c.push(+M)}}else G.c=[G.e=0]}W.clone=m,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(x){var w,d;if(x!=null)if(typeof x=="object"){if(x.hasOwnProperty(w="DECIMAL_PLACES")&&(d=x[w],v(d,0,s,w),D=d),x.hasOwnProperty(w="ROUNDING_MODE")&&(d=x[w],v(d,0,8,w),q=d),x.hasOwnProperty(w="EXPONENTIAL_AT")&&(d=x[w],d&&d.pop?(v(d[0],-s,0,w),v(d[1],0,s,w),j=d[0],H=d[1]):(v(d,-s,s,w),j=-(H=d<0?-d:d))),x.hasOwnProperty(w="RANGE"))if(d=x[w],d&&d.pop)v(d[0],-s,-1,w),v(d[1],1,s,w),Q=d[0],J=d[1];else if(v(d,-s,s,w),d)Q=-(J=d<0?-d:d);else throw Error(u+w+" cannot be zero: "+d);if(x.hasOwnProperty(w="CRYPTO"))if(d=x[w],d===!!d)if(d)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))X=d;else throw X=!d,Error(u+"crypto unavailable");else X=d;else throw Error(u+w+" not true or false: "+d);if(x.hasOwnProperty(w="MODULO_MODE")&&(d=x[w],v(d,0,9,w),re=d),x.hasOwnProperty(w="POW_PRECISION")&&(d=x[w],v(d,0,s,w),se=d),x.hasOwnProperty(w="FORMAT"))if(d=x[w],typeof d=="object")de=d;else throw Error(u+w+" not an object: "+d);if(x.hasOwnProperty(w="ALPHABET"))if(d=x[w],typeof d=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(d))_e=d.slice(0,10)=="0123456789",ye=d;else throw Error(u+w+" invalid: "+d)}else throw Error(u+"Object expected: "+x);return{DECIMAL_PLACES:D,ROUNDING_MODE:q,EXPONENTIAL_AT:[j,H],RANGE:[Q,J],CRYPTO:X,MODULO_MODE:re,POW_PRECISION:se,FORMAT:de,ALPHABET:ye}},W.isBigNumber=function(x){if(!x||x._isBigNumber!==!0)return!1;if(!W.DEBUG)return!0;var w,d,b=x.c,U=x.e,P=x.s;e:if({}.toString.call(b)=="[object Array]"){if((P===1||P===-1)&&U>=-s&&U<=s&&U===c(U)){if(b[0]===0){if(U===0&&b.length===1)return!0;break e}if(w=(U+1)%f,w<1&&(w+=f),String(b[0]).length==w){for(w=0;w<b.length;w++)if(d=b[w],d<0||d>=g||d!==c(d))break e;if(d!==0)return!0}}}else if(b===null&&U===null&&(P===null||P===1||P===-1))return!0;throw Error(u+"Invalid BigNumber: "+x)},W.maximum=W.max=function(){return ae(arguments,N.lt)},W.minimum=W.min=function(){return ae(arguments,N.gt)},W.random=function(){var x=9007199254740992,w=Math.random()*x&2097151?function(){return c(Math.random()*x)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(d){var b,U,P,K,V,$=0,M=[],G=new W(F);if(d==null?d=D:v(d,0,s),K=o(d/f),X)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(K*=2));$<K;)V=b[$]*131072+(b[$+1]>>>11),V>=9e15?(U=crypto.getRandomValues(new Uint32Array(2)),b[$]=U[0],b[$+1]=U[1]):(M.push(V%1e14),$+=2);$=K/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(K*=7);$<K;)V=(b[$]&31)*281474976710656+b[$+1]*1099511627776+b[$+2]*4294967296+b[$+3]*16777216+(b[$+4]<<16)+(b[$+5]<<8)+b[$+6],V>=9e15?crypto.randomBytes(7).copy(b,$):(M.push(V%1e14),$+=7);$=K/7}else throw X=!1,Error(u+"crypto unavailable");if(!X)for(;$<K;)V=w(),V<9e15&&(M[$++]=V%1e14);for(K=M[--$],d%=f,K&&d&&(V=E[f-d],M[$]=c(K/V)*V);M[$]===0;M.pop(),$--);if($<0)M=[P=0];else{for(P=-1;M[0]===0;M.splice(0,1),P-=f);for($=1,V=M[0];V>=10;V/=10,$++);$<f&&(P-=f-$)}return G.e=P,G.c=M,G}}(),W.sum=function(){for(var x=1,w=arguments,d=new W(w[0]);x<w.length;)d=d.plus(w[x++]);return d},l=function(){var x="0123456789";function w(d,b,U,P){for(var K,V=[0],$,M=0,G=d.length;M<G;){for($=V.length;$--;V[$]*=b);for(V[0]+=P.indexOf(d.charAt(M++)),K=0;K<V.length;K++)V[K]>U-1&&(V[K+1]==null&&(V[K+1]=0),V[K+1]+=V[K]/U|0,V[K]%=U)}return V.reverse()}return function(d,b,U,P,K){var V,$,M,G,Y,ne,te,ue,pe=d.indexOf("."),ge=D,ce=q;for(pe>=0&&(G=se,se=0,d=d.replace(".",""),ue=new W(b),ne=ue.pow(d.length-pe),se=G,ue.c=w(B(S(ne.c),ne.e,"0"),10,U,x),ue.e=ue.c.length),te=w(d,b,U,K?(V=ye,x):(V=x,ye)),M=G=te.length;te[--G]==0;te.pop());if(!te[0])return V.charAt(0);if(pe<0?--M:(ne.c=te,ne.e=M,ne.s=P,ne=h(ne,ue,ge,ce,U),te=ne.c,Y=ne.r,M=ne.e),$=M+ge+1,pe=te[$],G=U/2,Y=Y||$<0||te[$+1]!=null,Y=ce<4?(pe!=null||Y)&&(ce==0||ce==(ne.s<0?3:2)):pe>G||pe==G&&(ce==4||Y||ce==6&&te[$-1]&1||ce==(ne.s<0?8:7)),$<1||!te[0])d=Y?B(V.charAt(1),-ge,V.charAt(0)):V.charAt(0);else{if(te.length=$,Y)for(--U;++te[--$]>U;)te[$]=0,$||(++M,te=[1].concat(te));for(G=te.length;!te[--G];);for(pe=0,d="";pe<=G;d+=V.charAt(te[pe++]));d=B(d,M,V.charAt(0))}return d}}(),h=function(){function x(b,U,P){var K,V,$,M,G=0,Y=b.length,ne=U%p,te=U/p|0;for(b=b.slice();Y--;)$=b[Y]%p,M=b[Y]/p|0,K=te*$+M*ne,V=ne*$+K%p*p+G,G=(V/P|0)+(K/p|0)+te*M,b[Y]=V%P;return G&&(b=[G].concat(b)),b}function w(b,U,P,K){var V,$;if(P!=K)$=P>K?1:-1;else for(V=$=0;V<P;V++)if(b[V]!=U[V]){$=b[V]>U[V]?1:-1;break}return $}function d(b,U,P,K){for(var V=0;P--;)b[P]-=V,V=b[P]<U[P]?1:0,b[P]=V*K+b[P]-U[P];for(;!b[0]&&b.length>1;b.splice(0,1));}return function(b,U,P,K,V){var $,M,G,Y,ne,te,ue,pe,ge,ce,le,ve,be,Ne,Pe,we,Oe,Ie=b.s==U.s?1:-1,Te=b.c,Ee=U.c;if(!Te||!Te[0]||!Ee||!Ee[0])return new W(!b.s||!U.s||(Te?Ee&&Te[0]==Ee[0]:!Ee)?NaN:Te&&Te[0]==0||!Ee?Ie*0:Ie/0);for(pe=new W(Ie),ge=pe.c=[],M=b.e-U.e,Ie=P+M+1,V||(V=g,M=y(b.e/f)-y(U.e/f),Ie=Ie/f|0),G=0;Ee[G]==(Te[G]||0);G++);if(Ee[G]>(Te[G]||0)&&M--,Ie<0)ge.push(1),Y=!0;else{for(Ne=Te.length,we=Ee.length,G=0,Ie+=2,ne=c(V/(Ee[0]+1)),ne>1&&(Ee=x(Ee,ne,V),Te=x(Te,ne,V),we=Ee.length,Ne=Te.length),be=we,ce=Te.slice(0,we),le=ce.length;le<we;ce[le++]=0);Oe=Ee.slice(),Oe=[0].concat(Oe),Pe=Ee[0],Ee[1]>=V/2&&Pe++;do{if(ne=0,$=w(Ee,ce,we,le),$<0){if(ve=ce[0],we!=le&&(ve=ve*V+(ce[1]||0)),ne=c(ve/Pe),ne>1)for(ne>=V&&(ne=V-1),te=x(Ee,ne,V),ue=te.length,le=ce.length;w(te,ce,ue,le)==1;)ne--,d(te,we<ue?Oe:Ee,ue,V),ue=te.length,$=1;else ne==0&&($=ne=1),te=Ee.slice(),ue=te.length;if(ue<le&&(te=[0].concat(te)),d(ce,te,le,V),le=ce.length,$==-1)for(;w(Ee,ce,we,le)<1;)ne++,d(ce,we<le?Oe:Ee,le,V),le=ce.length}else $===0&&(ne++,ce=[0]);ge[G++]=ne,ce[0]?ce[le++]=Te[be]||0:(ce=[Te[be]],le=1)}while((be++<Ne||ce[0]!=null)&&Ie--);Y=ce[0]!=null,ge[0]||ge.splice(0,1)}if(V==g){for(G=1,Ie=ge[0];Ie>=10;Ie/=10,G++);fe(pe,P+(pe.e=G+M*f-1)+1,K,Y)}else pe.e=M,pe.r=+Y;return pe}}();function he(x,w,d,b){var U,P,K,V,$;if(d==null?d=q:v(d,0,8),!x.c)return x.toString();if(U=x.c[0],K=x.e,w==null)$=S(x.c),$=b==1||b==2&&(K<=j||K>=H)?I($,K):B($,K,"0");else if(x=fe(new W(x),w,d),P=x.e,$=S(x.c),V=$.length,b==1||b==2&&(w<=P||P<=j)){for(;V<w;$+="0",V++);$=I($,P)}else if(w-=K,$=B($,P,"0"),P+1>V){if(--w>0)for($+=".";w--;$+="0");}else if(w+=P-V,w>0)for(P+1==V&&($+=".");w--;$+="0");return x.s<0&&U?"-"+$:$}function ae(x,w){for(var d,b=1,U=new W(x[0]);b<x.length;b++)if(d=new W(x[b]),d.s)w.call(U,d)&&(U=d);else{U=d;break}return U}function ke(x,w,d){for(var b=1,U=w.length;!w[--U];w.pop());for(U=w[0];U>=10;U/=10,b++);return(d=b+d*f-1)>J?x.c=x.e=null:d<Q?x.c=[x.e=0]:(x.e=d,x.c=w),x}R=function(){var x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,d=/^\.([^.]+)$/,b=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(P,K,V,$){var M,G=V?K:K.replace(U,"");if(b.test(G))P.s=isNaN(G)?null:G<0?-1:1;else{if(!V&&(G=G.replace(x,function(Y,ne,te){return M=(te=te.toLowerCase())=="x"?16:te=="b"?2:8,!$||$==M?ne:Y}),$&&(M=$,G=G.replace(w,"$1").replace(d,"0.$1")),K!=G))return new W(G,M);if(W.DEBUG)throw Error(u+"Not a"+($?" base "+$:"")+" number: "+K);P.s=null}P.c=P.e=null}}();function fe(x,w,d,b){var U,P,K,V,$,M,G,Y=x.c,ne=E;if(Y){e:{for(U=1,V=Y[0];V>=10;V/=10,U++);if(P=w-U,P<0)P+=f,K=w,$=Y[M=0],G=$/ne[U-K-1]%10|0;else if(M=o((P+1)/f),M>=Y.length)if(b){for(;Y.length<=M;Y.push(0));$=G=0,U=1,P%=f,K=P-f+1}else break e;else{for($=V=Y[M],U=1;V>=10;V/=10,U++);P%=f,K=P-f+U,G=K<0?0:$/ne[U-K-1]%10|0}if(b=b||w<0||Y[M+1]!=null||(K<0?$:$%ne[U-K-1]),b=d<4?(G||b)&&(d==0||d==(x.s<0?3:2)):G>5||G==5&&(d==4||b||d==6&&(P>0?K>0?$/ne[U-K]:0:Y[M-1])%10&1||d==(x.s<0?8:7)),w<1||!Y[0])return Y.length=0,b?(w-=x.e+1,Y[0]=ne[(f-w%f)%f],x.e=-w||0):Y[0]=x.e=0,x;if(P==0?(Y.length=M,V=1,M--):(Y.length=M+1,V=ne[f-P],Y[M]=K>0?c($/ne[U-K]%ne[K])*V:0),b)for(;;)if(M==0){for(P=1,K=Y[0];K>=10;K/=10,P++);for(K=Y[0]+=V,V=1;K>=10;K/=10,V++);P!=V&&(x.e++,Y[0]==g&&(Y[0]=1));break}else{if(Y[M]+=V,Y[M]!=g)break;Y[M--]=0,V=1}for(P=Y.length;Y[--P]===0;Y.pop());}x.e>J?x.c=x.e=null:x.e<Q&&(x.c=[x.e=0])}return x}function _(x){var w,d=x.e;return d===null?x.toString():(w=S(x.c),w=d<=j||d>=H?I(w,d):B(w,d,"0"),x.s<0?"-"+w:w)}return N.absoluteValue=N.abs=function(){var x=new W(this);return x.s<0&&(x.s=1),x},N.comparedTo=function(x,w){return i(this,new W(x,w))},N.decimalPlaces=N.dp=function(x,w){var d,b,U,P=this;if(x!=null)return v(x,0,s),w==null?w=q:v(w,0,8),fe(new W(P),x+P.e+1,w);if(!(d=P.c))return null;if(b=((U=d.length-1)-y(this.e/f))*f,U=d[U])for(;U%10==0;U/=10,b--);return b<0&&(b=0),b},N.dividedBy=N.div=function(x,w){return h(this,new W(x,w),D,q)},N.dividedToIntegerBy=N.idiv=function(x,w){return h(this,new W(x,w),0,1)},N.exponentiatedBy=N.pow=function(x,w){var d,b,U,P,K,V,$,M,G,Y=this;if(x=new W(x),x.c&&!x.isInteger())throw Error(u+"Exponent not an integer: "+_(x));if(w!=null&&(w=new W(w)),V=x.e>14,!Y.c||!Y.c[0]||Y.c[0]==1&&!Y.e&&Y.c.length==1||!x.c||!x.c[0])return G=new W(Math.pow(+_(Y),V?x.s*(2-C(x)):+_(x))),w?G.mod(w):G;if($=x.s<0,w){if(w.c?!w.c[0]:!w.s)return new W(NaN);b=!$&&Y.isInteger()&&w.isInteger(),b&&(Y=Y.mod(w))}else{if(x.e>9&&(Y.e>0||Y.e<-1||(Y.e==0?Y.c[0]>1||V&&Y.c[1]>=24e7:Y.c[0]<8e13||V&&Y.c[0]<=9999975e7)))return P=Y.s<0&&C(x)?-0:0,Y.e>-1&&(P=1/P),new W($?1/P:P);se&&(P=o(se/f+2))}for(V?(d=new W(.5),$&&(x.s=1),M=C(x)):(U=Math.abs(+_(x)),M=U%2),G=new W(F);;){if(M){if(G=G.times(Y),!G.c)break;P?G.c.length>P&&(G.c.length=P):b&&(G=G.mod(w))}if(U){if(U=c(U/2),U===0)break;M=U%2}else if(x=x.times(d),fe(x,x.e+1,1),x.e>14)M=C(x);else{if(U=+_(x),U===0)break;M=U%2}Y=Y.times(Y),P?Y.c&&Y.c.length>P&&(Y.c.length=P):b&&(Y=Y.mod(w))}return b?G:($&&(G=F.div(G)),w?G.mod(w):P?fe(G,se,q,K):G)},N.integerValue=function(x){var w=new W(this);return x==null?x=q:v(x,0,8),fe(w,w.e+1,x)},N.isEqualTo=N.eq=function(x,w){return i(this,new W(x,w))===0},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(x,w){return i(this,new W(x,w))>0},N.isGreaterThanOrEqualTo=N.gte=function(x,w){return(w=i(this,new W(x,w)))===1||w===0},N.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},N.isLessThan=N.lt=function(x,w){return i(this,new W(x,w))<0},N.isLessThanOrEqualTo=N.lte=function(x,w){return(w=i(this,new W(x,w)))===-1||w===0},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&this.c[0]==0},N.minus=function(x,w){var d,b,U,P,K=this,V=K.s;if(x=new W(x,w),w=x.s,!V||!w)return new W(NaN);if(V!=w)return x.s=-w,K.plus(x);var $=K.e/f,M=x.e/f,G=K.c,Y=x.c;if(!$||!M){if(!G||!Y)return G?(x.s=-w,x):new W(Y?K:NaN);if(!G[0]||!Y[0])return Y[0]?(x.s=-w,x):new W(G[0]?K:q==3?-0:0)}if($=y($),M=y(M),G=G.slice(),V=$-M){for((P=V<0)?(V=-V,U=G):(M=$,U=Y),U.reverse(),w=V;w--;U.push(0));U.reverse()}else for(b=(P=(V=G.length)<(w=Y.length))?V:w,V=w=0;w<b;w++)if(G[w]!=Y[w]){P=G[w]<Y[w];break}if(P&&(U=G,G=Y,Y=U,x.s=-x.s),w=(b=Y.length)-(d=G.length),w>0)for(;w--;G[d++]=0);for(w=g-1;b>V;){if(G[--b]<Y[b]){for(d=b;d&&!G[--d];G[d]=w);--G[d],G[b]+=g}G[b]-=Y[b]}for(;G[0]==0;G.splice(0,1),--M);return G[0]?ke(x,G,M):(x.s=q==3?-1:1,x.c=[x.e=0],x)},N.modulo=N.mod=function(x,w){var d,b,U=this;return x=new W(x,w),!U.c||!x.s||x.c&&!x.c[0]?new W(NaN):!x.c||U.c&&!U.c[0]?new W(U):(re==9?(b=x.s,x.s=1,d=h(U,x,0,3),x.s=b,d.s*=b):d=h(U,x,0,re),x=U.minus(d.times(x)),!x.c[0]&&re==1&&(x.s=U.s),x)},N.multipliedBy=N.times=function(x,w){var d,b,U,P,K,V,$,M,G,Y,ne,te,ue,pe,ge,ce=this,le=ce.c,ve=(x=new W(x,w)).c;if(!le||!ve||!le[0]||!ve[0])return!ce.s||!x.s||le&&!le[0]&&!ve||ve&&!ve[0]&&!le?x.c=x.e=x.s=null:(x.s*=ce.s,!le||!ve?x.c=x.e=null:(x.c=[0],x.e=0)),x;for(b=y(ce.e/f)+y(x.e/f),x.s*=ce.s,$=le.length,Y=ve.length,$<Y&&(ue=le,le=ve,ve=ue,U=$,$=Y,Y=U),U=$+Y,ue=[];U--;ue.push(0));for(pe=g,ge=p,U=Y;--U>=0;){for(d=0,ne=ve[U]%ge,te=ve[U]/ge|0,K=$,P=U+K;P>U;)M=le[--K]%ge,G=le[K]/ge|0,V=te*M+G*ne,M=ne*M+V%ge*ge+ue[P]+d,d=(M/pe|0)+(V/ge|0)+te*G,ue[P--]=M%pe;ue[P]=d}return d?++b:ue.splice(0,1),ke(x,ue,b)},N.negated=function(){var x=new W(this);return x.s=-x.s||null,x},N.plus=function(x,w){var d,b=this,U=b.s;if(x=new W(x,w),w=x.s,!U||!w)return new W(NaN);if(U!=w)return x.s=-w,b.minus(x);var P=b.e/f,K=x.e/f,V=b.c,$=x.c;if(!P||!K){if(!V||!$)return new W(U/0);if(!V[0]||!$[0])return $[0]?x:new W(V[0]?b:U*0)}if(P=y(P),K=y(K),V=V.slice(),U=P-K){for(U>0?(K=P,d=$):(U=-U,d=V),d.reverse();U--;d.push(0));d.reverse()}for(U=V.length,w=$.length,U-w<0&&(d=$,$=V,V=d,w=U),U=0;w;)U=(V[--w]=V[w]+$[w]+U)/g|0,V[w]=g===V[w]?0:V[w]%g;return U&&(V=[U].concat(V),++K),ke(x,V,K)},N.precision=N.sd=function(x,w){var d,b,U,P=this;if(x!=null&&x!==!!x)return v(x,1,s),w==null?w=q:v(w,0,8),fe(new W(P),x,w);if(!(d=P.c))return null;if(U=d.length-1,b=U*f+1,U=d[U]){for(;U%10==0;U/=10,b--);for(U=d[0];U>=10;U/=10,b++);}return x&&P.e+1>b&&(b=P.e+1),b},N.shiftedBy=function(x){return v(x,-A,A),this.times("1e"+x)},N.squareRoot=N.sqrt=function(){var x,w,d,b,U,P=this,K=P.c,V=P.s,$=P.e,M=D+4,G=new W("0.5");if(V!==1||!K||!K[0])return new W(!V||V<0&&(!K||K[0])?NaN:K?P:1/0);if(V=Math.sqrt(+_(P)),V==0||V==1/0?(w=S(K),(w.length+$)%2==0&&(w+="0"),V=Math.sqrt(+w),$=y(($+1)/2)-($<0||$%2),V==1/0?w="5e"+$:(w=V.toExponential(),w=w.slice(0,w.indexOf("e")+1)+$),d=new W(w)):d=new W(V+""),d.c[0]){for($=d.e,V=$+M,V<3&&(V=0);;)if(U=d,d=G.times(U.plus(h(P,U,M,1))),S(U.c).slice(0,V)===(w=S(d.c)).slice(0,V))if(d.e<$&&--V,w=w.slice(V-3,V+1),w=="9999"||!b&&w=="4999"){if(!b&&(fe(U,U.e+D+2,0),U.times(U).eq(P))){d=U;break}M+=4,V+=4,b=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(fe(d,d.e+D+2,1),x=!d.times(d).eq(P));break}}return fe(d,d.e+D+1,q,x)},N.toExponential=function(x,w){return x!=null&&(v(x,0,s),x++),he(this,x,w,1)},N.toFixed=function(x,w){return x!=null&&(v(x,0,s),x=x+this.e+1),he(this,x,w)},N.toFormat=function(x,w,d){var b,U=this;if(d==null)x!=null&&w&&typeof w=="object"?(d=w,w=null):x&&typeof x=="object"?(d=x,x=w=null):d=de;else if(typeof d!="object")throw Error(u+"Argument not an object: "+d);if(b=U.toFixed(x,w),U.c){var P,K=b.split("."),V=+d.groupSize,$=+d.secondaryGroupSize,M=d.groupSeparator||"",G=K[0],Y=K[1],ne=U.s<0,te=ne?G.slice(1):G,ue=te.length;if($&&(P=V,V=$,$=P,ue-=P),V>0&&ue>0){for(P=ue%V||V,G=te.substr(0,P);P<ue;P+=V)G+=M+te.substr(P,V);$>0&&(G+=M+te.slice(P)),ne&&(G="-"+G)}b=Y?G+(d.decimalSeparator||"")+(($=+d.fractionGroupSize)?Y.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(d.fractionGroupSeparator||"")):Y):G}return(d.prefix||"")+b+(d.suffix||"")},N.toFraction=function(x){var w,d,b,U,P,K,V,$,M,G,Y,ne,te=this,ue=te.c;if(x!=null&&(V=new W(x),!V.isInteger()&&(V.c||V.s!==1)||V.lt(F)))throw Error(u+"Argument "+(V.isInteger()?"out of range: ":"not an integer: ")+_(V));if(!ue)return new W(te);for(w=new W(F),M=d=new W(F),b=$=new W(F),ne=S(ue),P=w.e=ne.length-te.e-1,w.c[0]=E[(K=P%f)<0?f+K:K],x=!x||V.comparedTo(w)>0?P>0?w:M:V,K=J,J=1/0,V=new W(ne),$.c[0]=0;G=h(V,w,0,1),U=d.plus(G.times(b)),U.comparedTo(x)!=1;)d=b,b=U,M=$.plus(G.times(U=M)),$=U,w=V.minus(G.times(U=w)),V=U;return U=h(x.minus(d),b,0,1),$=$.plus(U.times(M)),d=d.plus(U.times(b)),$.s=M.s=te.s,P=P*2,Y=h(M,b,P,q).minus(te).abs().comparedTo(h($,d,P,q).minus(te).abs())<1?[M,b]:[$,d],J=K,Y},N.toNumber=function(){return+_(this)},N.toPrecision=function(x,w){return x!=null&&v(x,1,s),he(this,x,w,2)},N.toString=function(x){var w,d=this,b=d.s,U=d.e;return U===null?b?(w="Infinity",b<0&&(w="-"+w)):w="NaN":(x==null?w=U<=j||U>=H?I(S(d.c),U):B(S(d.c),U,"0"):x===10&&_e?(d=fe(new W(d),D+U+1,q),w=B(S(d.c),d.e,"0")):(v(x,2,ye.length,"Base"),w=l(B(S(d.c),U,"0"),10,x,b,!0)),b<0&&d.c[0]&&(w="-"+w)),w},N.valueOf=N.toJSON=function(){return _(this)},N._isBigNumber=!0,T!=null&&W.set(T),W}function y(T){var h=T|0;return T>0||T===h?h:h-1}function S(T){for(var h,l,R=1,N=T.length,F=T[0]+"";R<N;){for(h=T[R++]+"",l=f-h.length;l--;h="0"+h);F+=h}for(N=F.length;F.charCodeAt(--N)===48;);return F.slice(0,N+1||1)}function i(T,h){var l,R,N=T.c,F=h.c,D=T.s,q=h.s,j=T.e,H=h.e;if(!D||!q)return null;if(l=N&&!N[0],R=F&&!F[0],l||R)return l?R?0:-q:D;if(D!=q)return D;if(l=D<0,R=j==H,!N||!F)return R?0:!N^l?1:-1;if(!R)return j>H^l?1:-1;for(q=(j=N.length)<(H=F.length)?j:H,D=0;D<q;D++)if(N[D]!=F[D])return N[D]>F[D]^l?1:-1;return j==H?0:j>H^l?1:-1}function v(T,h,l,R){if(T<h||T>l||T!==c(T))throw Error(u+(R||"Argument")+(typeof T=="number"?T<h||T>l?" out of range: ":" not an integer: ":" not a primitive number: ")+String(T))}function C(T){var h=T.c.length-1;return y(T.e/f)==h&&T.c[h]%2!=0}function I(T,h){return(T.length>1?T.charAt(0)+"."+T.slice(1):T)+(h<0?"e":"e+")+h}function B(T,h,l){var R,N;if(h<0){for(N=l+".";++h;N+=l);T=N+T}else if(R=T.length,++h>R){for(N=l,h-=R;--h;N+=l);T+=N}else h<R&&(T=T.slice(0,h)+"."+T.slice(h));return T}r=m(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Be)})(jc);var Hc=jc.exports;(function(t){var e=Hc,r=t.exports;(function(){var n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o,c,u={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function g(A){return n.lastIndex=0,n.test(A)?'"'+A.replace(n,function(E){var p=u[E];return typeof p=="string"?p:"\\u"+("0000"+E.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+A+'"'}function f(A,E){var p,s,m,y,S=o,i,v=E[A],C=v!=null&&(v instanceof e||e.isBigNumber(v));switch(v&&typeof v=="object"&&typeof v.toJSON=="function"&&(v=v.toJSON(A)),typeof a=="function"&&(v=a.call(E,A,v)),typeof v){case"string":return C?v:g(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":case"bigint":return String(v);case"object":if(!v)return"null";if(o+=c,i=[],Object.prototype.toString.apply(v)==="[object Array]"){for(y=v.length,p=0;p<y;p+=1)i[p]=f(p,v)||"null";return m=i.length===0?"[]":o?`[
`+o+i.join(`,
`+o)+`
`+S+"]":"["+i.join(",")+"]",o=S,m}if(a&&typeof a=="object")for(y=a.length,p=0;p<y;p+=1)typeof a[p]=="string"&&(s=a[p],m=f(s,v),m&&i.push(g(s)+(o?": ":":")+m));else Object.keys(v).forEach(function(I){var B=f(I,v);B&&i.push(g(I)+(o?": ":":")+B)});return m=i.length===0?"{}":o?`{
`+o+i.join(`,
`+o)+`
`+S+"}":"{"+i.join(",")+"}",o=S,m}}typeof r.stringify!="function"&&(r.stringify=function(A,E,p){var s;if(o="",c="",typeof p=="number")for(s=0;s<p;s+=1)c+=" ";else typeof p=="string"&&(c=p);if(a=E,E&&typeof E!="function"&&(typeof E!="object"||typeof E.length!="number"))throw new Error("JSON.stringify");return f("",{"":A})})})()})(Gc);var mf=Gc.exports,An=null;const Ef=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,Cf=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var Sf=function(t){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},c,u=function(y){throw{name:"SyntaxError",message:y,at:r,text:c}},a=function(y){return y&&y!==n&&u("Expected '"+y+"' instead of '"+n+"'"),n=c.charAt(r),r+=1,n},g=function(){var y,S="";for(n==="-"&&(S="-",a("-"));n>="0"&&n<="9";)S+=n,a();if(n===".")for(S+=".";a()&&n>="0"&&n<="9";)S+=n;if(n==="e"||n==="E")for(S+=n,a(),(n==="-"||n==="+")&&(S+=n,a());n>="0"&&n<="9";)S+=n,a();if(y=+S,!isFinite(y))u("Bad number");else return An==null&&(An=Hc),S.length>15?e.storeAsString?S:e.useNativeBigInt?BigInt(S):new An(S):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(y):new An(y):y},f=function(){var y,S,i="",v;if(n==='"')for(var C=r;a();){if(n==='"')return r-1>C&&(i+=c.substring(C,r-1)),a(),i;if(n==="\\"){if(r-1>C&&(i+=c.substring(C,r-1)),a(),n==="u"){for(v=0,S=0;S<4&&(y=parseInt(a(),16),!!isFinite(y));S+=1)v=v*16+y;i+=String.fromCharCode(v)}else if(typeof o[n]=="string")i+=o[n];else break;C=r}}u("Bad string")},A=function(){for(;n&&n<=" ";)a()},E=function(){switch(n){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}u("Unexpected '"+n+"'")},p,s=function(){var y=[];if(n==="["){if(a("["),A(),n==="]")return a("]"),y;for(;n;){if(y.push(p()),A(),n==="]")return a("]"),y;a(","),A()}}u("Bad array")},m=function(){var y,S=Object.create(null);if(n==="{"){if(a("{"),A(),n==="}")return a("}"),S;for(;n;){if(y=f(),A(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(S,y)&&u('Duplicate key "'+y+'"'),Ef.test(y)===!0?e.protoAction==="error"?u("Object contains forbidden prototype property"):e.protoAction==="ignore"?p():S[y]=p():Cf.test(y)===!0?e.constructorAction==="error"?u("Object contains forbidden constructor property"):e.constructorAction==="ignore"?p():S[y]=p():S[y]=p(),A(),n==="}")return a("}"),S;a(","),A()}}u("Bad object")};return p=function(){switch(A(),n){case"{":return m();case"[":return s();case'"':return f();case"-":return g();default:return n>="0"&&n<="9"?g():E()}},function(y,S){var i;return c=y+"",r=0,n=" ",i=p(),A(),n&&u("Syntax error"),typeof S=="function"?function v(C,I){var B,T=C[I];return T&&typeof T=="object"&&Object.keys(T).forEach(function(h){B=v(T,h),B!==void 0?T[h]=B:delete T[h]}),S.call(C,I,T)}({"":i},""):i}},Af=Sf,zc=mf.stringify,Wc=Af;Zn.exports=function(t){return{parse:Wc(t),stringify:zc}};Zn.exports.parse=Wc();Zn.exports.stringify=zc;var Tf=Zn.exports,Yi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.detectGCPResidency=t.isGoogleComputeEngine=t.isGoogleComputeEngineMACAddress=t.isGoogleComputeEngineLinux=t.isGoogleCloudServerless=t.GCE_LINUX_BIOS_PATHS=void 0;const e=nr,r=Lc;t.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};const n=/^42:01/;function o(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}t.isGoogleCloudServerless=o;function c(){if((0,r.platform)()!=="linux")return!1;try{(0,e.statSync)(t.GCE_LINUX_BIOS_PATHS.BIOS_DATE);const f=(0,e.readFileSync)(t.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(f)}catch{return!1}}t.isGoogleComputeEngineLinux=c;function u(){const f=(0,r.networkInterfaces)();for(const A of Object.values(f))if(A){for(const{mac:E}of A)if(n.test(E))return!0}return!1}t.isGoogleComputeEngineMACAddress=u;function a(){return c()||u()}t.isGoogleComputeEngine=a;function g(){return o()||a()}t.detectGCPResidency=g})(Yi);(function(t){var e=Be&&Be.__createBinding||(Object.create?function(v,C,I,B){B===void 0&&(B=I);var T=Object.getOwnPropertyDescriptor(C,I);(!T||("get"in T?!C.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return C[I]}}),Object.defineProperty(v,B,T)}:function(v,C,I,B){B===void 0&&(B=I),v[B]=C[I]}),r=Be&&Be.__exportStar||function(v,C){for(var I in v)I!=="default"&&!Object.prototype.hasOwnProperty.call(C,I)&&e(C,v,I)};Object.defineProperty(t,"__esModule",{value:!0}),t.requestTimeout=t.setGCPResidency=t.gcpResidencyCache=t.resetIsAvailableCache=t.isAvailable=t.project=t.instance=t.HEADERS=t.HEADER_VALUE=t.HEADER_NAME=t.SECONDARY_HOST_ADDRESS=t.HOST_ADDRESS=t.BASE_PATH=void 0;const n=At,o=Tf,c=Yi;t.BASE_PATH="/computeMetadata/v1",t.HOST_ADDRESS="http://169.254.169.254",t.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",t.HEADER_NAME="Metadata-Flavor",t.HEADER_VALUE="Google",t.HEADERS=Object.freeze({[t.HEADER_NAME]:t.HEADER_VALUE});function u(v){return v||(v=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||t.HOST_ADDRESS),/^https?:\/\//.test(v)||(v=`http://${v}`),new URL(t.BASE_PATH,v).href}function a(v){Object.keys(v).forEach(C=>{switch(C){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${C}' is not a valid configuration option.`)}})}async function g(v,C,I=3,B=!1){C=C||{},typeof C=="string"&&(C={property:C});let T="";typeof C=="object"&&C.property&&(T="/"+C.property),a(C);try{const l=await(B?f:n.request)({url:`${u()}/${v}${T}`,headers:Object.assign({},t.HEADERS,C.headers),retryConfig:{noResponseRetries:I},params:C.params,responseType:"text",timeout:i()});if(l.headers[t.HEADER_NAME.toLowerCase()]!==t.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${t.HEADER_NAME} header.`);if(!l.data)throw new Error("Invalid response from the metadata service");if(typeof l.data=="string")try{return o.parse(l.data)}catch{}return l.data}catch(h){const l=h;throw l.response&&l.response.status!==200&&(l.message=`Unsuccessful response status code. ${l.message}`),h}}async function f(v){const C={...v,url:v.url.replace(u(),u(t.SECONDARY_HOST_ADDRESS))};let I=!1;const B=(0,n.request)(v).then(h=>(I=!0,h)).catch(h=>{if(I)return T;throw I=!0,h}),T=(0,n.request)(C).then(h=>(I=!0,h)).catch(h=>{if(I)return B;throw I=!0,h});return Promise.race([B,T])}function A(v){return g("instance",v)}t.instance=A;function E(v){return g("project",v)}t.project=E;function p(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}let s;async function m(){try{return s===void 0&&(s=g("instance",void 0,p(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await s,!0}catch(v){const C=v;if(process.env.DEBUG_AUTH&&console.info(C),C.type==="request-timeout"||C.response&&C.response.status===404)return!1;if(!(C.response&&C.response.status===404)&&(!C.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(C.code))){let I="UNKNOWN";C.code&&(I=C.code),process.emitWarning(`received unexpected error = ${C.message} code = ${I}`,"MetadataLookupWarning")}return!1}}t.isAvailable=m;function y(){s=void 0}t.resetIsAvailableCache=y,t.gcpResidencyCache=null;function S(v=null){t.gcpResidencyCache=v!==null?v:(0,c.detectGCPResidency)()}t.setGCPResidency=S;function i(){return t.gcpResidencyCache===null&&(t.gcpResidencyCache=(0,c.detectGCPResidency)()),t.gcpResidencyCache?0:3e3}t.requestTimeout=i,r(Yi,t)})(Qn);var wt={},Ur={},ea={};ea.byteLength=wf;ea.toByteArray=bf;ea.fromByteArray=Nf;var Et=[],ut=[],xf=typeof Uint8Array<"u"?Uint8Array:Array,Oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var fr=0,_f=Oa.length;fr<_f;++fr)Et[fr]=Oa[fr],ut[Oa.charCodeAt(fr)]=fr;ut["-".charCodeAt(0)]=62;ut["_".charCodeAt(0)]=63;function Qc(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function wf(t){var e=Qc(t),r=e[0],n=e[1];return(r+n)*3/4-n}function If(t,e,r){return(e+r)*3/4-r}function bf(t){var e,r=Qc(t),n=r[0],o=r[1],c=new xf(If(t,n,o)),u=0,a=o>0?n-4:n,g;for(g=0;g<a;g+=4)e=ut[t.charCodeAt(g)]<<18|ut[t.charCodeAt(g+1)]<<12|ut[t.charCodeAt(g+2)]<<6|ut[t.charCodeAt(g+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=e&255;return o===2&&(e=ut[t.charCodeAt(g)]<<2|ut[t.charCodeAt(g+1)]>>4,c[u++]=e&255),o===1&&(e=ut[t.charCodeAt(g)]<<10|ut[t.charCodeAt(g+1)]<<4|ut[t.charCodeAt(g+2)]>>2,c[u++]=e>>8&255,c[u++]=e&255),c}function Bf(t){return Et[t>>18&63]+Et[t>>12&63]+Et[t>>6&63]+Et[t&63]}function Rf(t,e,r){for(var n,o=[],c=e;c<r;c+=3)n=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(t[c+2]&255),o.push(Bf(n));return o.join("")}function Nf(t){for(var e,r=t.length,n=r%3,o=[],c=16383,u=0,a=r-n;u<a;u+=c)o.push(Rf(t,u,u+c>a?a:u+c));return n===1?(e=t[r-1],o.push(Et[e>>2]+Et[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(Et[e>>10]+Et[e>>4&63]+Et[e<<2&63]+"=")),o.join("")}var Ws={},Qs;function Pf(){return Qs||(Qs=1,function(t){function e(i,v){var C;return i instanceof Buffer?C=i:C=Buffer.from(i.buffer,i.byteOffset,i.byteLength),C.toString(v)}var r=function(i){return Buffer.from(i)};function n(i){for(var v=0,C=Math.min(256*256,i.length+1),I=new Uint16Array(C),B=[],T=0;;){var h=v<i.length;if(!h||T>=C-1){var l=I.subarray(0,T),R=l;if(B.push(String.fromCharCode.apply(null,R)),!h)return B.join("");i=i.subarray(v),v=0,T=0}var N=i[v++];if(!(N&128))I[T++]=N;else if((N&224)===192){var F=i[v++]&63;I[T++]=(N&31)<<6|F}else if((N&240)===224){var F=i[v++]&63,D=i[v++]&63;I[T++]=(N&31)<<12|F<<6|D}else if((N&248)===240){var F=i[v++]&63,D=i[v++]&63,q=i[v++]&63,j=(N&7)<<18|F<<12|D<<6|q;j>65535&&(j-=65536,I[T++]=j>>>10&1023|55296,j=56320|j&1023),I[T++]=j}}}function o(i){for(var v=0,C=i.length,I=0,B=Math.max(32,C+(C>>>1)+7),T=new Uint8Array(B>>>3<<3);v<C;){var h=i.charCodeAt(v++);if(h>=55296&&h<=56319){if(v<C){var l=i.charCodeAt(v);(l&64512)===56320&&(++v,h=((h&1023)<<10)+(l&1023)+65536)}if(h>=55296&&h<=56319)continue}if(I+4>T.length){B+=8,B*=1+v/i.length*2,B=B>>>3<<3;var R=new Uint8Array(B);R.set(T),T=R}if(h&4294967168)if(!(h&4294965248))T[I++]=h>>>6&31|192;else if(!(h&4294901760))T[I++]=h>>>12&15|224,T[I++]=h>>>6&63|128;else if(!(h&4292870144))T[I++]=h>>>18&7|240,T[I++]=h>>>12&63|128,T[I++]=h>>>6&63|128;else continue;else{T[I++]=h;continue}T[I++]=h&63|128}return T.slice?T.slice(0,I):T.subarray(0,I)}var c="Failed to ",u=function(i,v,C){if(i)throw new Error("".concat(c).concat(v,": the '").concat(C,"' option is unsupported."))},a=typeof Buffer=="function"&&Buffer.from,g=a?r:o;function f(){this.encoding="utf-8"}f.prototype.encode=function(i,v){return u(v&&v.stream,"encode","stream"),g(i)};function A(i){var v;try{var C=new Blob([i],{type:"text/plain;charset=UTF-8"});v=URL.createObjectURL(C);var I=new XMLHttpRequest;return I.open("GET",v,!1),I.send(),I.responseText}finally{v&&URL.revokeObjectURL(v)}}var E=!a&&typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function",p=["utf-8","utf8","unicode-1-1-utf-8"],s=n;a?s=e:E&&(s=function(i){try{return A(i)}catch{return n(i)}});var m="construct 'TextDecoder'",y="".concat(c," ").concat(m,": the ");function S(i,v){u(v&&v.fatal,m,"fatal"),i=i||"utf-8";var C;if(a?C=Buffer.isEncoding(i):C=p.indexOf(i.toLowerCase())!==-1,!C)throw new RangeError("".concat(y," encoding label provided ('").concat(i,"') is invalid."));this.encoding=i,this.fatal=!1,this.ignoreBOM=!1}S.prototype.decode=function(i,v){u(v&&v.stream,"decode","stream");var C;return i instanceof Uint8Array?C=i:i.buffer instanceof ArrayBuffer?C=new Uint8Array(i.buffer):C=new Uint8Array(i),s(C,this.encoding)},t.TextEncoder=t.TextEncoder||f,t.TextDecoder=t.TextDecoder||S}(typeof window<"u"?window:Be)),Ws}var Ys;function Of(){if(Ys)return Ur;Ys=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.BrowserCrypto=void 0;const t=ea;typeof process>"u"&&typeof TextEncoder>"u"&&Pf();const e=Jr();class r{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(o){const c=new TextEncoder().encode(o),u=await window.crypto.subtle.digest("SHA-256",c);return t.fromByteArray(new Uint8Array(u))}randomBytesBase64(o){const c=new Uint8Array(o);return window.crypto.getRandomValues(c),t.fromByteArray(c)}static padBase64(o){for(;o.length%4!==0;)o+="=";return o}async verify(o,c,u){const a={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},g=new TextEncoder().encode(c),f=t.toByteArray(r.padBase64(u)),A=await window.crypto.subtle.importKey("jwk",o,a,!0,["verify"]);return await window.crypto.subtle.verify(a,A,f,g)}async sign(o,c){const u={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(c),g=await window.crypto.subtle.importKey("jwk",o,u,!0,["sign"]),f=await window.crypto.subtle.sign(u,g,a);return t.fromByteArray(new Uint8Array(f))}decodeBase64StringUtf8(o){const c=t.toByteArray(r.padBase64(o));return new TextDecoder().decode(c)}encodeBase64StringUtf8(o){const c=new TextEncoder().encode(o);return t.fromByteArray(c)}async sha256DigestHex(o){const c=new TextEncoder().encode(o),u=await window.crypto.subtle.digest("SHA-256",c);return(0,e.fromArrayBufferToHex)(u)}async signWithHmacSha256(o,c){const u=typeof o=="string"?o:String.fromCharCode(...new Uint16Array(o)),a=new TextEncoder,g=await window.crypto.subtle.importKey("raw",a.encode(u),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",g,a.encode(c))}}return Ur.BrowserCrypto=r,Ur}var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.NodeCrypto=void 0;const dr=Qr;class Uf{async sha256DigestBase64(e){return dr.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return dr.randomBytes(e).toString("base64")}async verify(e,r,n){const o=dr.createVerify("sha256");return o.update(r),o.end(),o.verify(e,n,"base64")}async sign(e,r){const n=dr.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return dr.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,r){const n=typeof e=="string"?e:Df(e);return kf(dr.createHmac("sha256",n).update(r).digest())}}ta.NodeCrypto=Uf;function kf(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function Df(t){return Buffer.from(t)}var Js;function Jr(){if(Js)return wt;Js=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.fromArrayBufferToHex=wt.hasBrowserCrypto=wt.createCrypto=void 0;const t=Of(),e=ta;function r(){return n()?new t.BrowserCrypto:new e.NodeCrypto}wt.createCrypto=r;function n(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}wt.hasBrowserCrypto=n;function o(c){return Array.from(new Uint8Array(c)).map(a=>a.toString(16).padStart(2,"0")).join("")}return wt.fromArrayBufferToHex=o,wt}var ar={},ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.validate=void 0;function Lf(t){const e=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(const r of e)if(t[r.invalid]){const n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}ra.validate=Lf;const Ff="google-auth-library",Mf="8.8.0",qf="Google Inc.",Vf="Google APIs Authentication Client Library for Node.js",Kf={node:">=12"},$f="./build/src/index.js",Gf="./build/src/index.d.ts",jf="googleapis/google-auth-library-nodejs.git",Hf=["google","api","google apis","client","client library"],zf={arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.2.0",gtoken:"^6.1.0",jws:"^4.0.0","lru-cache":"^6.0.0"},Wf={"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^9.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^4.0.0",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^18.0.0",sinon:"^15.0.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},Qf=["build/src","!build/src/**/*.map"],Yf={test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile",docs:"compodoc src/","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile",webpack:"webpack","browser-test":"karma start","docs-test":"linkinator docs","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",precompile:"gts clean"},Jf="Apache-2.0",Xf={name:Ff,version:Mf,author:qf,description:Vf,engines:Kf,main:$f,types:Gf,repository:jf,keywords:Hf,dependencies:zf,devDependencies:Wf,files:Qf,scripts:Yf,license:Jf};Object.defineProperty(ar,"__esModule",{value:!0});ar.DefaultTransporter=void 0;const Xs=At,Zf=ra,Yc=Xf,Jc="google-api-nodejs-client";class zr{configure(e={}){if(e.headers=e.headers||{},typeof window>"u"){const r=e.headers["User-Agent"];r?r.includes(`${Jc}/`)||(e.headers["User-Agent"]=`${r} ${zr.USER_AGENT}`):e.headers["User-Agent"]=zr.USER_AGENT;const n=`auth/${Yc.version}`;if(e.headers["x-goog-api-client"]&&!e.headers["x-goog-api-client"].includes(n))e.headers["x-goog-api-client"]=`${e.headers["x-goog-api-client"]} ${n}`;else if(!e.headers["x-goog-api-client"]){const o=process.version.replace(/^v/,"");e.headers["x-goog-api-client"]=`gl-node/${o} ${n}`}}return e}request(e,r){e=this.configure(e);try{(0,Zf.validate)(e)}catch(n){if(r)return r(n);throw n}if(r)(0,Xs.request)(e).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,Xs.request)(e).catch(n=>{throw this.processError(n)})}processError(e){const r=e.response,n=e,o=r?r.data:null;return r&&o&&o.error&&r.status!==200?typeof o.error=="string"?(n.message=o.error,n.code=r.status.toString()):Array.isArray(o.error.errors)?(n.message=o.error.errors.map(c=>c.message).join(`
`),n.code=o.error.code,n.errors=o.error.errors):(n.message=o.error.message,n.code=o.error.code||r.status):r&&r.status>=400&&(n.message=o,n.code=r.status.toString()),n}}ar.DefaultTransporter=zr;zr.USER_AGENT=`${Jc}/${Yc.version}`;var Xr={};const e0=t=>t==null?[]:Array.isArray(t)?t:typeof t=="string"?[t]:typeof t[Symbol.iterator]=="function"?[...t]:[t];var t0=e0,ir={},Ji={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Wn,n=r.Buffer;function o(u,a){for(var g in u)a[g]=u[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=c);function c(u,a,g){return n(u,a,g)}c.prototype=Object.create(n.prototype),o(n,c),c.from=function(u,a,g){if(typeof u=="number")throw new TypeError("Argument must not be a number");return n(u,a,g)},c.alloc=function(u,a,g){if(typeof u!="number")throw new TypeError("Argument must be a number");var f=n(u);return a!==void 0?typeof g=="string"?f.fill(a,g):f.fill(a):f.fill(0),f},c.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n(u)},c.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}})(Ji,Ji.exports);var Zr=Ji.exports;function Ua(t){var e=(t/8|0)+(t%8===0?0:1);return e}var r0={ES256:Ua(256),ES384:Ua(384),ES512:Ua(521)};function n0(t){var e=r0[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}var a0=n0,Dn=Zr.Buffer,Xc=a0,Ln=128,Zc=0,i0=32,s0=16,o0=2,eu=s0|i0|Zc<<6,Fn=o0|Zc<<6;function c0(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tu(t){if(Dn.isBuffer(t))return t;if(typeof t=="string")return Dn.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function u0(t,e){t=tu(t);var r=Xc(e),n=r+1,o=t.length,c=0;if(t[c++]!==eu)throw new Error('Could not find expected "seq"');var u=t[c++];if(u===(Ln|1)&&(u=t[c++]),o-c<u)throw new Error('"seq" specified length of "'+u+'", only "'+(o-c)+'" remaining');if(t[c++]!==Fn)throw new Error('Could not find expected "int" for "r"');var a=t[c++];if(o-c-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(o-c-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var g=c;if(c+=a,t[c++]!==Fn)throw new Error('Could not find expected "int" for "s"');var f=t[c++];if(o-c!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(o-c)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var A=c;if(c+=f,c!==o)throw new Error('Expected to consume entire buffer, but "'+(o-c)+'" bytes remain');var E=r-a,p=r-f,s=Dn.allocUnsafe(E+a+p+f);for(c=0;c<E;++c)s[c]=0;t.copy(s,c,g+Math.max(-E,0),g+a),c=r;for(var m=c;c<m+p;++c)s[c]=0;return t.copy(s,c,A+Math.max(-p,0),A+f),s=s.toString("base64"),s=c0(s),s}function Zs(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var o=t[e+n]>=Ln;return o&&--n,n}function l0(t,e){t=tu(t);var r=Xc(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var o=Zs(t,0,r),c=Zs(t,r,t.length),u=r-o,a=r-c,g=1+1+u+1+1+a,f=g<Ln,A=Dn.allocUnsafe((f?2:3)+g),E=0;return A[E++]=eu,f?A[E++]=g:(A[E++]=Ln|1,A[E++]=g&255),A[E++]=Fn,A[E++]=u,o<0?(A[E++]=0,E+=t.copy(A,E,0,r)):E+=t.copy(A,E,o,r),A[E++]=Fn,A[E++]=a,c<0?(A[E++]=0,t.copy(A,E,r)):t.copy(A,E,r+c),A}var ru={derToJose:u0,joseToDer:l0},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.AuthClient=void 0;const f0=Dc,d0=ar;class h0 extends f0.EventEmitter{constructor(){super(...arguments),this.transporter=new d0.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e["x-goog-user-project"]&&this.quotaProjectId&&(e["x-goog-user-project"]=this.quotaProjectId),e}}Kt.AuthClient=h0;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.LoginTicket=void 0;class p0{constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){const e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}en.LoginTicket=p0;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OAuth2Client=t.CertificateFormat=t.CodeChallengeMethod=void 0;const e=At,r=Hn,n=Nt,o=ru,c=Jr(),u=Kt,a=en;(function(A){A.Plain="plain",A.S256="S256"})(t.CodeChallengeMethod||(t.CodeChallengeMethod={}));var g;(function(A){A.PEM="PEM",A.JWK="JWK"})(g=t.CertificateFormat||(t.CertificateFormat={}));class f extends u.AuthClient{constructor(E,p,s){super(),this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=g.PEM,this.refreshTokenPromises=new Map;const m=E&&typeof E=="object"?E:{clientId:E,clientSecret:p,redirectUri:s};this._clientId=m.clientId,this._clientSecret=m.clientSecret,this.redirectUri=m.redirectUri,this.eagerRefreshThresholdMillis=m.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!m.forceRefreshOnFailure}generateAuthUrl(E={}){if(E.code_challenge_method&&!E.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return E.response_type=E.response_type||"code",E.client_id=E.client_id||this._clientId,E.redirect_uri=E.redirect_uri||this.redirectUri,Array.isArray(E.scope)&&(E.scope=E.scope.join(" ")),f.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+r.stringify(E)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){const E=(0,c.createCrypto)(),s=E.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),y=(await E.sha256DigestBase64(s)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:s,codeChallenge:y}}getToken(E,p){const s=typeof E=="string"?{code:E}:E;if(p)this.getTokenAsync(s).then(m=>p(null,m.tokens,m.res),m=>p(m,null,m.response));else return this.getTokenAsync(s)}async getTokenAsync(E){const p=f.GOOGLE_OAUTH2_TOKEN_URL_,s={code:E.code,client_id:E.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:E.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:E.codeVerifier},m=await this.transporter.request({method:"POST",url:p,data:r.stringify(s),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),y=m.data;return m.data&&m.data.expires_in&&(y.expiry_date=new Date().getTime()+m.data.expires_in*1e3,delete y.expires_in),this.emit("tokens",y),{tokens:y,res:m}}async refreshToken(E){if(!E)return this.refreshTokenNoCache(E);if(this.refreshTokenPromises.has(E))return this.refreshTokenPromises.get(E);const p=this.refreshTokenNoCache(E).then(s=>(this.refreshTokenPromises.delete(E),s),s=>{throw this.refreshTokenPromises.delete(E),s});return this.refreshTokenPromises.set(E,p),p}async refreshTokenNoCache(E){var p;if(!E)throw new Error("No refresh token is set.");const s=f.GOOGLE_OAUTH2_TOKEN_URL_,m={refresh_token:E,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};let y;try{y=await this.transporter.request({method:"POST",url:s,data:r.stringify(m),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}catch(i){throw i instanceof e.GaxiosError&&i.message==="invalid_grant"&&(!((p=i.response)===null||p===void 0)&&p.data)&&/ReAuth/i.test(i.response.data.error_description)&&(i.message=JSON.stringify(i.response.data)),i}const S=y.data;return y.data&&y.data.expires_in&&(S.expiry_date=new Date().getTime()+y.data.expires_in*1e3,delete S.expires_in),this.emit("tokens",S),{tokens:S,res:y}}refreshAccessToken(E){if(E)this.refreshAccessTokenAsync().then(p=>E(null,p.credentials,p.res),E);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){const E=await this.refreshToken(this.credentials.refresh_token),p=E.tokens;return p.refresh_token=this.credentials.refresh_token,this.credentials=p,{credentials:this.credentials,res:E.res}}getAccessToken(E){if(E)this.getAccessTokenAsync().then(p=>E(null,p.token,p.res),E);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){const s=await this.processAndValidateRefreshHandler();if(s!=null&&s.access_token)return this.setCredentials(s),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");const p=await this.refreshAccessTokenAsync();if(!p.credentials||p.credentials&&!p.credentials.access_token)throw new Error("Could not refresh access token.");return{token:p.credentials.access_token,res:p.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(E){return(await this.getRequestMetadataAsync(E)).headers}async getRequestMetadataAsync(E){const p=this.credentials;if(!p.access_token&&!p.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(p.access_token&&!this.isTokenExpiring()){p.token_type=p.token_type||"Bearer";const i={Authorization:p.token_type+" "+p.access_token};return{headers:this.addSharedMetadataHeaders(i)}}if(this.refreshHandler){const i=await this.processAndValidateRefreshHandler();if(i!=null&&i.access_token){this.setCredentials(i);const v={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(v)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let s=null,m=null;try{s=await this.refreshToken(p.refresh_token),m=s.tokens}catch(i){const v=i;throw v.response&&(v.response.status===403||v.response.status===404)&&(v.message=`Could not refresh access token: ${v.message}`),v}const y=this.credentials;y.token_type=y.token_type||"Bearer",m.refresh_token=y.refresh_token,this.credentials=m;const S={Authorization:y.token_type+" "+m.access_token};return{headers:this.addSharedMetadataHeaders(S),res:s.res}}static getRevokeTokenUrl(E){const p=r.stringify({token:E});return`${f.GOOGLE_OAUTH2_REVOKE_URL_}?${p}`}revokeToken(E,p){const s={url:f.getRevokeTokenUrl(E),method:"POST"};if(p)this.transporter.request(s).then(m=>p(null,m),p);else return this.transporter.request(s)}revokeCredentials(E){if(E)this.revokeCredentialsAsync().then(p=>E(null,p),E);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){const E=this.credentials.access_token;if(this.credentials={},E)return this.revokeToken(E);throw new Error("No access token to revoke.")}request(E,p){if(p)this.requestAsync(E).then(s=>p(null,s),s=>p(s,s.response));else return this.requestAsync(E)}async requestAsync(E,p=!1){let s;try{const m=await this.getRequestMetadataAsync(E.url);E.headers=E.headers||{},m.headers&&m.headers["x-goog-user-project"]&&(E.headers["x-goog-user-project"]=m.headers["x-goog-user-project"]),m.headers&&m.headers.Authorization&&(E.headers.Authorization=m.headers.Authorization),this.apiKey&&(E.headers["X-Goog-Api-Key"]=this.apiKey),s=await this.transporter.request(E)}catch(m){const y=m.response;if(y){const S=y.status,i=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),v=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,C=y.config.data instanceof n.Readable,I=S===401||S===403;if(!p&&I&&!C&&i)return await this.refreshAccessTokenAsync(),this.requestAsync(E,!0);if(!p&&I&&!C&&v){const B=await this.processAndValidateRefreshHandler();return B!=null&&B.access_token&&this.setCredentials(B),this.requestAsync(E,!0)}}throw m}return s}verifyIdToken(E,p){if(p&&typeof p!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(p)this.verifyIdTokenAsync(E).then(s=>p(null,s),p);else return this.verifyIdTokenAsync(E)}async verifyIdTokenAsync(E){if(!E.idToken)throw new Error("The verifyIdToken method requires an ID Token");const p=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(E.idToken,p.certs,E.audience,f.ISSUERS_,E.maxExpiry)}async getTokenInfo(E){const{data:p}=await this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${E}`},url:f.GOOGLE_TOKEN_INFO_URL}),s=Object.assign({expiry_date:new Date().getTime()+p.expires_in*1e3,scopes:p.scope.split(" ")},p);return delete s.expires_in,delete s.scope,s}getFederatedSignonCerts(E){if(E)this.getFederatedSignonCertsAsync().then(p=>E(null,p.certs,p.res),E);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){const E=new Date().getTime(),p=(0,c.hasBrowserCrypto)()?g.JWK:g.PEM;if(this.certificateExpiry&&E<this.certificateExpiry.getTime()&&this.certificateCacheFormat===p)return{certs:this.certificateCache,format:p};let s,m;switch(p){case g.PEM:m=f.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case g.JWK:m=f.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${p}`)}try{s=await this.transporter.request({url:m})}catch(C){throw C instanceof Error&&(C.message=`Failed to retrieve verification certificates: ${C.message}`),C}const y=s?s.headers["cache-control"]:void 0;let S=-1;if(y){const I=new RegExp("max-age=([0-9]*)").exec(y);I&&I.length===2&&(S=Number(I[1])*1e3)}let i={};switch(p){case g.PEM:i=s.data;break;case g.JWK:for(const C of s.data.keys)i[C.kid]=C;break;default:throw new Error(`Unsupported certificate format ${p}`)}const v=new Date;return this.certificateExpiry=S===-1?null:new Date(v.getTime()+S),this.certificateCache=i,this.certificateCacheFormat=p,{certs:i,format:p,res:s}}getIapPublicKeys(E){if(E)this.getIapPublicKeysAsync().then(p=>E(null,p.pubkeys,p.res),E);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let E;const p=f.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{E=await this.transporter.request({url:p})}catch(s){throw s instanceof Error&&(s.message=`Failed to retrieve verification certificates: ${s.message}`),s}return{pubkeys:E.data,res:E}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(E,p,s,m,y){const S=(0,c.createCrypto)();y||(y=f.MAX_TOKEN_LIFETIME_SECS_);const i=E.split(".");if(i.length!==3)throw new Error("Wrong number of segments in token: "+E);const v=i[0]+"."+i[1];let C=i[2],I,B;try{I=JSON.parse(S.decodeBase64StringUtf8(i[0]))}catch(q){throw q instanceof Error&&(q.message=`Can't parse token envelope: ${i[0]}': ${q.message}`),q}if(!I)throw new Error("Can't parse token envelope: "+i[0]);try{B=JSON.parse(S.decodeBase64StringUtf8(i[1]))}catch(q){throw q instanceof Error&&(q.message=`Can't parse token payload '${i[0]}`),q}if(!B)throw new Error("Can't parse token payload: "+i[1]);if(!Object.prototype.hasOwnProperty.call(p,I.kid))throw new Error("No pem found for envelope: "+JSON.stringify(I));const T=p[I.kid];if(I.alg==="ES256"&&(C=o.joseToDer(C,"ES256").toString("base64")),!await S.verify(T,v,C))throw new Error("Invalid token signature: "+E);if(!B.iat)throw new Error("No issue time in token: "+JSON.stringify(B));if(!B.exp)throw new Error("No expiration time in token: "+JSON.stringify(B));const l=Number(B.iat);if(isNaN(l))throw new Error("iat field using invalid format");const R=Number(B.exp);if(isNaN(R))throw new Error("exp field using invalid format");const N=new Date().getTime()/1e3;if(R>=N+y)throw new Error("Expiration time too far in future: "+JSON.stringify(B));const F=l-f.CLOCK_SKEW_SECS_,D=R+f.CLOCK_SKEW_SECS_;if(N<F)throw new Error("Token used too early, "+N+" < "+F+": "+JSON.stringify(B));if(N>D)throw new Error("Token used too late, "+N+" > "+D+": "+JSON.stringify(B));if(m&&m.indexOf(B.iss)<0)throw new Error("Invalid issuer, expected one of ["+m+"], but got "+B.iss);if(typeof s<"u"&&s!==null){const q=B.aud;let j=!1;if(s.constructor===Array?j=s.indexOf(q)>-1:j=q===s,!j)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new a.LoginTicket(I,B)}async processAndValidateRefreshHandler(){if(this.refreshHandler){const E=await this.refreshHandler();if(!E.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return E}}isTokenExpiring(){const E=this.credentials.expiry_date;return E?E<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}}t.OAuth2Client=f,f.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo",f.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth",f.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token",f.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke",f.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs",f.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs",f.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key",f.CLOCK_SKEW_SECS_=300,f.MAX_TOKEN_LIFETIME_SECS_=86400,f.ISSUERS_=["accounts.google.com","https://accounts.google.com"]})(ir);Object.defineProperty(Xr,"__esModule",{value:!0});Xr.Compute=void 0;const y0=t0,g0=At,eo=Qn,v0=ir;class m0 extends v0.OAuth2Client{constructor(e={}){super(e),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=y0(e.scopes)}async refreshTokenNoCache(e){const r=`service-accounts/${this.serviceAccountEmail}/token`;let n;try{const c={property:r};this.scopes.length>0&&(c.params={scopes:this.scopes.join(",")}),n=await eo.instance(c)}catch(c){throw c instanceof g0.GaxiosError&&(c.message=`Could not refresh access token: ${c.message}`,this.wrapError(c)),c}const o=n;return n&&n.expires_in&&(o.expiry_date=new Date().getTime()+n.expires_in*1e3,delete o.expires_in),this.emit("tokens",o),{tokens:o,res:null}}async fetchIdToken(e){const r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`;let n;try{const o={property:r};n=await eo.instance(o)}catch(o){throw o instanceof Error&&(o.message=`Could not fetch ID token: ${o.message}`),o}return n}wrapError(e){const r=e.response;r&&r.status&&(e.code=r.status.toString(),r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}}Xr.Compute=m0;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.IdTokenClient=void 0;const E0=ir;class C0 extends E0.OAuth2Client{constructor(e){super(),this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}async getRequestMetadataAsync(e){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){const n=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}}getIdTokenExpiryDate(e){const r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}}tn.IdTokenClient=C0;var us={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=t.clear=t.GCPEnv=void 0;const e=Qn;var r;(function(p){p.APP_ENGINE="APP_ENGINE",p.KUBERNETES_ENGINE="KUBERNETES_ENGINE",p.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",p.COMPUTE_ENGINE="COMPUTE_ENGINE",p.CLOUD_RUN="CLOUD_RUN",p.NONE="NONE"})(r=t.GCPEnv||(t.GCPEnv={}));let n;function o(){n=void 0}t.clear=o;async function c(){return n||(n=u(),n)}t.getEnv=c;async function u(){let p=r.NONE;return a()?p=r.APP_ENGINE:g()?p=r.CLOUD_FUNCTIONS:await E()?await A()?p=r.KUBERNETES_ENGINE:f()?p=r.CLOUD_RUN:p=r.COMPUTE_ENGINE:p=r.NONE,p}function a(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function g(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function f(){return!!process.env.K_CONFIGURATION}async function A(){try{return await e.instance("attributes/cluster-name"),!0}catch{return!1}}async function E(){return e.isAvailable()}})(us);var rn={},na={},Ot={},Mn=Zr.Buffer,S0=Nt,A0=Pt;function aa(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=Mn.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=Mn.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}A0.inherits(aa,S0);aa.prototype.write=function(e){this.buffer=Mn.concat([this.buffer,Mn.from(e)]),this.emit("data",e)};aa.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};var nu=aa,Wr=Wn.Buffer,ls=Wn.SlowBuffer,T0=qn;function qn(t,e){if(!Wr.isBuffer(t)||!Wr.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}qn.install=function(){Wr.prototype.equal=ls.prototype.equal=function(e){return qn(this,e)}};var x0=Wr.prototype.equal,_0=ls.prototype.equal;qn.restore=function(){Wr.prototype.equal=x0,ls.prototype.equal=_0};var w0=T0,Tr=Zr.Buffer,St=Qr,au=ru,to=Pt,I0=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Vr="secret must be a string or buffer",vr="key must be a string or a buffer",b0="key must be a string, a buffer or an object",fs=typeof St.createPublicKey=="function";fs&&(vr+=" or a KeyObject",Vr+="or a KeyObject");function iu(t){if(!Tr.isBuffer(t)&&typeof t!="string"&&(!fs||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw pt(vr)}function su(t){if(!Tr.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw pt(b0)}function B0(t){if(!Tr.isBuffer(t)){if(typeof t=="string")return t;if(!fs||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw pt(Vr)}}function ds(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ou(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function pt(t){var e=[].slice.call(arguments,1),r=to.format.bind(to,t).apply(null,e);return new TypeError(r)}function R0(t){return Tr.isBuffer(t)||typeof t=="string"}function nn(t){return R0(t)||(t=JSON.stringify(t)),t}function cu(t){return function(r,n){B0(n),r=nn(r);var o=St.createHmac("sha"+t,n),c=(o.update(r),o.digest("base64"));return ds(c)}}function N0(t){return function(r,n,o){var c=cu(t)(r,o);return w0(Tr.from(n),Tr.from(c))}}function uu(t){return function(r,n){su(n),r=nn(r);var o=St.createSign("RSA-SHA"+t),c=(o.update(r),o.sign(n,"base64"));return ds(c)}}function lu(t){return function(r,n,o){iu(o),r=nn(r),n=ou(n);var c=St.createVerify("RSA-SHA"+t);return c.update(r),c.verify(o,n,"base64")}}function P0(t){return function(r,n){su(n),r=nn(r);var o=St.createSign("RSA-SHA"+t),c=(o.update(r),o.sign({key:n,padding:St.constants.RSA_PKCS1_PSS_PADDING,saltLength:St.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return ds(c)}}function O0(t){return function(r,n,o){iu(o),r=nn(r),n=ou(n);var c=St.createVerify("RSA-SHA"+t);return c.update(r),c.verify({key:o,padding:St.constants.RSA_PKCS1_PSS_PADDING,saltLength:St.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function U0(t){var e=uu(t);return function(){var n=e.apply(null,arguments);return n=au.derToJose(n,"ES"+t),n}}function k0(t){var e=lu(t);return function(n,o,c){o=au.joseToDer(o,"ES"+t).toString("base64");var u=e(n,o,c);return u}}function D0(){return function(){return""}}function L0(){return function(e,r){return r===""}}var fu=function(e){var r={hs:cu,rs:uu,ps:P0,es:U0,none:D0},n={hs:N0,rs:lu,ps:O0,es:k0,none:L0},o=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!o)throw pt(I0,e);var c=(o[1]||o[3]).toLowerCase(),u=o[2];return{sign:r[c](u),verify:n[c](u)}},F0=Wn.Buffer,du=function(e){return typeof e=="string"?e:typeof e=="number"||F0.isBuffer(e)?e.toString():JSON.stringify(e)},M0=Zr.Buffer,ro=nu,q0=fu,V0=Nt,no=du,hs=Pt;function ao(t,e){return M0.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function K0(t,e,r){r=r||"utf8";var n=ao(no(t),"binary"),o=ao(no(e),r);return hs.format("%s.%s",n,o)}function hu(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,o=t.encoding,c=q0(e.alg),u=K0(e,r,o),a=c.sign(u,n);return hs.format("%s.%s",u,a)}function ia(t){var e=t.secret||t.privateKey||t.key,r=new ro(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new ro(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}hs.inherits(ia,V0);ia.prototype.sign=function(){try{var e=hu({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};ia.sign=hu;var $0=ia,pu=Zr.Buffer,io=nu,G0=fu,j0=Nt,yu=du,H0=Pt,z0=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function W0(t){return Object.prototype.toString.call(t)==="[object Object]"}function Q0(t){if(W0(t))return t;try{return JSON.parse(t)}catch{return}}function gu(t){var e=t.split(".",1)[0];return Q0(pu.from(e,"base64").toString("binary"))}function Y0(t){return t.split(".",2).join(".")}function vu(t){return t.split(".")[2]}function J0(t,e){e=e||"utf8";var r=t.split(".")[1];return pu.from(r,"base64").toString(e)}function mu(t){return z0.test(t)&&!!gu(t)}function Eu(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=yu(t);var o=vu(t),c=Y0(t),u=G0(e);return u.verify(c,o,r)}function Cu(t,e){if(e=e||{},t=yu(t),!mu(t))return null;var r=gu(t);if(!r)return null;var n=J0(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:vu(t)}}function Br(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new io(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new io(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}H0.inherits(Br,j0);Br.prototype.verify=function(){try{var e=Eu(this.signature.buffer,this.algorithm,this.key.buffer),r=Cu(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Br.decode=Cu;Br.isValid=mu;Br.verify=Eu;var X0=Br,Su=$0,sa=X0,Z0=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Ot.ALGORITHMS=Z0;Ot.sign=Su.sign;Ot.verify=sa.verify;Ot.decode=sa.decode;Ot.isValid=sa.isValid;Ot.createSign=function(e){return new Su(e)};Ot.createVerify=function(e){return new sa(e)};var kr={},ka,so;function me(){return so||(so=1,ka={options:{usePureJavaScript:!1}}),ka}var Da={exports:{}},La,oo;function ed(){if(oo)return La;oo=1;var t={};La=t;var e={};t.encode=function(n,o,c){if(typeof o!="string")throw new TypeError('"alphabet" must be a string.');if(c!==void 0&&typeof c!="number")throw new TypeError('"maxline" must be a number.');var u="";if(!(n instanceof Uint8Array))u=r(n,o);else{var a=0,g=o.length,f=o.charAt(0),A=[0];for(a=0;a<n.length;++a){for(var E=0,p=n[a];E<A.length;++E)p+=A[E]<<8,A[E]=p%g,p=p/g|0;for(;p>0;)A.push(p%g),p=p/g|0}for(a=0;n[a]===0&&a<n.length-1;++a)u+=f;for(a=A.length-1;a>=0;--a)u+=o[A[a]]}if(c){var s=new RegExp(".{1,"+c+"}","g");u=u.match(s).join(`\r
`)}return u},t.decode=function(n,o){if(typeof n!="string")throw new TypeError('"input" must be a string.');if(typeof o!="string")throw new TypeError('"alphabet" must be a string.');var c=e[o];if(!c){c=e[o]=[];for(var u=0;u<o.length;++u)c[o.charCodeAt(u)]=u}n=n.replace(/\s/g,"");for(var a=o.length,g=o.charAt(0),f=[0],u=0;u<n.length;u++){var A=c[n.charCodeAt(u)];if(A===void 0)return;for(var E=0,p=A;E<f.length;++E)p+=f[E]*a,f[E]=p&255,p>>=8;for(;p>0;)f.push(p&255),p>>=8}for(var s=0;n[s]===g&&s<n.length-1;++s)f.push(0);return typeof Buffer<"u"?Buffer.from(f.reverse()):new Uint8Array(f.reverse())};function r(n,o){var c=0,u=o.length,a=o.charAt(0),g=[0];for(c=0;c<n.length();++c){for(var f=0,A=n.at(c);f<g.length;++f)A+=g[f]<<8,g[f]=A%u,A=A/u|0;for(;A>0;)g.push(A%u),A=A/u|0}var E="";for(c=0;n.at(c)===0&&c<n.length()-1;++c)E+=a;for(c=g.length-1;c>=0;--c)E+=o[g[c]];return E}return La}var co;function Ae(){if(co)return Da.exports;co=1;var t=me(),e=ed(),r=Da.exports=t.util=t.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){r.nextTick=process.nextTick,typeof setImmediate=="function"?r.setImmediate=setImmediate:r.setImmediate=r.nextTick;return}if(typeof setImmediate=="function"){r.setImmediate=function(){return setImmediate.apply(void 0,arguments)},r.nextTick=function(h){return setImmediate(h)};return}if(r.setImmediate=function(h){setTimeout(h,0)},typeof window<"u"&&typeof window.postMessage=="function"){let h=function(l){if(l.source===window&&l.data===i){l.stopPropagation();var R=v.slice();v.length=0,R.forEach(function(N){N()})}};var i="forge.setImmediate",v=[];r.setImmediate=function(l){v.push(l),v.length===1&&window.postMessage(i,"*")},window.addEventListener("message",h,!0)}if(typeof MutationObserver<"u"){var C=Date.now(),I=!0,B=document.createElement("div"),v=[];new MutationObserver(function(){var l=v.slice();v.length=0,l.forEach(function(R){R()})}).observe(B,{attributes:!0});var T=r.setImmediate;r.setImmediate=function(l){Date.now()-C>15?(C=Date.now(),T(l)):(v.push(l),v.length===1&&B.setAttribute("a",I=!I))}}r.nextTick=r.setImmediate})(),r.isNodejs=typeof process<"u"&&process.versions&&process.versions.node,r.globalScope=function(){return r.isNodejs?Be:typeof self>"u"?window:self}(),r.isArray=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},r.isArrayBuffer=function(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer},r.isArrayBufferView=function(i){return i&&r.isArrayBuffer(i.buffer)&&i.byteLength!==void 0};function n(i){if(!(i===8||i===16||i===24||i===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+i)}r.ByteBuffer=o;function o(i){if(this.data="",this.read=0,typeof i=="string")this.data=i;else if(r.isArrayBuffer(i)||r.isArrayBufferView(i))if(typeof Buffer<"u"&&i instanceof Buffer)this.data=i.toString("binary");else{var v=new Uint8Array(i);try{this.data=String.fromCharCode.apply(null,v)}catch{for(var C=0;C<v.length;++C)this.putByte(v[C])}}else(i instanceof o||typeof i=="object"&&typeof i.data=="string"&&typeof i.read=="number")&&(this.data=i.data,this.read=i.read);this._constructedStringLength=0}r.ByteStringBuffer=o;var c=4096;r.ByteStringBuffer.prototype._optimizeConstructedString=function(i){this._constructedStringLength+=i,this._constructedStringLength>c&&(this.data.substr(0,1),this._constructedStringLength=0)},r.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},r.ByteStringBuffer.prototype.putByte=function(i){return this.putBytes(String.fromCharCode(i))},r.ByteStringBuffer.prototype.fillWithByte=function(i,v){i=String.fromCharCode(i);for(var C=this.data;v>0;)v&1&&(C+=i),v>>>=1,v>0&&(i+=i);return this.data=C,this._optimizeConstructedString(v),this},r.ByteStringBuffer.prototype.putBytes=function(i){return this.data+=i,this._optimizeConstructedString(i.length),this},r.ByteStringBuffer.prototype.putString=function(i){return this.putBytes(r.encodeUtf8(i))},r.ByteStringBuffer.prototype.putInt16=function(i){return this.putBytes(String.fromCharCode(i>>8&255)+String.fromCharCode(i&255))},r.ByteStringBuffer.prototype.putInt24=function(i){return this.putBytes(String.fromCharCode(i>>16&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i&255))},r.ByteStringBuffer.prototype.putInt32=function(i){return this.putBytes(String.fromCharCode(i>>24&255)+String.fromCharCode(i>>16&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i&255))},r.ByteStringBuffer.prototype.putInt16Le=function(i){return this.putBytes(String.fromCharCode(i&255)+String.fromCharCode(i>>8&255))},r.ByteStringBuffer.prototype.putInt24Le=function(i){return this.putBytes(String.fromCharCode(i&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i>>16&255))},r.ByteStringBuffer.prototype.putInt32Le=function(i){return this.putBytes(String.fromCharCode(i&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i>>16&255)+String.fromCharCode(i>>24&255))},r.ByteStringBuffer.prototype.putInt=function(i,v){n(v);var C="";do v-=8,C+=String.fromCharCode(i>>v&255);while(v>0);return this.putBytes(C)},r.ByteStringBuffer.prototype.putSignedInt=function(i,v){return i<0&&(i+=2<<v-1),this.putInt(i,v)},r.ByteStringBuffer.prototype.putBuffer=function(i){return this.putBytes(i.getBytes())},r.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},r.ByteStringBuffer.prototype.getInt16=function(){var i=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,i},r.ByteStringBuffer.prototype.getInt24=function(){var i=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,i},r.ByteStringBuffer.prototype.getInt32=function(){var i=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,i},r.ByteStringBuffer.prototype.getInt16Le=function(){var i=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,i},r.ByteStringBuffer.prototype.getInt24Le=function(){var i=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,i},r.ByteStringBuffer.prototype.getInt32Le=function(){var i=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,i},r.ByteStringBuffer.prototype.getInt=function(i){n(i);var v=0;do v=(v<<8)+this.data.charCodeAt(this.read++),i-=8;while(i>0);return v},r.ByteStringBuffer.prototype.getSignedInt=function(i){var v=this.getInt(i),C=2<<i-2;return v>=C&&(v-=C<<1),v},r.ByteStringBuffer.prototype.getBytes=function(i){var v;return i?(i=Math.min(this.length(),i),v=this.data.slice(this.read,this.read+i),this.read+=i):i===0?v="":(v=this.read===0?this.data:this.data.slice(this.read),this.clear()),v},r.ByteStringBuffer.prototype.bytes=function(i){return typeof i>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+i)},r.ByteStringBuffer.prototype.at=function(i){return this.data.charCodeAt(this.read+i)},r.ByteStringBuffer.prototype.setAt=function(i,v){return this.data=this.data.substr(0,this.read+i)+String.fromCharCode(v)+this.data.substr(this.read+i+1),this},r.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},r.ByteStringBuffer.prototype.copy=function(){var i=r.createBuffer(this.data);return i.read=this.read,i},r.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},r.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},r.ByteStringBuffer.prototype.truncate=function(i){var v=Math.max(0,this.length()-i);return this.data=this.data.substr(this.read,v),this.read=0,this},r.ByteStringBuffer.prototype.toHex=function(){for(var i="",v=this.read;v<this.data.length;++v){var C=this.data.charCodeAt(v);C<16&&(i+="0"),i+=C.toString(16)}return i},r.ByteStringBuffer.prototype.toString=function(){return r.decodeUtf8(this.bytes())};function u(i,v){v=v||{},this.read=v.readOffset||0,this.growSize=v.growSize||1024;var C=r.isArrayBuffer(i),I=r.isArrayBufferView(i);if(C||I){C?this.data=new DataView(i):this.data=new DataView(i.buffer,i.byteOffset,i.byteLength),this.write="writeOffset"in v?v.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,i!=null&&this.putBytes(i),"writeOffset"in v&&(this.write=v.writeOffset)}r.DataBuffer=u,r.DataBuffer.prototype.length=function(){return this.write-this.read},r.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},r.DataBuffer.prototype.accommodate=function(i,v){if(this.length()>=i)return this;v=Math.max(v||this.growSize,i);var C=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),I=new Uint8Array(this.length()+v);return I.set(C),this.data=new DataView(I.buffer),this},r.DataBuffer.prototype.putByte=function(i){return this.accommodate(1),this.data.setUint8(this.write++,i),this},r.DataBuffer.prototype.fillWithByte=function(i,v){this.accommodate(v);for(var C=0;C<v;++C)this.data.setUint8(i);return this},r.DataBuffer.prototype.putBytes=function(i,v){if(r.isArrayBufferView(i)){var C=new Uint8Array(i.buffer,i.byteOffset,i.byteLength),I=C.byteLength-C.byteOffset;this.accommodate(I);var B=new Uint8Array(this.data.buffer,this.write);return B.set(C),this.write+=I,this}if(r.isArrayBuffer(i)){var C=new Uint8Array(i);this.accommodate(C.byteLength);var B=new Uint8Array(this.data.buffer);return B.set(C,this.write),this.write+=C.byteLength,this}if(i instanceof r.DataBuffer||typeof i=="object"&&typeof i.read=="number"&&typeof i.write=="number"&&r.isArrayBufferView(i.data)){var C=new Uint8Array(i.data.byteLength,i.read,i.length());this.accommodate(C.byteLength);var B=new Uint8Array(i.data.byteLength,this.write);return B.set(C),this.write+=C.byteLength,this}if(i instanceof r.ByteStringBuffer&&(i=i.data,v="binary"),v=v||"binary",typeof i=="string"){var T;if(v==="hex")return this.accommodate(Math.ceil(i.length/2)),T=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.hex.decode(i,T,this.write),this;if(v==="base64")return this.accommodate(Math.ceil(i.length/4)*3),T=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.base64.decode(i,T,this.write),this;if(v==="utf8"&&(i=r.encodeUtf8(i),v="binary"),v==="binary"||v==="raw")return this.accommodate(i.length),T=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.raw.decode(T),this;if(v==="utf16")return this.accommodate(i.length*2),T=new Uint16Array(this.data.buffer,this.write),this.write+=r.text.utf16.encode(T),this;throw new Error("Invalid encoding: "+v)}throw Error("Invalid parameter: "+i)},r.DataBuffer.prototype.putBuffer=function(i){return this.putBytes(i),i.clear(),this},r.DataBuffer.prototype.putString=function(i){return this.putBytes(i,"utf16")},r.DataBuffer.prototype.putInt16=function(i){return this.accommodate(2),this.data.setInt16(this.write,i),this.write+=2,this},r.DataBuffer.prototype.putInt24=function(i){return this.accommodate(3),this.data.setInt16(this.write,i>>8&65535),this.data.setInt8(this.write,i>>16&255),this.write+=3,this},r.DataBuffer.prototype.putInt32=function(i){return this.accommodate(4),this.data.setInt32(this.write,i),this.write+=4,this},r.DataBuffer.prototype.putInt16Le=function(i){return this.accommodate(2),this.data.setInt16(this.write,i,!0),this.write+=2,this},r.DataBuffer.prototype.putInt24Le=function(i){return this.accommodate(3),this.data.setInt8(this.write,i>>16&255),this.data.setInt16(this.write,i>>8&65535,!0),this.write+=3,this},r.DataBuffer.prototype.putInt32Le=function(i){return this.accommodate(4),this.data.setInt32(this.write,i,!0),this.write+=4,this},r.DataBuffer.prototype.putInt=function(i,v){n(v),this.accommodate(v/8);do v-=8,this.data.setInt8(this.write++,i>>v&255);while(v>0);return this},r.DataBuffer.prototype.putSignedInt=function(i,v){return n(v),this.accommodate(v/8),i<0&&(i+=2<<v-1),this.putInt(i,v)},r.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},r.DataBuffer.prototype.getInt16=function(){var i=this.data.getInt16(this.read);return this.read+=2,i},r.DataBuffer.prototype.getInt24=function(){var i=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,i},r.DataBuffer.prototype.getInt32=function(){var i=this.data.getInt32(this.read);return this.read+=4,i},r.DataBuffer.prototype.getInt16Le=function(){var i=this.data.getInt16(this.read,!0);return this.read+=2,i},r.DataBuffer.prototype.getInt24Le=function(){var i=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,i},r.DataBuffer.prototype.getInt32Le=function(){var i=this.data.getInt32(this.read,!0);return this.read+=4,i},r.DataBuffer.prototype.getInt=function(i){n(i);var v=0;do v=(v<<8)+this.data.getInt8(this.read++),i-=8;while(i>0);return v},r.DataBuffer.prototype.getSignedInt=function(i){var v=this.getInt(i),C=2<<i-2;return v>=C&&(v-=C<<1),v},r.DataBuffer.prototype.getBytes=function(i){var v;return i?(i=Math.min(this.length(),i),v=this.data.slice(this.read,this.read+i),this.read+=i):i===0?v="":(v=this.read===0?this.data:this.data.slice(this.read),this.clear()),v},r.DataBuffer.prototype.bytes=function(i){return typeof i>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+i)},r.DataBuffer.prototype.at=function(i){return this.data.getUint8(this.read+i)},r.DataBuffer.prototype.setAt=function(i,v){return this.data.setUint8(i,v),this},r.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},r.DataBuffer.prototype.copy=function(){return new r.DataBuffer(this)},r.DataBuffer.prototype.compact=function(){if(this.read>0){var i=new Uint8Array(this.data.buffer,this.read),v=new Uint8Array(i.byteLength);v.set(i),this.data=new DataView(v),this.write-=this.read,this.read=0}return this},r.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},r.DataBuffer.prototype.truncate=function(i){return this.write=Math.max(0,this.length()-i),this.read=Math.min(this.read,this.write),this},r.DataBuffer.prototype.toHex=function(){for(var i="",v=this.read;v<this.data.byteLength;++v){var C=this.data.getUint8(v);C<16&&(i+="0"),i+=C.toString(16)}return i},r.DataBuffer.prototype.toString=function(i){var v=new Uint8Array(this.data,this.read,this.length());if(i=i||"utf8",i==="binary"||i==="raw")return r.binary.raw.encode(v);if(i==="hex")return r.binary.hex.encode(v);if(i==="base64")return r.binary.base64.encode(v);if(i==="utf8")return r.text.utf8.decode(v);if(i==="utf16")return r.text.utf16.decode(v);throw new Error("Invalid encoding: "+i)},r.createBuffer=function(i,v){return v=v||"raw",i!==void 0&&v==="utf8"&&(i=r.encodeUtf8(i)),new r.ByteBuffer(i)},r.fillString=function(i,v){for(var C="";v>0;)v&1&&(C+=i),v>>>=1,v>0&&(i+=i);return C},r.xorBytes=function(i,v,C){for(var I="",B="",T="",h=0,l=0;C>0;--C,++h)B=i.charCodeAt(h)^v.charCodeAt(h),l>=10&&(I+=T,T="",l=0),T+=String.fromCharCode(B),++l;return I+=T,I},r.hexToBytes=function(i){var v="",C=0;for(i.length&!0&&(C=1,v+=String.fromCharCode(parseInt(i[0],16)));C<i.length;C+=2)v+=String.fromCharCode(parseInt(i.substr(C,2),16));return v},r.bytesToHex=function(i){return r.createBuffer(i).toHex()},r.int32ToBytes=function(i){return String.fromCharCode(i>>24&255)+String.fromCharCode(i>>16&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i&255)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";r.encode64=function(i,v){for(var C="",I="",B,T,h,l=0;l<i.length;)B=i.charCodeAt(l++),T=i.charCodeAt(l++),h=i.charCodeAt(l++),C+=a.charAt(B>>2),C+=a.charAt((B&3)<<4|T>>4),isNaN(T)?C+="==":(C+=a.charAt((T&15)<<2|h>>6),C+=isNaN(h)?"=":a.charAt(h&63)),v&&C.length>v&&(I+=C.substr(0,v)+`\r
`,C=C.substr(v));return I+=C,I},r.decode64=function(i){i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var v="",C,I,B,T,h=0;h<i.length;)C=g[i.charCodeAt(h++)-43],I=g[i.charCodeAt(h++)-43],B=g[i.charCodeAt(h++)-43],T=g[i.charCodeAt(h++)-43],v+=String.fromCharCode(C<<2|I>>4),B!==64&&(v+=String.fromCharCode((I&15)<<4|B>>2),T!==64&&(v+=String.fromCharCode((B&3)<<6|T)));return v},r.encodeUtf8=function(i){return unescape(encodeURIComponent(i))},r.decodeUtf8=function(i){return decodeURIComponent(escape(i))},r.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:e.encode,decode:e.decode}},r.binary.raw.encode=function(i){return String.fromCharCode.apply(null,i)},r.binary.raw.decode=function(i,v,C){var I=v;I||(I=new Uint8Array(i.length)),C=C||0;for(var B=C,T=0;T<i.length;++T)I[B++]=i.charCodeAt(T);return v?B-C:I},r.binary.hex.encode=r.bytesToHex,r.binary.hex.decode=function(i,v,C){var I=v;I||(I=new Uint8Array(Math.ceil(i.length/2))),C=C||0;var B=0,T=C;for(i.length&1&&(B=1,I[T++]=parseInt(i[0],16));B<i.length;B+=2)I[T++]=parseInt(i.substr(B,2),16);return v?T-C:I},r.binary.base64.encode=function(i,v){for(var C="",I="",B,T,h,l=0;l<i.byteLength;)B=i[l++],T=i[l++],h=i[l++],C+=a.charAt(B>>2),C+=a.charAt((B&3)<<4|T>>4),isNaN(T)?C+="==":(C+=a.charAt((T&15)<<2|h>>6),C+=isNaN(h)?"=":a.charAt(h&63)),v&&C.length>v&&(I+=C.substr(0,v)+`\r
`,C=C.substr(v));return I+=C,I},r.binary.base64.decode=function(i,v,C){var I=v;I||(I=new Uint8Array(Math.ceil(i.length/4)*3)),i=i.replace(/[^A-Za-z0-9\+\/\=]/g,""),C=C||0;for(var B,T,h,l,R=0,N=C;R<i.length;)B=g[i.charCodeAt(R++)-43],T=g[i.charCodeAt(R++)-43],h=g[i.charCodeAt(R++)-43],l=g[i.charCodeAt(R++)-43],I[N++]=B<<2|T>>4,h!==64&&(I[N++]=(T&15)<<4|h>>2,l!==64&&(I[N++]=(h&3)<<6|l));return v?N-C:I.subarray(0,N)},r.binary.base58.encode=function(i,v){return r.binary.baseN.encode(i,f,v)},r.binary.base58.decode=function(i,v){return r.binary.baseN.decode(i,f,v)},r.text={utf8:{},utf16:{}},r.text.utf8.encode=function(i,v,C){i=r.encodeUtf8(i);var I=v;I||(I=new Uint8Array(i.length)),C=C||0;for(var B=C,T=0;T<i.length;++T)I[B++]=i.charCodeAt(T);return v?B-C:I},r.text.utf8.decode=function(i){return r.decodeUtf8(String.fromCharCode.apply(null,i))},r.text.utf16.encode=function(i,v,C){var I=v;I||(I=new Uint8Array(i.length*2));var B=new Uint16Array(I.buffer);C=C||0;for(var T=C,h=C,l=0;l<i.length;++l)B[h++]=i.charCodeAt(l),T+=2;return v?T-C:I},r.text.utf16.decode=function(i){return String.fromCharCode.apply(null,new Uint16Array(i.buffer))},r.deflate=function(i,v,C){if(v=r.decode64(i.deflate(r.encode64(v)).rval),C){var I=2,B=v.charCodeAt(1);B&32&&(I=6),v=v.substring(I,v.length-4)}return v},r.inflate=function(i,v,C){var I=i.inflate(r.encode64(v)).rval;return I===null?null:r.decode64(I)};var A=function(i,v,C){if(!i)throw new Error("WebStorage not available.");var I;if(C===null?I=i.removeItem(v):(C=r.encode64(JSON.stringify(C)),I=i.setItem(v,C)),typeof I<"u"&&I.rval!==!0){var B=new Error(I.error.message);throw B.id=I.error.id,B.name=I.error.name,B}},E=function(i,v){if(!i)throw new Error("WebStorage not available.");var C=i.getItem(v);if(i.init)if(C.rval===null){if(C.error){var I=new Error(C.error.message);throw I.id=C.error.id,I.name=C.error.name,I}C=null}else C=C.rval;return C!==null&&(C=JSON.parse(r.decode64(C))),C},p=function(i,v,C,I){var B=E(i,v);B===null&&(B={}),B[C]=I,A(i,v,B)},s=function(i,v,C){var I=E(i,v);return I!==null&&(I=C in I?I[C]:null),I},m=function(i,v,C){var I=E(i,v);if(I!==null&&C in I){delete I[C];var B=!0;for(var T in I){B=!1;break}B&&(I=null),A(i,v,I)}},y=function(i,v){A(i,v,null)},S=function(i,v,C){var I=null;typeof C>"u"&&(C=["web","flash"]);var B,T=!1,h=null;for(var l in C){B=C[l];try{if(B==="flash"||B==="both"){if(v[0]===null)throw new Error("Flash local storage not available.");I=i.apply(this,v),T=B==="flash"}(B==="web"||B==="both")&&(v[0]=localStorage,I=i.apply(this,v),T=!0)}catch(R){h=R}if(T)break}if(!T)throw h;return I};return r.setItem=function(i,v,C,I,B){S(p,arguments,B)},r.getItem=function(i,v,C,I){return S(s,arguments,I)},r.removeItem=function(i,v,C,I){S(m,arguments,I)},r.clearItems=function(i,v,C){S(y,arguments,C)},r.isEmpty=function(i){for(var v in i)if(i.hasOwnProperty(v))return!1;return!0},r.format=function(i){for(var v=/%./g,C,I,B=0,T=[],h=0;C=v.exec(i);){I=i.substring(h,v.lastIndex-2),I.length>0&&T.push(I),h=v.lastIndex;var l=C[0][1];switch(l){case"s":case"o":B<arguments.length?T.push(arguments[B+++1]):T.push("<?>");break;case"%":T.push("%");break;default:T.push("<%"+l+"?>")}}return T.push(i.substring(h)),T.join("")},r.formatNumber=function(i,v,C,I){var B=i,T=isNaN(v=Math.abs(v))?2:v,h=C===void 0?",":C,l=I===void 0?".":I,R=B<0?"-":"",N=parseInt(B=Math.abs(+B||0).toFixed(T),10)+"",F=N.length>3?N.length%3:0;return R+(F?N.substr(0,F)+l:"")+N.substr(F).replace(/(\d{3})(?=\d)/g,"$1"+l)+(T?h+Math.abs(B-N).toFixed(T).slice(2):"")},r.formatSize=function(i){return i>=1073741824?i=r.formatNumber(i/1073741824,2,".","")+" GiB":i>=1048576?i=r.formatNumber(i/1048576,2,".","")+" MiB":i>=1024?i=r.formatNumber(i/1024,0)+" KiB":i=r.formatNumber(i,0)+" bytes",i},r.bytesFromIP=function(i){return i.indexOf(".")!==-1?r.bytesFromIPv4(i):i.indexOf(":")!==-1?r.bytesFromIPv6(i):null},r.bytesFromIPv4=function(i){if(i=i.split("."),i.length!==4)return null;for(var v=r.createBuffer(),C=0;C<i.length;++C){var I=parseInt(i[C],10);if(isNaN(I))return null;v.putByte(I)}return v.getBytes()},r.bytesFromIPv6=function(i){var v=0;i=i.split(":").filter(function(h){return h.length===0&&++v,!0});for(var C=(8-i.length+v)*2,I=r.createBuffer(),B=0;B<8;++B){if(!i[B]||i[B].length===0){I.fillWithByte(0,C),C=0;continue}var T=r.hexToBytes(i[B]);T.length<2&&I.putByte(0),I.putBytes(T)}return I.getBytes()},r.bytesToIP=function(i){return i.length===4?r.bytesToIPv4(i):i.length===16?r.bytesToIPv6(i):null},r.bytesToIPv4=function(i){if(i.length!==4)return null;for(var v=[],C=0;C<i.length;++C)v.push(i.charCodeAt(C));return v.join(".")},r.bytesToIPv6=function(i){if(i.length!==16)return null;for(var v=[],C=[],I=0,B=0;B<i.length;B+=2){for(var T=r.bytesToHex(i[B]+i[B+1]);T[0]==="0"&&T!=="0";)T=T.substr(1);if(T==="0"){var h=C[C.length-1],l=v.length;!h||l!==h.end+1?C.push({start:l,end:l}):(h.end=l,h.end-h.start>C[I].end-C[I].start&&(I=C.length-1))}v.push(T)}if(C.length>0){var R=C[I];R.end-R.start>0&&(v.splice(R.start,R.end-R.start+1,""),R.start===0&&v.unshift(""),R.end===7&&v.push(""))}return v.join(":")},r.estimateCores=function(i,v){if(typeof i=="function"&&(v=i,i={}),i=i||{},"cores"in r&&!i.update)return v(null,r.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return r.cores=navigator.hardwareConcurrency,v(null,r.cores);if(typeof Worker>"u")return r.cores=1,v(null,r.cores);if(typeof Blob>"u")return r.cores=2,v(null,r.cores);var C=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(h){var l=Date.now(),R=l+4;self.postMessage({st:l,et:R})})}.toString(),")()"],{type:"application/javascript"}));I([],5,16);function I(h,l,R){if(l===0){var N=Math.floor(h.reduce(function(F,D){return F+D},0)/h.length);return r.cores=Math.max(1,N),URL.revokeObjectURL(C),v(null,r.cores)}B(R,function(F,D){h.push(T(R,D)),I(h,l-1,R)})}function B(h,l){for(var R=[],N=[],F=0;F<h;++F){var D=new Worker(C);D.addEventListener("message",function(q){if(N.push(q.data),N.length===h){for(var j=0;j<h;++j)R[j].terminate();l(null,N)}}),R.push(D)}for(var F=0;F<h;++F)R[F].postMessage(F)}function T(h,l){for(var R=[],N=0;N<h;++N)for(var F=l[N],D=R[N]=[],q=0;q<h;++q)if(N!==q){var j=l[q];(F.st>j.st&&F.st<j.et||j.st>F.st&&j.st<F.et)&&D.push(q)}return R.reduce(function(H,Q){return Math.max(H,Q.length)},0)}},Da.exports}var Fa,uo;function ps(){if(uo)return Fa;uo=1;var t=me();Ae(),Fa=t.cipher=t.cipher||{},t.cipher.algorithms=t.cipher.algorithms||{},t.cipher.createCipher=function(r,n){var o=r;if(typeof o=="string"&&(o=t.cipher.getAlgorithm(o),o&&(o=o())),!o)throw new Error("Unsupported algorithm: "+r);return new t.cipher.BlockCipher({algorithm:o,key:n,decrypt:!1})},t.cipher.createDecipher=function(r,n){var o=r;if(typeof o=="string"&&(o=t.cipher.getAlgorithm(o),o&&(o=o())),!o)throw new Error("Unsupported algorithm: "+r);return new t.cipher.BlockCipher({algorithm:o,key:n,decrypt:!0})},t.cipher.registerAlgorithm=function(r,n){r=r.toUpperCase(),t.cipher.algorithms[r]=n},t.cipher.getAlgorithm=function(r){return r=r.toUpperCase(),r in t.cipher.algorithms?t.cipher.algorithms[r]:null};var e=t.cipher.BlockCipher=function(r){this.algorithm=r.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=r.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=r.decrypt,this.algorithm.initialize(r)};return e.prototype.start=function(r){r=r||{};var n={};for(var o in r)n[o]=r[o];n.decrypt=this._decrypt,this._finish=!1,this._input=t.util.createBuffer(),this.output=r.output||t.util.createBuffer(),this.mode.start(n)},e.prototype.update=function(r){for(r&&this._input.putBuffer(r);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(r){r&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(o){return r(this.blockSize,o,!1)},this.mode.unpad=function(o){return r(this.blockSize,o,!0)});var n={};return n.decrypt=this._decrypt,n.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,n)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,n))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,n))},Fa}var Ma={exports:{}},lo;function Au(){if(lo)return Ma.exports;lo=1;var t=me();Ae(),t.cipher=t.cipher||{};var e=Ma.exports=t.cipher.modes=t.cipher.modes||{};e.ecb=function(c){c=c||{},this.name="ECB",this.cipher=c.cipher,this.blockSize=c.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.ecb.prototype.start=function(c){},e.ecb.prototype.encrypt=function(c,u,a){if(c.length()<this.blockSize&&!(a&&c.length()>0))return!0;for(var g=0;g<this._ints;++g)this._inBlock[g]=c.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var g=0;g<this._ints;++g)u.putInt32(this._outBlock[g])},e.ecb.prototype.decrypt=function(c,u,a){if(c.length()<this.blockSize&&!(a&&c.length()>0))return!0;for(var g=0;g<this._ints;++g)this._inBlock[g]=c.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var g=0;g<this._ints;++g)u.putInt32(this._outBlock[g])},e.ecb.prototype.pad=function(c,u){var a=c.length()===this.blockSize?this.blockSize:this.blockSize-c.length();return c.fillWithByte(a,a),!0},e.ecb.prototype.unpad=function(c,u){if(u.overflow>0)return!1;var a=c.length(),g=c.at(a-1);return g>this.blockSize<<2?!1:(c.truncate(g),!0)},e.cbc=function(c){c=c||{},this.name="CBC",this.cipher=c.cipher,this.blockSize=c.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.cbc.prototype.start=function(c){if(c.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in c)this._iv=r(c.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},e.cbc.prototype.encrypt=function(c,u,a){if(c.length()<this.blockSize&&!(a&&c.length()>0))return!0;for(var g=0;g<this._ints;++g)this._inBlock[g]=this._prev[g]^c.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var g=0;g<this._ints;++g)u.putInt32(this._outBlock[g]);this._prev=this._outBlock},e.cbc.prototype.decrypt=function(c,u,a){if(c.length()<this.blockSize&&!(a&&c.length()>0))return!0;for(var g=0;g<this._ints;++g)this._inBlock[g]=c.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var g=0;g<this._ints;++g)u.putInt32(this._prev[g]^this._outBlock[g]);this._prev=this._inBlock.slice(0)},e.cbc.prototype.pad=function(c,u){var a=c.length()===this.blockSize?this.blockSize:this.blockSize-c.length();return c.fillWithByte(a,a),!0},e.cbc.prototype.unpad=function(c,u){if(u.overflow>0)return!1;var a=c.length(),g=c.at(a-1);return g>this.blockSize<<2?!1:(c.truncate(g),!0)},e.cfb=function(c){c=c||{},this.name="CFB",this.cipher=c.cipher,this.blockSize=c.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},e.cfb.prototype.start=function(c){if(!("iv"in c))throw new Error("Invalid IV parameter.");this._iv=r(c.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.cfb.prototype.encrypt=function(c,u,a){var g=c.length();if(g===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&g>=this.blockSize){for(var f=0;f<this._ints;++f)this._inBlock[f]=c.getInt32()^this._outBlock[f],u.putInt32(this._inBlock[f]);return}var A=(this.blockSize-g)%this.blockSize;A>0&&(A=this.blockSize-A),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialBlock[f]=c.getInt32()^this._outBlock[f],this._partialOutput.putInt32(this._partialBlock[f]);if(A>0)c.read-=this.blockSize;else for(var f=0;f<this._ints;++f)this._inBlock[f]=this._partialBlock[f];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),A>0&&!a)return u.putBytes(this._partialOutput.getBytes(A-this._partialBytes)),this._partialBytes=A,!0;u.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=0},e.cfb.prototype.decrypt=function(c,u,a){var g=c.length();if(g===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&g>=this.blockSize){for(var f=0;f<this._ints;++f)this._inBlock[f]=c.getInt32(),u.putInt32(this._inBlock[f]^this._outBlock[f]);return}var A=(this.blockSize-g)%this.blockSize;A>0&&(A=this.blockSize-A),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialBlock[f]=c.getInt32(),this._partialOutput.putInt32(this._partialBlock[f]^this._outBlock[f]);if(A>0)c.read-=this.blockSize;else for(var f=0;f<this._ints;++f)this._inBlock[f]=this._partialBlock[f];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),A>0&&!a)return u.putBytes(this._partialOutput.getBytes(A-this._partialBytes)),this._partialBytes=A,!0;u.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=0},e.ofb=function(c){c=c||{},this.name="OFB",this.cipher=c.cipher,this.blockSize=c.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},e.ofb.prototype.start=function(c){if(!("iv"in c))throw new Error("Invalid IV parameter.");this._iv=r(c.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ofb.prototype.encrypt=function(c,u,a){var g=c.length();if(c.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&g>=this.blockSize){for(var f=0;f<this._ints;++f)u.putInt32(c.getInt32()^this._outBlock[f]),this._inBlock[f]=this._outBlock[f];return}var A=(this.blockSize-g)%this.blockSize;A>0&&(A=this.blockSize-A),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(c.getInt32()^this._outBlock[f]);if(A>0)c.read-=this.blockSize;else for(var f=0;f<this._ints;++f)this._inBlock[f]=this._outBlock[f];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),A>0&&!a)return u.putBytes(this._partialOutput.getBytes(A-this._partialBytes)),this._partialBytes=A,!0;u.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=0},e.ofb.prototype.decrypt=e.ofb.prototype.encrypt,e.ctr=function(c){c=c||{},this.name="CTR",this.cipher=c.cipher,this.blockSize=c.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},e.ctr.prototype.start=function(c){if(!("iv"in c))throw new Error("Invalid IV parameter.");this._iv=r(c.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ctr.prototype.encrypt=function(c,u,a){var g=c.length();if(g===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&g>=this.blockSize)for(var f=0;f<this._ints;++f)u.putInt32(c.getInt32()^this._outBlock[f]);else{var A=(this.blockSize-g)%this.blockSize;A>0&&(A=this.blockSize-A),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(c.getInt32()^this._outBlock[f]);if(A>0&&(c.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),A>0&&!a)return u.putBytes(this._partialOutput.getBytes(A-this._partialBytes)),this._partialBytes=A,!0;u.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},e.ctr.prototype.decrypt=e.ctr.prototype.encrypt,e.gcm=function(c){c=c||{},this.name="GCM",this.cipher=c.cipher,this.blockSize=c.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0,this._R=3774873600},e.gcm.prototype.start=function(c){if(!("iv"in c))throw new Error("Invalid IV parameter.");var u=t.util.createBuffer(c.iv);this._cipherLength=0;var a;if("additionalData"in c?a=t.util.createBuffer(c.additionalData):a=t.util.createBuffer(),"tagLength"in c?this._tagLength=c.tagLength:this._tagLength=128,this._tag=null,c.decrypt&&(this._tag=t.util.createBuffer(c.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var g=u.length();if(g===12)this._j0=[u.getInt32(),u.getInt32(),u.getInt32(),1];else{for(this._j0=[0,0,0,0];u.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[u.getInt32(),u.getInt32(),u.getInt32(),u.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(o(g*8)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,a=t.util.createBuffer(a),this._aDataLength=o(a.length()*8);var f=a.length()%this.blockSize;for(f&&a.fillWithByte(0,this.blockSize-f),this._s=[0,0,0,0];a.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()])},e.gcm.prototype.encrypt=function(c,u,a){var g=c.length();if(g===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&g>=this.blockSize){for(var f=0;f<this._ints;++f)u.putInt32(this._outBlock[f]^=c.getInt32());this._cipherLength+=this.blockSize}else{var A=(this.blockSize-g)%this.blockSize;A>0&&(A=this.blockSize-A),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(c.getInt32()^this._outBlock[f]);if(A<=0||a){if(a){var E=g%this.blockSize;this._cipherLength+=E,this._partialOutput.truncate(this.blockSize-E)}else this._cipherLength+=this.blockSize;for(var f=0;f<this._ints;++f)this._outBlock[f]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),A>0&&!a)return c.read-=this.blockSize,u.putBytes(this._partialOutput.getBytes(A-this._partialBytes)),this._partialBytes=A,!0;u.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},e.gcm.prototype.decrypt=function(c,u,a){var g=c.length();if(g<this.blockSize&&!(a&&g>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=c.getInt32(),this._hashBlock[1]=c.getInt32(),this._hashBlock[2]=c.getInt32(),this._hashBlock[3]=c.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var f=0;f<this._ints;++f)u.putInt32(this._outBlock[f]^this._hashBlock[f]);g<this.blockSize?this._cipherLength+=g%this.blockSize:this._cipherLength+=this.blockSize},e.gcm.prototype.afterFinish=function(c,u){var a=!0;u.decrypt&&u.overflow&&c.truncate(this.blockSize-u.overflow),this.tag=t.util.createBuffer();var g=this._aDataLength.concat(o(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,g);var f=[];this.cipher.encrypt(this._j0,f);for(var A=0;A<this._ints;++A)this.tag.putInt32(this._s[A]^f[A]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),u.decrypt&&this.tag.bytes()!==this._tag&&(a=!1),a},e.gcm.prototype.multiply=function(c,u){for(var a=[0,0,0,0],g=u.slice(0),f=0;f<128;++f){var A=c[f/32|0]&1<<31-f%32;A&&(a[0]^=g[0],a[1]^=g[1],a[2]^=g[2],a[3]^=g[3]),this.pow(g,g)}return a},e.gcm.prototype.pow=function(c,u){for(var a=c[3]&1,g=3;g>0;--g)u[g]=c[g]>>>1|(c[g-1]&1)<<31;u[0]=c[0]>>>1,a&&(u[0]^=this._R)},e.gcm.prototype.tableMultiply=function(c){for(var u=[0,0,0,0],a=0;a<32;++a){var g=a/8|0,f=c[g]>>>(7-a%8)*4&15,A=this._m[a][f];u[0]^=A[0],u[1]^=A[1],u[2]^=A[2],u[3]^=A[3]}return u},e.gcm.prototype.ghash=function(c,u,a){return u[0]^=a[0],u[1]^=a[1],u[2]^=a[2],u[3]^=a[3],this.tableMultiply(u)},e.gcm.prototype.generateHashTable=function(c,u){for(var a=8/u,g=4*a,f=16*a,A=new Array(f),E=0;E<f;++E){var p=[0,0,0,0],s=E/g|0,m=(g-1-E%g)*u;p[s]=1<<u-1<<m,A[E]=this.generateSubHashTable(this.multiply(p,c),u)}return A},e.gcm.prototype.generateSubHashTable=function(c,u){var a=1<<u,g=a>>>1,f=new Array(a);f[g]=c.slice(0);for(var A=g>>>1;A>0;)this.pow(f[2*A],f[A]=[]),A>>=1;for(A=2;A<g;){for(var E=1;E<A;++E){var p=f[A],s=f[E];f[A+E]=[p[0]^s[0],p[1]^s[1],p[2]^s[2],p[3]^s[3]]}A*=2}for(f[0]=[0,0,0,0],A=g+1;A<a;++A){var m=f[A^g];f[A]=[c[0]^m[0],c[1]^m[1],c[2]^m[2],c[3]^m[3]]}return f};function r(c,u){if(typeof c=="string"&&(c=t.util.createBuffer(c)),t.util.isArray(c)&&c.length>4){var a=c;c=t.util.createBuffer();for(var g=0;g<a.length;++g)c.putByte(a[g])}if(c.length()<u)throw new Error("Invalid IV length; got "+c.length()+" bytes and expected "+u+" bytes.");if(!t.util.isArray(c)){for(var f=[],A=u/4,g=0;g<A;++g)f.push(c.getInt32());c=f}return c}function n(c){c[c.length-1]=c[c.length-1]+1&4294967295}function o(c){return[c/4294967296|0,c&4294967295]}return Ma.exports}var qa,fo;function sr(){if(fo)return qa;fo=1;var t=me();ps(),Au(),Ae(),qa=t.aes=t.aes||{},t.aes.startEncrypting=function(s,m,y,S){var i=p({key:s,output:y,decrypt:!1,mode:S});return i.start(m),i},t.aes.createEncryptionCipher=function(s,m){return p({key:s,output:null,decrypt:!1,mode:m})},t.aes.startDecrypting=function(s,m,y,S){var i=p({key:s,output:y,decrypt:!0,mode:S});return i.start(m),i},t.aes.createDecryptionCipher=function(s,m){return p({key:s,output:null,decrypt:!0,mode:m})},t.aes.Algorithm=function(s,m){r||f();var y=this;y.name=s,y.mode=new m({blockSize:16,cipher:{encrypt:function(S,i){return E(y._w,S,i,!1)},decrypt:function(S,i){return E(y._w,S,i,!0)}}}),y._init=!1},t.aes.Algorithm.prototype.initialize=function(s){if(!this._init){var m=s.key,y;if(typeof m=="string"&&(m.length===16||m.length===24||m.length===32))m=t.util.createBuffer(m);else if(t.util.isArray(m)&&(m.length===16||m.length===24||m.length===32)){y=m,m=t.util.createBuffer();for(var S=0;S<y.length;++S)m.putByte(y[S])}if(!t.util.isArray(m)){y=m,m=[];var i=y.length();if(i===16||i===24||i===32){i=i>>>2;for(var S=0;S<i;++S)m.push(y.getInt32())}}if(!t.util.isArray(m)||!(m.length===4||m.length===6||m.length===8))throw new Error("Invalid key parameter.");var v=this.mode.name,C=["CFB","OFB","CTR","GCM"].indexOf(v)!==-1;this._w=A(m,s.decrypt&&!C),this._init=!0}},t.aes._expandKey=function(s,m){return r||f(),A(s,m)},t.aes._updateBlock=E,e("AES-ECB",t.cipher.modes.ecb),e("AES-CBC",t.cipher.modes.cbc),e("AES-CFB",t.cipher.modes.cfb),e("AES-OFB",t.cipher.modes.ofb),e("AES-CTR",t.cipher.modes.ctr),e("AES-GCM",t.cipher.modes.gcm);function e(s,m){var y=function(){return new t.aes.Algorithm(s,m)};t.cipher.registerAlgorithm(s,y)}var r=!1,n=4,o,c,u,a,g;function f(){r=!0,u=[0,1,2,4,8,16,32,64,128,27,54];for(var s=new Array(256),m=0;m<128;++m)s[m]=m<<1,s[m+128]=m+128<<1^283;o=new Array(256),c=new Array(256),a=new Array(4),g=new Array(4);for(var m=0;m<4;++m)a[m]=new Array(256),g[m]=new Array(256);for(var y=0,S=0,i,v,C,I,B,T,h,m=0;m<256;++m){I=S^S<<1^S<<2^S<<3^S<<4,I=I>>8^I&255^99,o[y]=I,c[I]=y,B=s[I],i=s[y],v=s[i],C=s[v],T=B<<24^I<<16^I<<8^(I^B),h=(i^v^C)<<24^(y^C)<<16^(y^v^C)<<8^(y^i^C);for(var l=0;l<4;++l)a[l][y]=T,g[l][I]=h,T=T<<24|T>>>8,h=h<<24|h>>>8;y===0?y=S=1:(y=i^s[s[s[i^C]]],S^=s[s[S]])}}function A(s,m){for(var y=s.slice(0),S,i=1,v=y.length,C=v+6+1,I=n*C,B=v;B<I;++B)S=y[B-1],B%v===0?(S=o[S>>>16&255]<<24^o[S>>>8&255]<<16^o[S&255]<<8^o[S>>>24]^u[i]<<24,i++):v>6&&B%v===4&&(S=o[S>>>24]<<24^o[S>>>16&255]<<16^o[S>>>8&255]<<8^o[S&255]),y[B]=y[B-v]^S;if(m){var T,h=g[0],l=g[1],R=g[2],N=g[3],F=y.slice(0);I=y.length;for(var B=0,D=I-n;B<I;B+=n,D-=n)if(B===0||B===I-n)F[B]=y[D],F[B+1]=y[D+3],F[B+2]=y[D+2],F[B+3]=y[D+1];else for(var q=0;q<n;++q)T=y[D+q],F[B+(3&-q)]=h[o[T>>>24]]^l[o[T>>>16&255]]^R[o[T>>>8&255]]^N[o[T&255]];y=F}return y}function E(s,m,y,S){var i=s.length/4-1,v,C,I,B,T;S?(v=g[0],C=g[1],I=g[2],B=g[3],T=c):(v=a[0],C=a[1],I=a[2],B=a[3],T=o);var h,l,R,N,F,D,q;h=m[0]^s[0],l=m[S?3:1]^s[1],R=m[2]^s[2],N=m[S?1:3]^s[3];for(var j=3,H=1;H<i;++H)F=v[h>>>24]^C[l>>>16&255]^I[R>>>8&255]^B[N&255]^s[++j],D=v[l>>>24]^C[R>>>16&255]^I[N>>>8&255]^B[h&255]^s[++j],q=v[R>>>24]^C[N>>>16&255]^I[h>>>8&255]^B[l&255]^s[++j],N=v[N>>>24]^C[h>>>16&255]^I[l>>>8&255]^B[R&255]^s[++j],h=F,l=D,R=q;y[0]=T[h>>>24]<<24^T[l>>>16&255]<<16^T[R>>>8&255]<<8^T[N&255]^s[++j],y[S?3:1]=T[l>>>24]<<24^T[R>>>16&255]<<16^T[N>>>8&255]<<8^T[h&255]^s[++j],y[2]=T[R>>>24]<<24^T[N>>>16&255]<<16^T[h>>>8&255]<<8^T[l&255]^s[++j],y[S?1:3]=T[N>>>24]<<24^T[h>>>16&255]<<16^T[l>>>8&255]<<8^T[R&255]^s[++j]}function p(s){s=s||{};var m=(s.mode||"CBC").toUpperCase(),y="AES-"+m,S;s.decrypt?S=t.cipher.createDecipher(y,s.key):S=t.cipher.createCipher(y,s.key);var i=S.start;return S.start=function(v,C){var I=null;C instanceof t.util.ByteBuffer&&(I=C,C={}),C=C||{},C.output=I,C.iv=v,i.call(S,C)},S}return qa}var Va={exports:{}},Ka={exports:{}},$a={exports:{}},ho;function or(){if(ho)return $a.exports;ho=1;var t=me();t.pki=t.pki||{};var e=$a.exports=t.pki.oids=t.oids=t.oids||{};function r(o,c){e[o]=c,e[c]=o}function n(o,c){e[o]=c}return r("1.2.840.113549.1.1.1","rsaEncryption"),r("1.2.840.113549.1.1.4","md5WithRSAEncryption"),r("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),r("1.2.840.113549.1.1.7","RSAES-OAEP"),r("1.2.840.113549.1.1.8","mgf1"),r("1.2.840.113549.1.1.9","pSpecified"),r("1.2.840.113549.1.1.10","RSASSA-PSS"),r("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),r("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),r("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),r("1.3.101.112","EdDSA25519"),r("1.2.840.10040.4.3","dsa-with-sha1"),r("1.3.14.3.2.7","desCBC"),r("1.3.14.3.2.26","sha1"),r("1.3.14.3.2.29","sha1WithRSASignature"),r("2.16.840.1.101.3.4.2.1","sha256"),r("2.16.840.1.101.3.4.2.2","sha384"),r("2.16.840.1.101.3.4.2.3","sha512"),r("2.16.840.1.101.3.4.2.4","sha224"),r("2.16.840.1.101.3.4.2.5","sha512-224"),r("2.16.840.1.101.3.4.2.6","sha512-256"),r("1.2.840.113549.2.2","md2"),r("1.2.840.113549.2.5","md5"),r("1.2.840.113549.1.7.1","data"),r("1.2.840.113549.1.7.2","signedData"),r("1.2.840.113549.1.7.3","envelopedData"),r("1.2.840.113549.1.7.4","signedAndEnvelopedData"),r("1.2.840.113549.1.7.5","digestedData"),r("1.2.840.113549.1.7.6","encryptedData"),r("1.2.840.113549.1.9.1","emailAddress"),r("1.2.840.113549.1.9.2","unstructuredName"),r("1.2.840.113549.1.9.3","contentType"),r("1.2.840.113549.1.9.4","messageDigest"),r("1.2.840.113549.1.9.5","signingTime"),r("1.2.840.113549.1.9.6","counterSignature"),r("1.2.840.113549.1.9.7","challengePassword"),r("1.2.840.113549.1.9.8","unstructuredAddress"),r("1.2.840.113549.1.9.14","extensionRequest"),r("1.2.840.113549.1.9.20","friendlyName"),r("1.2.840.113549.1.9.21","localKeyId"),r("1.2.840.113549.1.9.22.1","x509Certificate"),r("1.2.840.113549.1.12.10.1.1","keyBag"),r("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),r("1.2.840.113549.1.12.10.1.3","certBag"),r("1.2.840.113549.1.12.10.1.4","crlBag"),r("1.2.840.113549.1.12.10.1.5","secretBag"),r("1.2.840.113549.1.12.10.1.6","safeContentsBag"),r("1.2.840.113549.1.5.13","pkcs5PBES2"),r("1.2.840.113549.1.5.12","pkcs5PBKDF2"),r("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),r("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),r("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),r("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),r("1.2.840.113549.2.7","hmacWithSHA1"),r("1.2.840.113549.2.8","hmacWithSHA224"),r("1.2.840.113549.2.9","hmacWithSHA256"),r("1.2.840.113549.2.10","hmacWithSHA384"),r("1.2.840.113549.2.11","hmacWithSHA512"),r("1.2.840.113549.3.7","des-EDE3-CBC"),r("2.16.840.1.101.3.4.1.2","aes128-CBC"),r("2.16.840.1.101.3.4.1.22","aes192-CBC"),r("2.16.840.1.101.3.4.1.42","aes256-CBC"),r("2.5.4.3","commonName"),r("2.5.4.4","surname"),r("2.5.4.5","serialNumber"),r("2.5.4.6","countryName"),r("2.5.4.7","localityName"),r("2.5.4.8","stateOrProvinceName"),r("2.5.4.9","streetAddress"),r("2.5.4.10","organizationName"),r("2.5.4.11","organizationalUnitName"),r("2.5.4.12","title"),r("2.5.4.13","description"),r("2.5.4.15","businessCategory"),r("2.5.4.17","postalCode"),r("2.5.4.42","givenName"),r("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),r("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),r("2.16.840.1.113730.1.1","nsCertType"),r("2.16.840.1.113730.1.13","nsComment"),n("2.5.29.1","authorityKeyIdentifier"),n("2.5.29.2","keyAttributes"),n("2.5.29.3","certificatePolicies"),n("2.5.29.4","keyUsageRestriction"),n("2.5.29.5","policyMapping"),n("2.5.29.6","subtreesConstraint"),n("2.5.29.7","subjectAltName"),n("2.5.29.8","issuerAltName"),n("2.5.29.9","subjectDirectoryAttributes"),n("2.5.29.10","basicConstraints"),n("2.5.29.11","nameConstraints"),n("2.5.29.12","policyConstraints"),n("2.5.29.13","basicConstraints"),r("2.5.29.14","subjectKeyIdentifier"),r("2.5.29.15","keyUsage"),n("2.5.29.16","privateKeyUsagePeriod"),r("2.5.29.17","subjectAltName"),r("2.5.29.18","issuerAltName"),r("2.5.29.19","basicConstraints"),n("2.5.29.20","cRLNumber"),n("2.5.29.21","cRLReason"),n("2.5.29.22","expirationDate"),n("2.5.29.23","instructionCode"),n("2.5.29.24","invalidityDate"),n("2.5.29.25","cRLDistributionPoints"),n("2.5.29.26","issuingDistributionPoint"),n("2.5.29.27","deltaCRLIndicator"),n("2.5.29.28","issuingDistributionPoint"),n("2.5.29.29","certificateIssuer"),n("2.5.29.30","nameConstraints"),r("2.5.29.31","cRLDistributionPoints"),r("2.5.29.32","certificatePolicies"),n("2.5.29.33","policyMappings"),n("2.5.29.34","policyConstraints"),r("2.5.29.35","authorityKeyIdentifier"),n("2.5.29.36","policyConstraints"),r("2.5.29.37","extKeyUsage"),n("2.5.29.46","freshestCRL"),n("2.5.29.54","inhibitAnyPolicy"),r("1.3.6.1.4.1.11129.2.4.2","timestampList"),r("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),r("1.3.6.1.5.5.7.3.1","serverAuth"),r("1.3.6.1.5.5.7.3.2","clientAuth"),r("1.3.6.1.5.5.7.3.3","codeSigning"),r("1.3.6.1.5.5.7.3.4","emailProtection"),r("1.3.6.1.5.5.7.3.8","timeStamping"),$a.exports}var po;function Tt(){if(po)return Ka.exports;po=1;var t=me();Ae(),or();var e=Ka.exports=t.asn1=t.asn1||{};e.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},e.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},e.create=function(u,a,g,f,A){if(t.util.isArray(f)){for(var E=[],p=0;p<f.length;++p)f[p]!==void 0&&E.push(f[p]);f=E}var s={tagClass:u,type:a,constructed:g,composed:g||t.util.isArray(f),value:f};return A&&"bitStringContents"in A&&(s.bitStringContents=A.bitStringContents,s.original=e.copy(s)),s},e.copy=function(u,a){var g;if(t.util.isArray(u)){g=[];for(var f=0;f<u.length;++f)g.push(e.copy(u[f],a));return g}return typeof u=="string"?u:(g={tagClass:u.tagClass,type:u.type,constructed:u.constructed,composed:u.composed,value:e.copy(u.value,a)},a&&!a.excludeBitStringContents&&(g.bitStringContents=u.bitStringContents),g)},e.equals=function(u,a,g){if(t.util.isArray(u)){if(!t.util.isArray(a)||u.length!==a.length)return!1;for(var f=0;f<u.length;++f)if(!e.equals(u[f],a[f]))return!1;return!0}if(typeof u!=typeof a)return!1;if(typeof u=="string")return u===a;var A=u.tagClass===a.tagClass&&u.type===a.type&&u.constructed===a.constructed&&u.composed===a.composed&&e.equals(u.value,a.value);return g&&g.includeBitStringContents&&(A=A&&u.bitStringContents===a.bitStringContents),A},e.getBerValueLength=function(u){var a=u.getByte();if(a!==128){var g,f=a&128;return f?g=u.getInt((a&127)<<3):g=a,g}};function r(u,a,g){if(g>a){var f=new Error("Too few bytes to parse DER.");throw f.available=u.length(),f.remaining=a,f.requested=g,f}}var n=function(u,a){var g=u.getByte();if(a--,g!==128){var f,A=g&128;if(!A)f=g;else{var E=g&127;r(u,a,E),f=u.getInt(E<<3)}if(f<0)throw new Error("Negative length: "+f);return f}};e.fromDer=function(u,a){a===void 0&&(a={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof a=="boolean"&&(a={strict:a,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in a||(a.strict=!0),"parseAllBytes"in a||(a.parseAllBytes=!0),"decodeBitStrings"in a||(a.decodeBitStrings=!0),typeof u=="string"&&(u=t.util.createBuffer(u));var g=u.length(),f=o(u,u.length(),0,a);if(a.parseAllBytes&&u.length()!==0){var A=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw A.byteCount=g,A.remaining=u.length(),A}return f};function o(u,a,g,f){var A;r(u,a,2);var E=u.getByte();a--;var p=E&192,s=E&31;A=u.length();var m=n(u,a);if(a-=A-u.length(),m!==void 0&&m>a){if(f.strict){var y=new Error("Too few bytes to read ASN.1 value.");throw y.available=u.length(),y.remaining=a,y.requested=m,y}m=a}var S,i,v=(E&32)===32;if(v)if(S=[],m===void 0)for(;;){if(r(u,a,2),u.bytes(2)===String.fromCharCode(0,0)){u.getBytes(2),a-=2;break}A=u.length(),S.push(o(u,a,g+1,f)),a-=A-u.length()}else for(;m>0;)A=u.length(),S.push(o(u,m,g+1,f)),a-=A-u.length(),m-=A-u.length();if(S===void 0&&p===e.Class.UNIVERSAL&&s===e.Type.BITSTRING&&(i=u.bytes(m)),S===void 0&&f.decodeBitStrings&&p===e.Class.UNIVERSAL&&s===e.Type.BITSTRING&&m>1){var C=u.read,I=a,B=0;if(s===e.Type.BITSTRING&&(r(u,a,1),B=u.getByte(),a--),B===0)try{A=u.length();var T={strict:!0,decodeBitStrings:!0},h=o(u,a,g+1,T),l=A-u.length();a-=l,s==e.Type.BITSTRING&&l++;var R=h.tagClass;l===m&&(R===e.Class.UNIVERSAL||R===e.Class.CONTEXT_SPECIFIC)&&(S=[h])}catch{}S===void 0&&(u.read=C,a=I)}if(S===void 0){if(m===void 0){if(f.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");m=a}if(s===e.Type.BMPSTRING)for(S="";m>0;m-=2)r(u,a,2),S+=String.fromCharCode(u.getInt16()),a-=2;else S=u.getBytes(m),a-=m}var N=i===void 0?null:{bitStringContents:i};return e.create(p,s,v,S,N)}e.toDer=function(u){var a=t.util.createBuffer(),g=u.tagClass|u.type,f=t.util.createBuffer(),A=!1;if("bitStringContents"in u&&(A=!0,u.original&&(A=e.equals(u,u.original))),A)f.putBytes(u.bitStringContents);else if(u.composed){u.constructed?g|=32:f.putByte(0);for(var E=0;E<u.value.length;++E)u.value[E]!==void 0&&f.putBuffer(e.toDer(u.value[E]))}else if(u.type===e.Type.BMPSTRING)for(var E=0;E<u.value.length;++E)f.putInt16(u.value.charCodeAt(E));else u.type===e.Type.INTEGER&&u.value.length>1&&(u.value.charCodeAt(0)===0&&!(u.value.charCodeAt(1)&128)||u.value.charCodeAt(0)===255&&(u.value.charCodeAt(1)&128)===128)?f.putBytes(u.value.substr(1)):f.putBytes(u.value);if(a.putByte(g),f.length()<=127)a.putByte(f.length()&127);else{var p=f.length(),s="";do s+=String.fromCharCode(p&255),p=p>>>8;while(p>0);a.putByte(s.length|128);for(var E=s.length-1;E>=0;--E)a.putByte(s.charCodeAt(E))}return a.putBuffer(f),a},e.oidToDer=function(u){var a=u.split("."),g=t.util.createBuffer();g.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var f,A,E,p,s=2;s<a.length;++s){f=!0,A=[],E=parseInt(a[s],10);do p=E&127,E=E>>>7,f||(p|=128),A.push(p),f=!1;while(E>0);for(var m=A.length-1;m>=0;--m)g.putByte(A[m])}return g},e.derToOid=function(u){var a;typeof u=="string"&&(u=t.util.createBuffer(u));var g=u.getByte();a=Math.floor(g/40)+"."+g%40;for(var f=0;u.length()>0;)g=u.getByte(),f=f<<7,g&128?f+=g&127:(a+="."+(f+g),f=0);return a},e.utcTimeToDate=function(u){var a=new Date,g=parseInt(u.substr(0,2),10);g=g>=50?1900+g:2e3+g;var f=parseInt(u.substr(2,2),10)-1,A=parseInt(u.substr(4,2),10),E=parseInt(u.substr(6,2),10),p=parseInt(u.substr(8,2),10),s=0;if(u.length>11){var m=u.charAt(10),y=10;m!=="+"&&m!=="-"&&(s=parseInt(u.substr(10,2),10),y+=2)}if(a.setUTCFullYear(g,f,A),a.setUTCHours(E,p,s,0),y&&(m=u.charAt(y),m==="+"||m==="-")){var S=parseInt(u.substr(y+1,2),10),i=parseInt(u.substr(y+4,2),10),v=S*60+i;v*=6e4,m==="+"?a.setTime(+a-v):a.setTime(+a+v)}return a},e.generalizedTimeToDate=function(u){var a=new Date,g=parseInt(u.substr(0,4),10),f=parseInt(u.substr(4,2),10)-1,A=parseInt(u.substr(6,2),10),E=parseInt(u.substr(8,2),10),p=parseInt(u.substr(10,2),10),s=parseInt(u.substr(12,2),10),m=0,y=0,S=!1;u.charAt(u.length-1)==="Z"&&(S=!0);var i=u.length-5,v=u.charAt(i);if(v==="+"||v==="-"){var C=parseInt(u.substr(i+1,2),10),I=parseInt(u.substr(i+4,2),10);y=C*60+I,y*=6e4,v==="+"&&(y*=-1),S=!0}return u.charAt(14)==="."&&(m=parseFloat(u.substr(14),10)*1e3),S?(a.setUTCFullYear(g,f,A),a.setUTCHours(E,p,s,m),a.setTime(+a+y)):(a.setFullYear(g,f,A),a.setHours(E,p,s,m)),a},e.dateToUtcTime=function(u){if(typeof u=="string")return u;var a="",g=[];g.push((""+u.getUTCFullYear()).substr(2)),g.push(""+(u.getUTCMonth()+1)),g.push(""+u.getUTCDate()),g.push(""+u.getUTCHours()),g.push(""+u.getUTCMinutes()),g.push(""+u.getUTCSeconds());for(var f=0;f<g.length;++f)g[f].length<2&&(a+="0"),a+=g[f];return a+="Z",a},e.dateToGeneralizedTime=function(u){if(typeof u=="string")return u;var a="",g=[];g.push(""+u.getUTCFullYear()),g.push(""+(u.getUTCMonth()+1)),g.push(""+u.getUTCDate()),g.push(""+u.getUTCHours()),g.push(""+u.getUTCMinutes()),g.push(""+u.getUTCSeconds());for(var f=0;f<g.length;++f)g[f].length<2&&(a+="0"),a+=g[f];return a+="Z",a},e.integerToDer=function(u){var a=t.util.createBuffer();if(u>=-128&&u<128)return a.putSignedInt(u,8);if(u>=-32768&&u<32768)return a.putSignedInt(u,16);if(u>=-8388608&&u<8388608)return a.putSignedInt(u,24);if(u>=-2147483648&&u<2147483648)return a.putSignedInt(u,32);var g=new Error("Integer too large; max is 32-bits.");throw g.integer=u,g},e.derToInteger=function(u){typeof u=="string"&&(u=t.util.createBuffer(u));var a=u.length()*8;if(a>32)throw new Error("Integer too large; max is 32-bits.");return u.getSignedInt(a)},e.validate=function(u,a,g,f){var A=!1;if((u.tagClass===a.tagClass||typeof a.tagClass>"u")&&(u.type===a.type||typeof a.type>"u"))if(u.constructed===a.constructed||typeof a.constructed>"u"){if(A=!0,a.value&&t.util.isArray(a.value))for(var E=0,p=0;A&&p<a.value.length;++p)A=a.value[p].optional||!1,u.value[E]&&(A=e.validate(u.value[E],a.value[p],g,f),A?++E:a.value[p].optional&&(A=!0)),!A&&f&&f.push("["+a.name+'] Tag class "'+a.tagClass+'", type "'+a.type+'" expected value length "'+a.value.length+'", got "'+u.value.length+'"');if(A&&g&&(a.capture&&(g[a.capture]=u.value),a.captureAsn1&&(g[a.captureAsn1]=u),a.captureBitStringContents&&"bitStringContents"in u&&(g[a.captureBitStringContents]=u.bitStringContents),a.captureBitStringValue&&"bitStringContents"in u))if(u.bitStringContents.length<2)g[a.captureBitStringValue]="";else{var s=u.bitStringContents.charCodeAt(0);if(s!==0)throw new Error("captureBitStringValue only supported for zero unused bits");g[a.captureBitStringValue]=u.bitStringContents.slice(1)}}else f&&f.push("["+a.name+'] Expected constructed "'+a.constructed+'", got "'+u.constructed+'"');else f&&(u.tagClass!==a.tagClass&&f.push("["+a.name+'] Expected tag class "'+a.tagClass+'", got "'+u.tagClass+'"'),u.type!==a.type&&f.push("["+a.name+'] Expected type "'+a.type+'", got "'+u.type+'"'));return A};var c=/[^\\u0000-\\u00ff]/;return e.prettyPrint=function(u,a,g){var f="";a=a||0,g=g||2,a>0&&(f+=`
`);for(var A="",E=0;E<a*g;++E)A+=" ";switch(f+=A+"Tag: ",u.tagClass){case e.Class.UNIVERSAL:f+="Universal:";break;case e.Class.APPLICATION:f+="Application:";break;case e.Class.CONTEXT_SPECIFIC:f+="Context-Specific:";break;case e.Class.PRIVATE:f+="Private:";break}if(u.tagClass===e.Class.UNIVERSAL)switch(f+=u.type,u.type){case e.Type.NONE:f+=" (None)";break;case e.Type.BOOLEAN:f+=" (Boolean)";break;case e.Type.INTEGER:f+=" (Integer)";break;case e.Type.BITSTRING:f+=" (Bit string)";break;case e.Type.OCTETSTRING:f+=" (Octet string)";break;case e.Type.NULL:f+=" (Null)";break;case e.Type.OID:f+=" (Object Identifier)";break;case e.Type.ODESC:f+=" (Object Descriptor)";break;case e.Type.EXTERNAL:f+=" (External or Instance of)";break;case e.Type.REAL:f+=" (Real)";break;case e.Type.ENUMERATED:f+=" (Enumerated)";break;case e.Type.EMBEDDED:f+=" (Embedded PDV)";break;case e.Type.UTF8:f+=" (UTF8)";break;case e.Type.ROID:f+=" (Relative Object Identifier)";break;case e.Type.SEQUENCE:f+=" (Sequence)";break;case e.Type.SET:f+=" (Set)";break;case e.Type.PRINTABLESTRING:f+=" (Printable String)";break;case e.Type.IA5String:f+=" (IA5String (ASCII))";break;case e.Type.UTCTIME:f+=" (UTC time)";break;case e.Type.GENERALIZEDTIME:f+=" (Generalized time)";break;case e.Type.BMPSTRING:f+=" (BMP String)";break}else f+=u.type;if(f+=`
`,f+=A+"Constructed: "+u.constructed+`
`,u.composed){for(var p=0,s="",E=0;E<u.value.length;++E)u.value[E]!==void 0&&(p+=1,s+=e.prettyPrint(u.value[E],a+1,g),E+1<u.value.length&&(s+=","));f+=A+"Sub values: "+p+s}else{if(f+=A+"Value: ",u.type===e.Type.OID){var m=e.derToOid(u.value);f+=m,t.pki&&t.pki.oids&&m in t.pki.oids&&(f+=" ("+t.pki.oids[m]+") ")}if(u.type===e.Type.INTEGER)try{f+=e.derToInteger(u.value)}catch{f+="0x"+t.util.bytesToHex(u.value)}else if(u.type===e.Type.BITSTRING){if(u.value.length>1?f+="0x"+t.util.bytesToHex(u.value.slice(1)):f+="(none)",u.value.length>0){var y=u.value.charCodeAt(0);y==1?f+=" (1 unused bit shown)":y>1&&(f+=" ("+y+" unused bits shown)")}}else if(u.type===e.Type.OCTETSTRING)c.test(u.value)||(f+="("+u.value+") "),f+="0x"+t.util.bytesToHex(u.value);else if(u.type===e.Type.UTF8)try{f+=t.util.decodeUtf8(u.value)}catch(S){if(S.message==="URI malformed")f+="0x"+t.util.bytesToHex(u.value)+" (malformed UTF8)";else throw S}else u.type===e.Type.PRINTABLESTRING||u.type===e.Type.IA5String?f+=u.value:c.test(u.value)?f+="0x"+t.util.bytesToHex(u.value):u.value.length===0?f+="[null]":f+=u.value}return f},Ka.exports}var Ga={exports:{}},ja,yo;function Ut(){if(yo)return ja;yo=1;var t=me();return ja=t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},ja}var go;function an(){if(go)return Ga.exports;go=1;var t=me();Ut(),Ae();var e=Ga.exports=t.hmac=t.hmac||{};return e.create=function(){var r=null,n=null,o=null,c=null,u={};return u.start=function(a,g){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in t.md.algorithms)n=t.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else n=a;if(g===null)g=r;else{if(typeof g=="string")g=t.util.createBuffer(g);else if(t.util.isArray(g)){var f=g;g=t.util.createBuffer();for(var A=0;A<f.length;++A)g.putByte(f[A])}var E=g.length();E>n.blockLength&&(n.start(),n.update(g.bytes()),g=n.digest()),o=t.util.createBuffer(),c=t.util.createBuffer(),E=g.length();for(var A=0;A<E;++A){var f=g.at(A);o.putByte(54^f),c.putByte(92^f)}if(E<n.blockLength)for(var f=n.blockLength-E,A=0;A<f;++A)o.putByte(54),c.putByte(92);r=g,o=o.bytes(),c=c.bytes()}n.start(),n.update(o)},u.update=function(a){n.update(a)},u.getMac=function(){var a=n.digest().bytes();return n.start(),n.update(c),n.update(a),n.digest()},u.digest=u.getMac,u},Ga.exports}var Ha={exports:{}},vo;function ys(){if(vo)return Ha.exports;vo=1;var t=me();Ut(),Ae();var e=Ha.exports=t.md5=t.md5||{};t.md.md5=t.md.algorithms.md5=e,e.create=function(){u||a();var f=null,A=t.util.createBuffer(),E=new Array(16),p={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return p.start=function(){p.messageLength=0,p.fullMessageLength=p.messageLength64=[];for(var s=p.messageLengthSize/4,m=0;m<s;++m)p.fullMessageLength.push(0);return A=t.util.createBuffer(),f={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},p},p.start(),p.update=function(s,m){m==="utf8"&&(s=t.util.encodeUtf8(s));var y=s.length;p.messageLength+=y,y=[y/4294967296>>>0,y>>>0];for(var S=p.fullMessageLength.length-1;S>=0;--S)p.fullMessageLength[S]+=y[1],y[1]=y[0]+(p.fullMessageLength[S]/4294967296>>>0),p.fullMessageLength[S]=p.fullMessageLength[S]>>>0,y[0]=y[1]/4294967296>>>0;return A.putBytes(s),g(f,E,A),(A.read>2048||A.length()===0)&&A.compact(),p},p.digest=function(){var s=t.util.createBuffer();s.putBytes(A.bytes());var m=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize,y=m&p.blockLength-1;s.putBytes(r.substr(0,p.blockLength-y));for(var S,i=0,v=p.fullMessageLength.length-1;v>=0;--v)S=p.fullMessageLength[v]*8+i,i=S/4294967296>>>0,s.putInt32Le(S>>>0);var C={h0:f.h0,h1:f.h1,h2:f.h2,h3:f.h3};g(C,E,s);var I=t.util.createBuffer();return I.putInt32Le(C.h0),I.putInt32Le(C.h1),I.putInt32Le(C.h2),I.putInt32Le(C.h3),I},p};var r=null,n=null,o=null,c=null,u=!1;function a(){r=String.fromCharCode(128),r+=t.util.fillString(String.fromCharCode(0),64),n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],o=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],c=new Array(64);for(var f=0;f<64;++f)c[f]=Math.floor(Math.abs(Math.sin(f+1))*4294967296);u=!0}function g(f,A,E){for(var p,s,m,y,S,i,v,C,I=E.length();I>=64;){for(s=f.h0,m=f.h1,y=f.h2,S=f.h3,C=0;C<16;++C)A[C]=E.getInt32Le(),i=S^m&(y^S),p=s+i+c[C]+A[C],v=o[C],s=S,S=y,y=m,m+=p<<v|p>>>32-v;for(;C<32;++C)i=y^S&(m^y),p=s+i+c[C]+A[n[C]],v=o[C],s=S,S=y,y=m,m+=p<<v|p>>>32-v;for(;C<48;++C)i=m^y^S,p=s+i+c[C]+A[n[C]],v=o[C],s=S,S=y,y=m,m+=p<<v|p>>>32-v;for(;C<64;++C)i=y^(m|~S),p=s+i+c[C]+A[n[C]],v=o[C],s=S,S=y,y=m,m+=p<<v|p>>>32-v;f.h0=f.h0+s|0,f.h1=f.h1+m|0,f.h2=f.h2+y|0,f.h3=f.h3+S|0,I-=64}}return Ha.exports}var za={exports:{}},mo;function Rr(){if(mo)return za.exports;mo=1;var t=me();Ae();var e=za.exports=t.pem=t.pem||{};e.encode=function(o,c){c=c||{};var u="-----BEGIN "+o.type+`-----\r
`,a;if(o.procType&&(a={name:"Proc-Type",values:[String(o.procType.version),o.procType.type]},u+=r(a)),o.contentDomain&&(a={name:"Content-Domain",values:[o.contentDomain]},u+=r(a)),o.dekInfo&&(a={name:"DEK-Info",values:[o.dekInfo.algorithm]},o.dekInfo.parameters&&a.values.push(o.dekInfo.parameters),u+=r(a)),o.headers)for(var g=0;g<o.headers.length;++g)u+=r(o.headers[g]);return o.procType&&(u+=`\r
`),u+=t.util.encode64(o.body,c.maxline||64)+`\r
`,u+="-----END "+o.type+`-----\r
`,u},e.decode=function(o){for(var c=[],u=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,g=/\r?\n/,f;f=u.exec(o),!!f;){var A=f[1];A==="NEW CERTIFICATE REQUEST"&&(A="CERTIFICATE REQUEST");var E={type:A,procType:null,contentDomain:null,dekInfo:null,headers:[],body:t.util.decode64(f[3])};if(c.push(E),!!f[2]){for(var p=f[2].split(g),s=0;f&&s<p.length;){for(var m=p[s].replace(/\s+$/,""),y=s+1;y<p.length;++y){var S=p[y];if(!/\s/.test(S[0]))break;m+=S,s=y}if(f=m.match(a),f){for(var i={name:f[1],values:[]},v=f[2].split(","),C=0;C<v.length;++C)i.values.push(n(v[C]));if(E.procType)if(!E.contentDomain&&i.name==="Content-Domain")E.contentDomain=v[0]||"";else if(!E.dekInfo&&i.name==="DEK-Info"){if(i.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');E.dekInfo={algorithm:v[0],parameters:v[1]||null}}else E.headers.push(i);else{if(i.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(i.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');E.procType={version:v[0],type:v[1]}}}++s}if(E.procType==="ENCRYPTED"&&!E.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(c.length===0)throw new Error("Invalid PEM formatted message.");return c};function r(o){for(var c=o.name+": ",u=[],a=function(p,s){return" "+s},g=0;g<o.values.length;++g)u.push(o.values[g].replace(/^(\S+\r\n)/,a));c+=u.join(",")+`\r
`;for(var f=0,A=-1,g=0;g<c.length;++g,++f)if(f>65&&A!==-1){var E=c[A];E===","?(++A,c=c.substr(0,A)+`\r
 `+c.substr(A)):c=c.substr(0,A)+`\r
`+E+c.substr(A+1),f=g-A-1,A=-1,++g}else(c[g]===" "||c[g]==="	"||c[g]===",")&&(A=g);return c}function n(o){return o.replace(/^\s+/,"")}return za.exports}var Wa={exports:{}},Qa,Eo;function oa(){if(Eo)return Qa;Eo=1;var t=me();ps(),Au(),Ae(),Qa=t.des=t.des||{},t.des.startEncrypting=function(s,m,y,S){var i=p({key:s,output:y,decrypt:!1,mode:S||(m===null?"ECB":"CBC")});return i.start(m),i},t.des.createEncryptionCipher=function(s,m){return p({key:s,output:null,decrypt:!1,mode:m})},t.des.startDecrypting=function(s,m,y,S){var i=p({key:s,output:y,decrypt:!0,mode:S||(m===null?"ECB":"CBC")});return i.start(m),i},t.des.createDecryptionCipher=function(s,m){return p({key:s,output:null,decrypt:!0,mode:m})},t.des.Algorithm=function(s,m){var y=this;y.name=s,y.mode=new m({blockSize:8,cipher:{encrypt:function(S,i){return E(y._keys,S,i,!1)},decrypt:function(S,i){return E(y._keys,S,i,!0)}}}),y._init=!1},t.des.Algorithm.prototype.initialize=function(s){if(!this._init){var m=t.util.createBuffer(s.key);if(this.name.indexOf("3DES")===0&&m.length()!==24)throw new Error("Invalid Triple-DES key size: "+m.length()*8);this._keys=A(m),this._init=!0}},e("DES-ECB",t.cipher.modes.ecb),e("DES-CBC",t.cipher.modes.cbc),e("DES-CFB",t.cipher.modes.cfb),e("DES-OFB",t.cipher.modes.ofb),e("DES-CTR",t.cipher.modes.ctr),e("3DES-ECB",t.cipher.modes.ecb),e("3DES-CBC",t.cipher.modes.cbc),e("3DES-CFB",t.cipher.modes.cfb),e("3DES-OFB",t.cipher.modes.ofb),e("3DES-CTR",t.cipher.modes.ctr);function e(s,m){var y=function(){return new t.des.Algorithm(s,m)};t.cipher.registerAlgorithm(s,y)}var r=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],n=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],o=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],a=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],g=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function A(s){for(var m=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],y=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],S=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],v=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],C=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],I=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],B=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],T=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],R=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],N=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],F=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],D=s.length()>8?3:1,q=[],j=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],H=0,Q,J=0;J<D;J++){var X=s.getInt32(),re=s.getInt32();Q=(X>>>4^re)&252645135,re^=Q,X^=Q<<4,Q=(re>>>-16^X)&65535,X^=Q,re^=Q<<-16,Q=(X>>>2^re)&858993459,re^=Q,X^=Q<<2,Q=(re>>>-16^X)&65535,X^=Q,re^=Q<<-16,Q=(X>>>1^re)&1431655765,re^=Q,X^=Q<<1,Q=(re>>>8^X)&16711935,X^=Q,re^=Q<<8,Q=(X>>>1^re)&1431655765,re^=Q,X^=Q<<1,Q=X<<8|re>>>20&240,X=re<<24|re<<8&16711680|re>>>8&65280|re>>>24&240,re=Q;for(var se=0;se<j.length;++se){j[se]?(X=X<<2|X>>>26,re=re<<2|re>>>26):(X=X<<1|X>>>27,re=re<<1|re>>>27),X&=-15,re&=-15;var de=m[X>>>28]|y[X>>>24&15]|S[X>>>20&15]|i[X>>>16&15]|v[X>>>12&15]|C[X>>>8&15]|I[X>>>4&15],ye=B[re>>>28]|T[re>>>24&15]|h[re>>>20&15]|l[re>>>16&15]|R[re>>>12&15]|N[re>>>8&15]|F[re>>>4&15];Q=(ye>>>16^de)&65535,q[H++]=de^Q,q[H++]=ye^Q<<16}}return q}function E(s,m,y,S){var i=s.length===32?3:9,v;i===3?v=S?[30,-2,-2]:[0,32,2]:v=S?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var C,I=m[0],B=m[1];C=(I>>>4^B)&252645135,B^=C,I^=C<<4,C=(I>>>16^B)&65535,B^=C,I^=C<<16,C=(B>>>2^I)&858993459,I^=C,B^=C<<2,C=(B>>>8^I)&16711935,I^=C,B^=C<<8,C=(I>>>1^B)&1431655765,B^=C,I^=C<<1,I=I<<1|I>>>31,B=B<<1|B>>>31;for(var T=0;T<i;T+=3){for(var h=v[T+1],l=v[T+2],R=v[T];R!=h;R+=l){var N=B^s[R],F=(B>>>4|B<<28)^s[R+1];C=I,I=B,B=C^(n[N>>>24&63]|c[N>>>16&63]|a[N>>>8&63]|f[N&63]|r[F>>>24&63]|o[F>>>16&63]|u[F>>>8&63]|g[F&63])}C=I,I=B,B=C}I=I>>>1|I<<31,B=B>>>1|B<<31,C=(I>>>1^B)&1431655765,B^=C,I^=C<<1,C=(B>>>8^I)&16711935,I^=C,B^=C<<8,C=(B>>>2^I)&858993459,I^=C,B^=C<<2,C=(I>>>16^B)&65535,B^=C,I^=C<<16,C=(I>>>4^B)&252645135,B^=C,I^=C<<4,y[0]=I,y[1]=B}function p(s){s=s||{};var m=(s.mode||"CBC").toUpperCase(),y="DES-"+m,S;s.decrypt?S=t.cipher.createDecipher(y,s.key):S=t.cipher.createCipher(y,s.key);var i=S.start;return S.start=function(v,C){var I=null;C instanceof t.util.ByteBuffer&&(I=C,C={}),C=C||{},C.output=I,C.iv=v,i.call(S,C)},S}return Qa}var Ya,Co;function gs(){if(Co)return Ya;Co=1;var t=me();an(),Ut(),Ae();var e=t.pkcs5=t.pkcs5||{},r;return t.util.isNodejs&&!t.options.usePureJavaScript&&(r=Qr),Ya=t.pbkdf2=e.pbkdf2=function(n,o,c,u,a,g){if(typeof a=="function"&&(g=a,a=null),t.util.isNodejs&&!t.options.usePureJavaScript&&r.pbkdf2&&(a===null||typeof a!="object")&&(r.pbkdf2Sync.length>4||!a||a==="sha1"))return typeof a!="string"&&(a="sha1"),n=Buffer.from(n,"binary"),o=Buffer.from(o,"binary"),g?r.pbkdf2Sync.length===4?r.pbkdf2(n,o,c,u,function(T,h){if(T)return g(T);g(null,h.toString("binary"))}):r.pbkdf2(n,o,c,u,a,function(T,h){if(T)return g(T);g(null,h.toString("binary"))}):r.pbkdf2Sync.length===4?r.pbkdf2Sync(n,o,c,u).toString("binary"):r.pbkdf2Sync(n,o,c,u,a).toString("binary");if((typeof a>"u"||a===null)&&(a="sha1"),typeof a=="string"){if(!(a in t.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=t.md[a].create()}var f=a.digestLength;if(u>4294967295*f){var A=new Error("Derived key is too long.");if(g)return g(A);throw A}var E=Math.ceil(u/f),p=u-(E-1)*f,s=t.hmac.create();s.start(a,n);var m="",y,S,i;if(!g){for(var v=1;v<=E;++v){s.start(null,null),s.update(o),s.update(t.util.int32ToBytes(v)),y=i=s.digest().getBytes();for(var C=2;C<=c;++C)s.start(null,null),s.update(i),S=s.digest().getBytes(),y=t.util.xorBytes(y,S,f),i=S;m+=v<E?y:y.substr(0,p)}return m}var v=1,C;function I(){if(v>E)return g(null,m);s.start(null,null),s.update(o),s.update(t.util.int32ToBytes(v)),y=i=s.digest().getBytes(),C=2,B()}function B(){if(C<=c)return s.start(null,null),s.update(i),S=s.digest().getBytes(),y=t.util.xorBytes(y,S,f),i=S,++C,t.util.setImmediate(B);m+=v<E?y:y.substr(0,p),++v,I()}I()},Ya}var Tn={exports:{}},Ja={exports:{}},So;function Tu(){if(So)return Ja.exports;So=1;var t=me();Ut(),Ae();var e=Ja.exports=t.sha256=t.sha256||{};t.md.sha256=t.md.algorithms.sha256=e,e.create=function(){n||c();var a=null,g=t.util.createBuffer(),f=new Array(64),A={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return A.start=function(){A.messageLength=0,A.fullMessageLength=A.messageLength64=[];for(var E=A.messageLengthSize/4,p=0;p<E;++p)A.fullMessageLength.push(0);return g=t.util.createBuffer(),a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},A},A.start(),A.update=function(E,p){p==="utf8"&&(E=t.util.encodeUtf8(E));var s=E.length;A.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var m=A.fullMessageLength.length-1;m>=0;--m)A.fullMessageLength[m]+=s[1],s[1]=s[0]+(A.fullMessageLength[m]/4294967296>>>0),A.fullMessageLength[m]=A.fullMessageLength[m]>>>0,s[0]=s[1]/4294967296>>>0;return g.putBytes(E),u(a,f,g),(g.read>2048||g.length()===0)&&g.compact(),A},A.digest=function(){var E=t.util.createBuffer();E.putBytes(g.bytes());var p=A.fullMessageLength[A.fullMessageLength.length-1]+A.messageLengthSize,s=p&A.blockLength-1;E.putBytes(r.substr(0,A.blockLength-s));for(var m,y,S=A.fullMessageLength[0]*8,i=0;i<A.fullMessageLength.length-1;++i)m=A.fullMessageLength[i+1]*8,y=m/4294967296>>>0,S+=y,E.putInt32(S>>>0),S=m>>>0;E.putInt32(S);var v={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4,h5:a.h5,h6:a.h6,h7:a.h7};u(v,f,E);var C=t.util.createBuffer();return C.putInt32(v.h0),C.putInt32(v.h1),C.putInt32(v.h2),C.putInt32(v.h3),C.putInt32(v.h4),C.putInt32(v.h5),C.putInt32(v.h6),C.putInt32(v.h7),C},A};var r=null,n=!1,o=null;function c(){r=String.fromCharCode(128),r+=t.util.fillString(String.fromCharCode(0),64),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=!0}function u(a,g,f){for(var A,E,p,s,m,y,S,i,v,C,I,B,T,h,l,R=f.length();R>=64;){for(S=0;S<16;++S)g[S]=f.getInt32();for(;S<64;++S)A=g[S-2],A=(A>>>17|A<<15)^(A>>>19|A<<13)^A>>>10,E=g[S-15],E=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3,g[S]=A+g[S-7]+E+g[S-16]|0;for(i=a.h0,v=a.h1,C=a.h2,I=a.h3,B=a.h4,T=a.h5,h=a.h6,l=a.h7,S=0;S<64;++S)s=(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7),m=h^B&(T^h),p=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),y=i&v|C&(i^v),A=l+s+m+o[S]+g[S],E=p+y,l=h,h=T,T=B,B=I+A>>>0,I=C,C=v,v=i,i=A+E>>>0;a.h0=a.h0+i|0,a.h1=a.h1+v|0,a.h2=a.h2+C|0,a.h3=a.h3+I|0,a.h4=a.h4+B|0,a.h5=a.h5+T|0,a.h6=a.h6+h|0,a.h7=a.h7+l|0,R-=64}}return Ja.exports}var Xa={exports:{}},Ao;function xu(){if(Ao)return Xa.exports;Ao=1;var t=me();Ae();var e=null;t.util.isNodejs&&!t.options.usePureJavaScript&&!process.versions["node-webkit"]&&(e=Qr);var r=Xa.exports=t.prng=t.prng||{};return r.create=function(n){for(var o={plugin:n,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},c=n.md,u=new Array(32),a=0;a<32;++a)u[a]=c.create();o.pools=u,o.pool=0,o.generate=function(p,s){if(!s)return o.generateSync(p);var m=o.plugin.cipher,y=o.plugin.increment,S=o.plugin.formatKey,i=o.plugin.formatSeed,v=t.util.createBuffer();o.key=null,C();function C(I){if(I)return s(I);if(v.length()>=p)return s(null,v.getBytes(p));if(o.generated>1048575&&(o.key=null),o.key===null)return t.util.nextTick(function(){g(C)});var B=m(o.key,o.seed);o.generated+=B.length,v.putBytes(B),o.key=S(m(o.key,y(o.seed))),o.seed=i(m(o.key,o.seed)),t.util.setImmediate(C)}},o.generateSync=function(p){var s=o.plugin.cipher,m=o.plugin.increment,y=o.plugin.formatKey,S=o.plugin.formatSeed;o.key=null;for(var i=t.util.createBuffer();i.length()<p;){o.generated>1048575&&(o.key=null),o.key===null&&f();var v=s(o.key,o.seed);o.generated+=v.length,i.putBytes(v),o.key=y(s(o.key,m(o.seed))),o.seed=S(s(o.key,o.seed))}return i.getBytes(p)};function g(p){if(o.pools[0].messageLength>=32)return A(),p();var s=32-o.pools[0].messageLength<<5;o.seedFile(s,function(m,y){if(m)return p(m);o.collect(y),A(),p()})}function f(){if(o.pools[0].messageLength>=32)return A();var p=32-o.pools[0].messageLength<<5;o.collect(o.seedFileSync(p)),A()}function A(){o.reseeds=o.reseeds===4294967295?0:o.reseeds+1;var p=o.plugin.md.create();p.update(o.keyBytes);for(var s=1,m=0;m<32;++m)o.reseeds%s===0&&(p.update(o.pools[m].digest().getBytes()),o.pools[m].start()),s=s<<1;o.keyBytes=p.digest().getBytes(),p.start(),p.update(o.keyBytes);var y=p.digest().getBytes();o.key=o.plugin.formatKey(o.keyBytes),o.seed=o.plugin.formatSeed(y),o.generated=0}function E(p){var s=null,m=t.util.globalScope,y=m.crypto||m.msCrypto;y&&y.getRandomValues&&(s=function(l){return y.getRandomValues(l)});var S=t.util.createBuffer();if(s)for(;S.length()<p;){var i=Math.max(1,Math.min(p-S.length(),65536)/4),v=new Uint32Array(Math.floor(i));try{s(v);for(var C=0;C<v.length;++C)S.putInt32(v[C])}catch(l){if(!(typeof QuotaExceededError<"u"&&l instanceof QuotaExceededError))throw l}}if(S.length()<p)for(var I,B,T,h=Math.floor(Math.random()*65536);S.length()<p;){B=16807*(h&65535),I=16807*(h>>16),B+=(I&32767)<<16,B+=I>>15,B=(B&2147483647)+(B>>31),h=B&4294967295;for(var C=0;C<3;++C)T=h>>>(C<<3),T^=Math.floor(Math.random()*256),S.putByte(T&255)}return S.getBytes(p)}return e?(o.seedFile=function(p,s){e.randomBytes(p,function(m,y){if(m)return s(m);s(null,y.toString())})},o.seedFileSync=function(p){return e.randomBytes(p).toString()}):(o.seedFile=function(p,s){try{s(null,E(p))}catch(m){s(m)}},o.seedFileSync=E),o.collect=function(p){for(var s=p.length,m=0;m<s;++m)o.pools[o.pool].update(p.substr(m,1)),o.pool=o.pool===31?0:o.pool+1},o.collectInt=function(p,s){for(var m="",y=0;y<s;y+=8)m+=String.fromCharCode(p>>y&255);o.collect(m)},o.registerWorker=function(p){if(p===self)o.seedFile=function(m,y){function S(i){var v=i.data;v.forge&&v.forge.prng&&(self.removeEventListener("message",S),y(v.forge.prng.err,v.forge.prng.bytes))}self.addEventListener("message",S),self.postMessage({forge:{prng:{needed:m}}})};else{var s=function(m){var y=m.data;y.forge&&y.forge.prng&&o.seedFile(y.forge.prng.needed,function(S,i){p.postMessage({forge:{prng:{err:S,bytes:i}}})})};p.addEventListener("message",s)}},o},Xa.exports}var To;function yt(){if(To)return Tn.exports;To=1;var t=me();return sr(),Tu(),xu(),Ae(),function(){if(t.random&&t.random.getBytes){Tn.exports=t.random;return}(function(e){var r={},n=new Array(4),o=t.util.createBuffer();r.formatKey=function(p){var s=t.util.createBuffer(p);return p=new Array(4),p[0]=s.getInt32(),p[1]=s.getInt32(),p[2]=s.getInt32(),p[3]=s.getInt32(),t.aes._expandKey(p,!1)},r.formatSeed=function(p){var s=t.util.createBuffer(p);return p=new Array(4),p[0]=s.getInt32(),p[1]=s.getInt32(),p[2]=s.getInt32(),p[3]=s.getInt32(),p},r.cipher=function(p,s){return t.aes._updateBlock(p,s,n,!1),o.putInt32(n[0]),o.putInt32(n[1]),o.putInt32(n[2]),o.putInt32(n[3]),o.getBytes()},r.increment=function(p){return++p[3],p},r.md=t.md.sha256;function c(){var p=t.prng.create(r);return p.getBytes=function(s,m){return p.generate(s,m)},p.getBytesSync=function(s){return p.generate(s)},p}var u=c(),a=null,g=t.util.globalScope,f=g.crypto||g.msCrypto;if(f&&f.getRandomValues&&(a=function(p){return f.getRandomValues(p)}),t.options.usePureJavaScript||!t.util.isNodejs&&!a){if(u.collectInt(+new Date,32),typeof navigator<"u"){var A="";for(var E in navigator)try{typeof navigator[E]=="string"&&(A+=navigator[E])}catch{}u.collect(A),A=null}e&&(e().mousemove(function(p){u.collectInt(p.clientX,16),u.collectInt(p.clientY,16)}),e().keypress(function(p){u.collectInt(p.charCode,8)}))}if(!t.random)t.random=u;else for(var E in u)t.random[E]=u[E];t.random.createInstance=c,Tn.exports=t.random})(typeof jQuery<"u"?jQuery:null)}(),Tn.exports}var Za,xo;function _u(){if(xo)return Za;xo=1;var t=me();Ae();var e=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],r=[1,2,3,5],n=function(u,a){return u<<a&65535|(u&65535)>>16-a},o=function(u,a){return(u&65535)>>a|u<<16-a&65535};Za=t.rc2=t.rc2||{},t.rc2.expandKey=function(u,a){typeof u=="string"&&(u=t.util.createBuffer(u)),a=a||128;var g=u,f=u.length(),A=a,E=Math.ceil(A/8),p=255>>(A&7),s;for(s=f;s<128;s++)g.putByte(e[g.at(s-1)+g.at(s-f)&255]);for(g.setAt(128-E,e[g.at(128-E)&p]),s=127-E;s>=0;s--)g.setAt(s,e[g.at(s+1)^g.at(s+E)]);return g};var c=function(u,a,g){var f=!1,A=null,E=null,p=null,s,m,y,S,i=[];for(u=t.rc2.expandKey(u,a),y=0;y<64;y++)i.push(u.getInt16Le());g?(s=function(I){for(y=0;y<4;y++)I[y]+=i[S]+(I[(y+3)%4]&I[(y+2)%4])+(~I[(y+3)%4]&I[(y+1)%4]),I[y]=n(I[y],r[y]),S++},m=function(I){for(y=0;y<4;y++)I[y]+=i[I[(y+3)%4]&63]}):(s=function(I){for(y=3;y>=0;y--)I[y]=o(I[y],r[y]),I[y]-=i[S]+(I[(y+3)%4]&I[(y+2)%4])+(~I[(y+3)%4]&I[(y+1)%4]),S--},m=function(I){for(y=3;y>=0;y--)I[y]-=i[I[(y+3)%4]&63]});var v=function(I){var B=[];for(y=0;y<4;y++){var T=A.getInt16Le();p!==null&&(g?T^=p.getInt16Le():p.putInt16Le(T)),B.push(T&65535)}S=g?0:63;for(var h=0;h<I.length;h++)for(var l=0;l<I[h][0];l++)I[h][1](B);for(y=0;y<4;y++)p!==null&&(g?p.putInt16Le(B[y]):B[y]^=p.getInt16Le()),E.putInt16Le(B[y])},C=null;return C={start:function(I,B){I&&typeof I=="string"&&(I=t.util.createBuffer(I)),f=!1,A=t.util.createBuffer(),E=B||new t.util.createBuffer,p=I,C.output=E},update:function(I){for(f||A.putBuffer(I);A.length()>=8;)v([[5,s],[1,m],[6,s],[1,m],[5,s]])},finish:function(I){var B=!0;if(g)if(I)B=I(8,A,!g);else{var T=A.length()===8?8:8-A.length();A.fillWithByte(T,T)}if(B&&(f=!0,C.update()),!g&&(B=A.length()===0,B))if(I)B=I(8,E,!g);else{var h=E.length(),l=E.at(h-1);l>h?B=!1:E.truncate(l)}return B}},C};return t.rc2.startEncrypting=function(u,a,g){var f=t.rc2.createEncryptionCipher(u,128);return f.start(a,g),f},t.rc2.createEncryptionCipher=function(u,a){return c(u,a,!0)},t.rc2.startDecrypting=function(u,a,g){var f=t.rc2.createDecryptionCipher(u,128);return f.start(a,g),f},t.rc2.createDecryptionCipher=function(u,a){return c(u,a,!1)},Za}var ei,_o;function ca(){if(_o)return ei;_o=1;var t=me();ei=t.jsbn=t.jsbn||{};var e;function r(O,k,L){this.data=[],O!=null&&(typeof O=="number"?this.fromNumber(O,k,L):k==null&&typeof O!="string"?this.fromString(O,256):this.fromString(O,k))}t.jsbn.BigInteger=r;function n(){return new r(null)}function o(O,k,L,z,Z,ee){for(;--ee>=0;){var oe=k*this.data[O++]+L.data[z]+Z;Z=Math.floor(oe/67108864),L.data[z++]=oe&67108863}return Z}function c(O,k,L,z,Z,ee){for(var oe=k&32767,ie=k>>15;--ee>=0;){var xe=this.data[O]&32767,Je=this.data[O++]>>15,ct=ie*xe+Je*oe;xe=oe*xe+((ct&32767)<<15)+L.data[z]+(Z&1073741823),Z=(xe>>>30)+(ct>>>15)+ie*Je+(Z>>>30),L.data[z++]=xe&1073741823}return Z}function u(O,k,L,z,Z,ee){for(var oe=k&16383,ie=k>>14;--ee>=0;){var xe=this.data[O]&16383,Je=this.data[O++]>>14,ct=ie*xe+Je*oe;xe=oe*xe+((ct&16383)<<14)+L.data[z]+Z,Z=(xe>>28)+(ct>>14)+ie*Je,L.data[z++]=xe&268435455}return Z}typeof navigator>"u"?(r.prototype.am=u,e=28):navigator.appName=="Microsoft Internet Explorer"?(r.prototype.am=c,e=30):navigator.appName!="Netscape"?(r.prototype.am=o,e=26):(r.prototype.am=u,e=28),r.prototype.DB=e,r.prototype.DM=(1<<e)-1,r.prototype.DV=1<<e;var a=52;r.prototype.FV=Math.pow(2,a),r.prototype.F1=a-e,r.prototype.F2=2*e-a;var g="0123456789abcdefghijklmnopqrstuvwxyz",f=new Array,A,E;for(A="0".charCodeAt(0),E=0;E<=9;++E)f[A++]=E;for(A="a".charCodeAt(0),E=10;E<36;++E)f[A++]=E;for(A="A".charCodeAt(0),E=10;E<36;++E)f[A++]=E;function p(O){return g.charAt(O)}function s(O,k){var L=f[O.charCodeAt(k)];return L??-1}function m(O){for(var k=this.t-1;k>=0;--k)O.data[k]=this.data[k];O.t=this.t,O.s=this.s}function y(O){this.t=1,this.s=O<0?-1:0,O>0?this.data[0]=O:O<-1?this.data[0]=O+this.DV:this.t=0}function S(O){var k=n();return k.fromInt(O),k}function i(O,k){var L;if(k==16)L=4;else if(k==8)L=3;else if(k==256)L=8;else if(k==2)L=1;else if(k==32)L=5;else if(k==4)L=2;else{this.fromRadix(O,k);return}this.t=0,this.s=0;for(var z=O.length,Z=!1,ee=0;--z>=0;){var oe=L==8?O[z]&255:s(O,z);if(oe<0){O.charAt(z)=="-"&&(Z=!0);continue}Z=!1,ee==0?this.data[this.t++]=oe:ee+L>this.DB?(this.data[this.t-1]|=(oe&(1<<this.DB-ee)-1)<<ee,this.data[this.t++]=oe>>this.DB-ee):this.data[this.t-1]|=oe<<ee,ee+=L,ee>=this.DB&&(ee-=this.DB)}L==8&&O[0]&128&&(this.s=-1,ee>0&&(this.data[this.t-1]|=(1<<this.DB-ee)-1<<ee)),this.clamp(),Z&&r.ZERO.subTo(this,this)}function v(){for(var O=this.s&this.DM;this.t>0&&this.data[this.t-1]==O;)--this.t}function C(O){if(this.s<0)return"-"+this.negate().toString(O);var k;if(O==16)k=4;else if(O==8)k=3;else if(O==2)k=1;else if(O==32)k=5;else if(O==4)k=2;else return this.toRadix(O);var L=(1<<k)-1,z,Z=!1,ee="",oe=this.t,ie=this.DB-oe*this.DB%k;if(oe-- >0)for(ie<this.DB&&(z=this.data[oe]>>ie)>0&&(Z=!0,ee=p(z));oe>=0;)ie<k?(z=(this.data[oe]&(1<<ie)-1)<<k-ie,z|=this.data[--oe]>>(ie+=this.DB-k)):(z=this.data[oe]>>(ie-=k)&L,ie<=0&&(ie+=this.DB,--oe)),z>0&&(Z=!0),Z&&(ee+=p(z));return Z?ee:"0"}function I(){var O=n();return r.ZERO.subTo(this,O),O}function B(){return this.s<0?this.negate():this}function T(O){var k=this.s-O.s;if(k!=0)return k;var L=this.t;if(k=L-O.t,k!=0)return this.s<0?-k:k;for(;--L>=0;)if((k=this.data[L]-O.data[L])!=0)return k;return 0}function h(O){var k=1,L;return(L=O>>>16)!=0&&(O=L,k+=16),(L=O>>8)!=0&&(O=L,k+=8),(L=O>>4)!=0&&(O=L,k+=4),(L=O>>2)!=0&&(O=L,k+=2),(L=O>>1)!=0&&(O=L,k+=1),k}function l(){return this.t<=0?0:this.DB*(this.t-1)+h(this.data[this.t-1]^this.s&this.DM)}function R(O,k){var L;for(L=this.t-1;L>=0;--L)k.data[L+O]=this.data[L];for(L=O-1;L>=0;--L)k.data[L]=0;k.t=this.t+O,k.s=this.s}function N(O,k){for(var L=O;L<this.t;++L)k.data[L-O]=this.data[L];k.t=Math.max(this.t-O,0),k.s=this.s}function F(O,k){var L=O%this.DB,z=this.DB-L,Z=(1<<z)-1,ee=Math.floor(O/this.DB),oe=this.s<<L&this.DM,ie;for(ie=this.t-1;ie>=0;--ie)k.data[ie+ee+1]=this.data[ie]>>z|oe,oe=(this.data[ie]&Z)<<L;for(ie=ee-1;ie>=0;--ie)k.data[ie]=0;k.data[ee]=oe,k.t=this.t+ee+1,k.s=this.s,k.clamp()}function D(O,k){k.s=this.s;var L=Math.floor(O/this.DB);if(L>=this.t){k.t=0;return}var z=O%this.DB,Z=this.DB-z,ee=(1<<z)-1;k.data[0]=this.data[L]>>z;for(var oe=L+1;oe<this.t;++oe)k.data[oe-L-1]|=(this.data[oe]&ee)<<Z,k.data[oe-L]=this.data[oe]>>z;z>0&&(k.data[this.t-L-1]|=(this.s&ee)<<Z),k.t=this.t-L,k.clamp()}function q(O,k){for(var L=0,z=0,Z=Math.min(O.t,this.t);L<Z;)z+=this.data[L]-O.data[L],k.data[L++]=z&this.DM,z>>=this.DB;if(O.t<this.t){for(z-=O.s;L<this.t;)z+=this.data[L],k.data[L++]=z&this.DM,z>>=this.DB;z+=this.s}else{for(z+=this.s;L<O.t;)z-=O.data[L],k.data[L++]=z&this.DM,z>>=this.DB;z-=O.s}k.s=z<0?-1:0,z<-1?k.data[L++]=this.DV+z:z>0&&(k.data[L++]=z),k.t=L,k.clamp()}function j(O,k){var L=this.abs(),z=O.abs(),Z=L.t;for(k.t=Z+z.t;--Z>=0;)k.data[Z]=0;for(Z=0;Z<z.t;++Z)k.data[Z+L.t]=L.am(0,z.data[Z],k,Z,0,L.t);k.s=0,k.clamp(),this.s!=O.s&&r.ZERO.subTo(k,k)}function H(O){for(var k=this.abs(),L=O.t=2*k.t;--L>=0;)O.data[L]=0;for(L=0;L<k.t-1;++L){var z=k.am(L,k.data[L],O,2*L,0,1);(O.data[L+k.t]+=k.am(L+1,2*k.data[L],O,2*L+1,z,k.t-L-1))>=k.DV&&(O.data[L+k.t]-=k.DV,O.data[L+k.t+1]=1)}O.t>0&&(O.data[O.t-1]+=k.am(L,k.data[L],O,2*L,0,1)),O.s=0,O.clamp()}function Q(O,k,L){var z=O.abs();if(!(z.t<=0)){var Z=this.abs();if(Z.t<z.t){k!=null&&k.fromInt(0),L!=null&&this.copyTo(L);return}L==null&&(L=n());var ee=n(),oe=this.s,ie=O.s,xe=this.DB-h(z.data[z.t-1]);xe>0?(z.lShiftTo(xe,ee),Z.lShiftTo(xe,L)):(z.copyTo(ee),Z.copyTo(L));var Je=ee.t,ct=ee.data[Je-1];if(ct!=0){var ot=ct*(1<<this.F1)+(Je>1?ee.data[Je-2]>>this.F2:0),_t=this.FV/ot,gn=(1<<this.F1)/ot,ft=1<<this.F2,dt=L.t,vn=dt-Je,Dt=k??n();for(ee.dlShiftTo(vn,Dt),L.compareTo(Dt)>=0&&(L.data[L.t++]=1,L.subTo(Dt,L)),r.ONE.dlShiftTo(Je,Dt),Dt.subTo(ee,ee);ee.t<Je;)ee.data[ee.t++]=0;for(;--vn>=0;){var ba=L.data[--dt]==ct?this.DM:Math.floor(L.data[dt]*_t+(L.data[dt-1]+ft)*gn);if((L.data[dt]+=ee.am(0,ba,L,vn,0,Je))<ba)for(ee.dlShiftTo(vn,Dt),L.subTo(Dt,L);L.data[dt]<--ba;)L.subTo(Dt,L)}k!=null&&(L.drShiftTo(Je,k),oe!=ie&&r.ZERO.subTo(k,k)),L.t=Je,L.clamp(),xe>0&&L.rShiftTo(xe,L),oe<0&&r.ZERO.subTo(L,L)}}}function J(O){var k=n();return this.abs().divRemTo(O,null,k),this.s<0&&k.compareTo(r.ZERO)>0&&O.subTo(k,k),k}function X(O){this.m=O}function re(O){return O.s<0||O.compareTo(this.m)>=0?O.mod(this.m):O}function se(O){return O}function de(O){O.divRemTo(this.m,null,O)}function ye(O,k,L){O.multiplyTo(k,L),this.reduce(L)}function _e(O,k){O.squareTo(k),this.reduce(k)}X.prototype.convert=re,X.prototype.revert=se,X.prototype.reduce=de,X.prototype.mulTo=ye,X.prototype.sqrTo=_e;function W(){if(this.t<1)return 0;var O=this.data[0];if(!(O&1))return 0;var k=O&3;return k=k*(2-(O&15)*k)&15,k=k*(2-(O&255)*k)&255,k=k*(2-((O&65535)*k&65535))&65535,k=k*(2-O*k%this.DV)%this.DV,k>0?this.DV-k:-k}function he(O){this.m=O,this.mp=O.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<O.DB-15)-1,this.mt2=2*O.t}function ae(O){var k=n();return O.abs().dlShiftTo(this.m.t,k),k.divRemTo(this.m,null,k),O.s<0&&k.compareTo(r.ZERO)>0&&this.m.subTo(k,k),k}function ke(O){var k=n();return O.copyTo(k),this.reduce(k),k}function fe(O){for(;O.t<=this.mt2;)O.data[O.t++]=0;for(var k=0;k<this.m.t;++k){var L=O.data[k]&32767,z=L*this.mpl+((L*this.mph+(O.data[k]>>15)*this.mpl&this.um)<<15)&O.DM;for(L=k+this.m.t,O.data[L]+=this.m.am(0,z,O,k,0,this.m.t);O.data[L]>=O.DV;)O.data[L]-=O.DV,O.data[++L]++}O.clamp(),O.drShiftTo(this.m.t,O),O.compareTo(this.m)>=0&&O.subTo(this.m,O)}function _(O,k){O.squareTo(k),this.reduce(k)}function x(O,k,L){O.multiplyTo(k,L),this.reduce(L)}he.prototype.convert=ae,he.prototype.revert=ke,he.prototype.reduce=fe,he.prototype.mulTo=x,he.prototype.sqrTo=_;function w(){return(this.t>0?this.data[0]&1:this.s)==0}function d(O,k){if(O>4294967295||O<1)return r.ONE;var L=n(),z=n(),Z=k.convert(this),ee=h(O)-1;for(Z.copyTo(L);--ee>=0;)if(k.sqrTo(L,z),(O&1<<ee)>0)k.mulTo(z,Z,L);else{var oe=L;L=z,z=oe}return k.revert(L)}function b(O,k){var L;return O<256||k.isEven()?L=new X(k):L=new he(k),this.exp(O,L)}r.prototype.copyTo=m,r.prototype.fromInt=y,r.prototype.fromString=i,r.prototype.clamp=v,r.prototype.dlShiftTo=R,r.prototype.drShiftTo=N,r.prototype.lShiftTo=F,r.prototype.rShiftTo=D,r.prototype.subTo=q,r.prototype.multiplyTo=j,r.prototype.squareTo=H,r.prototype.divRemTo=Q,r.prototype.invDigit=W,r.prototype.isEven=w,r.prototype.exp=d,r.prototype.toString=C,r.prototype.negate=I,r.prototype.abs=B,r.prototype.compareTo=T,r.prototype.bitLength=l,r.prototype.mod=J,r.prototype.modPowInt=b,r.ZERO=S(0),r.ONE=S(1);function U(){var O=n();return this.copyTo(O),O}function P(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function K(){return this.t==0?this.s:this.data[0]<<24>>24}function V(){return this.t==0?this.s:this.data[0]<<16>>16}function $(O){return Math.floor(Math.LN2*this.DB/Math.log(O))}function M(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function G(O){if(O==null&&(O=10),this.signum()==0||O<2||O>36)return"0";var k=this.chunkSize(O),L=Math.pow(O,k),z=S(L),Z=n(),ee=n(),oe="";for(this.divRemTo(z,Z,ee);Z.signum()>0;)oe=(L+ee.intValue()).toString(O).substr(1)+oe,Z.divRemTo(z,Z,ee);return ee.intValue().toString(O)+oe}function Y(O,k){this.fromInt(0),k==null&&(k=10);for(var L=this.chunkSize(k),z=Math.pow(k,L),Z=!1,ee=0,oe=0,ie=0;ie<O.length;++ie){var xe=s(O,ie);if(xe<0){O.charAt(ie)=="-"&&this.signum()==0&&(Z=!0);continue}oe=k*oe+xe,++ee>=L&&(this.dMultiply(z),this.dAddOffset(oe,0),ee=0,oe=0)}ee>0&&(this.dMultiply(Math.pow(k,ee)),this.dAddOffset(oe,0)),Z&&r.ZERO.subTo(this,this)}function ne(O,k,L){if(typeof k=="number")if(O<2)this.fromInt(1);else for(this.fromNumber(O,L),this.testBit(O-1)||this.bitwiseTo(r.ONE.shiftLeft(O-1),be,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(k);)this.dAddOffset(2,0),this.bitLength()>O&&this.subTo(r.ONE.shiftLeft(O-1),this);else{var z=new Array,Z=O&7;z.length=(O>>3)+1,k.nextBytes(z),Z>0?z[0]&=(1<<Z)-1:z[0]=0,this.fromString(z,256)}}function te(){var O=this.t,k=new Array;k[0]=this.s;var L=this.DB-O*this.DB%8,z,Z=0;if(O-- >0)for(L<this.DB&&(z=this.data[O]>>L)!=(this.s&this.DM)>>L&&(k[Z++]=z|this.s<<this.DB-L);O>=0;)L<8?(z=(this.data[O]&(1<<L)-1)<<8-L,z|=this.data[--O]>>(L+=this.DB-8)):(z=this.data[O]>>(L-=8)&255,L<=0&&(L+=this.DB,--O)),z&128&&(z|=-256),Z==0&&(this.s&128)!=(z&128)&&++Z,(Z>0||z!=this.s)&&(k[Z++]=z);return k}function ue(O){return this.compareTo(O)==0}function pe(O){return this.compareTo(O)<0?this:O}function ge(O){return this.compareTo(O)>0?this:O}function ce(O,k,L){var z,Z,ee=Math.min(O.t,this.t);for(z=0;z<ee;++z)L.data[z]=k(this.data[z],O.data[z]);if(O.t<this.t){for(Z=O.s&this.DM,z=ee;z<this.t;++z)L.data[z]=k(this.data[z],Z);L.t=this.t}else{for(Z=this.s&this.DM,z=ee;z<O.t;++z)L.data[z]=k(Z,O.data[z]);L.t=O.t}L.s=k(this.s,O.s),L.clamp()}function le(O,k){return O&k}function ve(O){var k=n();return this.bitwiseTo(O,le,k),k}function be(O,k){return O|k}function Ne(O){var k=n();return this.bitwiseTo(O,be,k),k}function Pe(O,k){return O^k}function we(O){var k=n();return this.bitwiseTo(O,Pe,k),k}function Oe(O,k){return O&~k}function Ie(O){var k=n();return this.bitwiseTo(O,Oe,k),k}function Te(){for(var O=n(),k=0;k<this.t;++k)O.data[k]=this.DM&~this.data[k];return O.t=this.t,O.s=~this.s,O}function Ee(O){var k=n();return O<0?this.rShiftTo(-O,k):this.lShiftTo(O,k),k}function gt(O){var k=n();return O<0?this.lShiftTo(-O,k):this.rShiftTo(O,k),k}function xt(O){if(O==0)return-1;var k=0;return O&65535||(O>>=16,k+=16),O&255||(O>>=8,k+=8),O&15||(O>>=4,k+=4),O&3||(O>>=2,k+=2),O&1||++k,k}function kt(){for(var O=0;O<this.t;++O)if(this.data[O]!=0)return O*this.DB+xt(this.data[O]);return this.s<0?this.t*this.DB:-1}function zt(O){for(var k=0;O!=0;)O&=O-1,++k;return k}function ur(){for(var O=0,k=this.s&this.DM,L=0;L<this.t;++L)O+=zt(this.data[L]^k);return O}function Or(O){var k=Math.floor(O/this.DB);return k>=this.t?this.s!=0:(this.data[k]&1<<O%this.DB)!=0}function yn(O,k){var L=r.ONE.shiftLeft(O);return this.bitwiseTo(L,k,L),L}function Le(O){return this.changeBit(O,be)}function Fe(O){return this.changeBit(O,Oe)}function Me(O){return this.changeBit(O,Pe)}function qe(O,k){for(var L=0,z=0,Z=Math.min(O.t,this.t);L<Z;)z+=this.data[L]+O.data[L],k.data[L++]=z&this.DM,z>>=this.DB;if(O.t<this.t){for(z+=O.s;L<this.t;)z+=this.data[L],k.data[L++]=z&this.DM,z>>=this.DB;z+=this.s}else{for(z+=this.s;L<O.t;)z+=O.data[L],k.data[L++]=z&this.DM,z>>=this.DB;z+=O.s}k.s=z<0?-1:0,z>0?k.data[L++]=z:z<-1&&(k.data[L++]=this.DV+z),k.t=L,k.clamp()}function Ve(O){var k=n();return this.addTo(O,k),k}function Ke(O){var k=n();return this.subTo(O,k),k}function $e(O){var k=n();return this.multiplyTo(O,k),k}function Ge(O){var k=n();return this.divRemTo(O,k,null),k}function je(O){var k=n();return this.divRemTo(O,null,k),k}function He(O){var k=n(),L=n();return this.divRemTo(O,k,L),new Array(k,L)}function ze(O){this.data[this.t]=this.am(0,O-1,this,0,0,this.t),++this.t,this.clamp()}function We(O,k){if(O!=0){for(;this.t<=k;)this.data[this.t++]=0;for(this.data[k]+=O;this.data[k]>=this.DV;)this.data[k]-=this.DV,++k>=this.t&&(this.data[this.t++]=0),++this.data[k]}}function Re(){}function De(O){return O}function Qe(O,k,L){O.multiplyTo(k,L)}function Ye(O,k){O.squareTo(k)}Re.prototype.convert=De,Re.prototype.revert=De,Re.prototype.mulTo=Qe,Re.prototype.sqrTo=Ye;function Cl(O){return this.exp(O,new Re)}function Sl(O,k,L){var z=Math.min(this.t+O.t,k);for(L.s=0,L.t=z;z>0;)L.data[--z]=0;var Z;for(Z=L.t-this.t;z<Z;++z)L.data[z+this.t]=this.am(0,O.data[z],L,z,0,this.t);for(Z=Math.min(O.t,k);z<Z;++z)this.am(0,O.data[z],L,z,0,k-z);L.clamp()}function Al(O,k,L){--k;var z=L.t=this.t+O.t-k;for(L.s=0;--z>=0;)L.data[z]=0;for(z=Math.max(k-this.t,0);z<O.t;++z)L.data[this.t+z-k]=this.am(k-z,O.data[z],L,0,0,this.t+z-k);L.clamp(),L.drShiftTo(1,L)}function lr(O){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*O.t,this.r2),this.mu=this.r2.divide(O),this.m=O}function Tl(O){if(O.s<0||O.t>2*this.m.t)return O.mod(this.m);if(O.compareTo(this.m)<0)return O;var k=n();return O.copyTo(k),this.reduce(k),k}function xl(O){return O}function _l(O){for(O.drShiftTo(this.m.t-1,this.r2),O.t>this.m.t+1&&(O.t=this.m.t+1,O.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);O.compareTo(this.r2)<0;)O.dAddOffset(1,this.m.t+1);for(O.subTo(this.r2,O);O.compareTo(this.m)>=0;)O.subTo(this.m,O)}function wl(O,k){O.squareTo(k),this.reduce(k)}function Il(O,k,L){O.multiplyTo(k,L),this.reduce(L)}lr.prototype.convert=Tl,lr.prototype.revert=xl,lr.prototype.reduce=_l,lr.prototype.mulTo=Il,lr.prototype.sqrTo=wl;function bl(O,k){var L=O.bitLength(),z,Z=S(1),ee;if(L<=0)return Z;L<18?z=1:L<48?z=3:L<144?z=4:L<768?z=5:z=6,L<8?ee=new X(k):k.isEven()?ee=new lr(k):ee=new he(k);var oe=new Array,ie=3,xe=z-1,Je=(1<<z)-1;if(oe[1]=ee.convert(this),z>1){var ct=n();for(ee.sqrTo(oe[1],ct);ie<=Je;)oe[ie]=n(),ee.mulTo(ct,oe[ie-2],oe[ie]),ie+=2}var ot=O.t-1,_t,gn=!0,ft=n(),dt;for(L=h(O.data[ot])-1;ot>=0;){for(L>=xe?_t=O.data[ot]>>L-xe&Je:(_t=(O.data[ot]&(1<<L+1)-1)<<xe-L,ot>0&&(_t|=O.data[ot-1]>>this.DB+L-xe)),ie=z;!(_t&1);)_t>>=1,--ie;if((L-=ie)<0&&(L+=this.DB,--ot),gn)oe[_t].copyTo(Z),gn=!1;else{for(;ie>1;)ee.sqrTo(Z,ft),ee.sqrTo(ft,Z),ie-=2;ie>0?ee.sqrTo(Z,ft):(dt=Z,Z=ft,ft=dt),ee.mulTo(ft,oe[_t],Z)}for(;ot>=0&&!(O.data[ot]&1<<L);)ee.sqrTo(Z,ft),dt=Z,Z=ft,ft=dt,--L<0&&(L=this.DB-1,--ot)}return ee.revert(Z)}function Bl(O){var k=this.s<0?this.negate():this.clone(),L=O.s<0?O.negate():O.clone();if(k.compareTo(L)<0){var z=k;k=L,L=z}var Z=k.getLowestSetBit(),ee=L.getLowestSetBit();if(ee<0)return k;for(Z<ee&&(ee=Z),ee>0&&(k.rShiftTo(ee,k),L.rShiftTo(ee,L));k.signum()>0;)(Z=k.getLowestSetBit())>0&&k.rShiftTo(Z,k),(Z=L.getLowestSetBit())>0&&L.rShiftTo(Z,L),k.compareTo(L)>=0?(k.subTo(L,k),k.rShiftTo(1,k)):(L.subTo(k,L),L.rShiftTo(1,L));return ee>0&&L.lShiftTo(ee,L),L}function Rl(O){if(O<=0)return 0;var k=this.DV%O,L=this.s<0?O-1:0;if(this.t>0)if(k==0)L=this.data[0]%O;else for(var z=this.t-1;z>=0;--z)L=(k*L+this.data[z])%O;return L}function Nl(O){var k=O.isEven();if(this.isEven()&&k||O.signum()==0)return r.ZERO;for(var L=O.clone(),z=this.clone(),Z=S(1),ee=S(0),oe=S(0),ie=S(1);L.signum()!=0;){for(;L.isEven();)L.rShiftTo(1,L),k?((!Z.isEven()||!ee.isEven())&&(Z.addTo(this,Z),ee.subTo(O,ee)),Z.rShiftTo(1,Z)):ee.isEven()||ee.subTo(O,ee),ee.rShiftTo(1,ee);for(;z.isEven();)z.rShiftTo(1,z),k?((!oe.isEven()||!ie.isEven())&&(oe.addTo(this,oe),ie.subTo(O,ie)),oe.rShiftTo(1,oe)):ie.isEven()||ie.subTo(O,ie),ie.rShiftTo(1,ie);L.compareTo(z)>=0?(L.subTo(z,L),k&&Z.subTo(oe,Z),ee.subTo(ie,ee)):(z.subTo(L,z),k&&oe.subTo(Z,oe),ie.subTo(ee,ie))}if(z.compareTo(r.ONE)!=0)return r.ZERO;if(ie.compareTo(O)>=0)return ie.subtract(O);if(ie.signum()<0)ie.addTo(O,ie);else return ie;return ie.signum()<0?ie.add(O):ie}var lt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Pl=(1<<26)/lt[lt.length-1];function Ol(O){var k,L=this.abs();if(L.t==1&&L.data[0]<=lt[lt.length-1]){for(k=0;k<lt.length;++k)if(L.data[0]==lt[k])return!0;return!1}if(L.isEven())return!1;for(k=1;k<lt.length;){for(var z=lt[k],Z=k+1;Z<lt.length&&z<Pl;)z*=lt[Z++];for(z=L.modInt(z);k<Z;)if(z%lt[k++]==0)return!1}return L.millerRabin(O)}function Ul(O){var k=this.subtract(r.ONE),L=k.getLowestSetBit();if(L<=0)return!1;for(var z=k.shiftRight(L),Z=kl(),ee,oe=0;oe<O;++oe){do ee=new r(this.bitLength(),Z);while(ee.compareTo(r.ONE)<=0||ee.compareTo(k)>=0);var ie=ee.modPow(z,this);if(ie.compareTo(r.ONE)!=0&&ie.compareTo(k)!=0){for(var xe=1;xe++<L&&ie.compareTo(k)!=0;)if(ie=ie.modPowInt(2,this),ie.compareTo(r.ONE)==0)return!1;if(ie.compareTo(k)!=0)return!1}}return!0}function kl(){return{nextBytes:function(O){for(var k=0;k<O.length;++k)O[k]=Math.floor(Math.random()*256)}}}return r.prototype.chunkSize=$,r.prototype.toRadix=G,r.prototype.fromRadix=Y,r.prototype.fromNumber=ne,r.prototype.bitwiseTo=ce,r.prototype.changeBit=yn,r.prototype.addTo=qe,r.prototype.dMultiply=ze,r.prototype.dAddOffset=We,r.prototype.multiplyLowerTo=Sl,r.prototype.multiplyUpperTo=Al,r.prototype.modInt=Rl,r.prototype.millerRabin=Ul,r.prototype.clone=U,r.prototype.intValue=P,r.prototype.byteValue=K,r.prototype.shortValue=V,r.prototype.signum=M,r.prototype.toByteArray=te,r.prototype.equals=ue,r.prototype.min=pe,r.prototype.max=ge,r.prototype.and=ve,r.prototype.or=Ne,r.prototype.xor=we,r.prototype.andNot=Ie,r.prototype.not=Te,r.prototype.shiftLeft=Ee,r.prototype.shiftRight=gt,r.prototype.getLowestSetBit=kt,r.prototype.bitCount=ur,r.prototype.testBit=Or,r.prototype.setBit=Le,r.prototype.clearBit=Fe,r.prototype.flipBit=Me,r.prototype.add=Ve,r.prototype.subtract=Ke,r.prototype.multiply=$e,r.prototype.divide=Ge,r.prototype.remainder=je,r.prototype.divideAndRemainder=He,r.prototype.modPow=bl,r.prototype.modInverse=Nl,r.prototype.pow=Cl,r.prototype.gcd=Bl,r.prototype.isProbablePrime=Ol,ei}var ti={exports:{}},ri={exports:{}},wo;function sn(){if(wo)return ri.exports;wo=1;var t=me();Ut(),Ae();var e=ri.exports=t.sha1=t.sha1||{};t.md.sha1=t.md.algorithms.sha1=e,e.create=function(){n||o();var u=null,a=t.util.createBuffer(),g=new Array(80),f={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return f.start=function(){f.messageLength=0,f.fullMessageLength=f.messageLength64=[];for(var A=f.messageLengthSize/4,E=0;E<A;++E)f.fullMessageLength.push(0);return a=t.util.createBuffer(),u={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},f},f.start(),f.update=function(A,E){E==="utf8"&&(A=t.util.encodeUtf8(A));var p=A.length;f.messageLength+=p,p=[p/4294967296>>>0,p>>>0];for(var s=f.fullMessageLength.length-1;s>=0;--s)f.fullMessageLength[s]+=p[1],p[1]=p[0]+(f.fullMessageLength[s]/4294967296>>>0),f.fullMessageLength[s]=f.fullMessageLength[s]>>>0,p[0]=p[1]/4294967296>>>0;return a.putBytes(A),c(u,g,a),(a.read>2048||a.length()===0)&&a.compact(),f},f.digest=function(){var A=t.util.createBuffer();A.putBytes(a.bytes());var E=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize,p=E&f.blockLength-1;A.putBytes(r.substr(0,f.blockLength-p));for(var s,m,y=f.fullMessageLength[0]*8,S=0;S<f.fullMessageLength.length-1;++S)s=f.fullMessageLength[S+1]*8,m=s/4294967296>>>0,y+=m,A.putInt32(y>>>0),y=s>>>0;A.putInt32(y);var i={h0:u.h0,h1:u.h1,h2:u.h2,h3:u.h3,h4:u.h4};c(i,g,A);var v=t.util.createBuffer();return v.putInt32(i.h0),v.putInt32(i.h1),v.putInt32(i.h2),v.putInt32(i.h3),v.putInt32(i.h4),v},f};var r=null,n=!1;function o(){r=String.fromCharCode(128),r+=t.util.fillString(String.fromCharCode(0),64),n=!0}function c(u,a,g){for(var f,A,E,p,s,m,y,S,i=g.length();i>=64;){for(A=u.h0,E=u.h1,p=u.h2,s=u.h3,m=u.h4,S=0;S<16;++S)f=g.getInt32(),a[S]=f,y=s^E&(p^s),f=(A<<5|A>>>27)+y+m+1518500249+f,m=s,s=p,p=(E<<30|E>>>2)>>>0,E=A,A=f;for(;S<20;++S)f=a[S-3]^a[S-8]^a[S-14]^a[S-16],f=f<<1|f>>>31,a[S]=f,y=s^E&(p^s),f=(A<<5|A>>>27)+y+m+1518500249+f,m=s,s=p,p=(E<<30|E>>>2)>>>0,E=A,A=f;for(;S<32;++S)f=a[S-3]^a[S-8]^a[S-14]^a[S-16],f=f<<1|f>>>31,a[S]=f,y=E^p^s,f=(A<<5|A>>>27)+y+m+1859775393+f,m=s,s=p,p=(E<<30|E>>>2)>>>0,E=A,A=f;for(;S<40;++S)f=a[S-6]^a[S-16]^a[S-28]^a[S-32],f=f<<2|f>>>30,a[S]=f,y=E^p^s,f=(A<<5|A>>>27)+y+m+1859775393+f,m=s,s=p,p=(E<<30|E>>>2)>>>0,E=A,A=f;for(;S<60;++S)f=a[S-6]^a[S-16]^a[S-28]^a[S-32],f=f<<2|f>>>30,a[S]=f,y=E&p|s&(E^p),f=(A<<5|A>>>27)+y+m+2400959708+f,m=s,s=p,p=(E<<30|E>>>2)>>>0,E=A,A=f;for(;S<80;++S)f=a[S-6]^a[S-16]^a[S-28]^a[S-32],f=f<<2|f>>>30,a[S]=f,y=E^p^s,f=(A<<5|A>>>27)+y+m+3395469782+f,m=s,s=p,p=(E<<30|E>>>2)>>>0,E=A,A=f;u.h0=u.h0+A|0,u.h1=u.h1+E|0,u.h2=u.h2+p|0,u.h3=u.h3+s|0,u.h4=u.h4+m|0,i-=64}}return ri.exports}var Io;function wu(){if(Io)return ti.exports;Io=1;var t=me();Ae(),yt(),sn();var e=ti.exports=t.pkcs1=t.pkcs1||{};e.encode_rsa_oaep=function(n,o,c){var u,a,g,f;typeof c=="string"?(u=c,a=arguments[3]||void 0,g=arguments[4]||void 0):c&&(u=c.label||void 0,a=c.seed||void 0,g=c.md||void 0,c.mgf1&&c.mgf1.md&&(f=c.mgf1.md)),g?g.start():g=t.md.sha1.create(),f||(f=g);var A=Math.ceil(n.n.bitLength()/8),E=A-2*g.digestLength-2;if(o.length>E){var p=new Error("RSAES-OAEP input message length is too long.");throw p.length=o.length,p.maxLength=E,p}u||(u=""),g.update(u,"raw");for(var s=g.digest(),m="",y=E-o.length,S=0;S<y;S++)m+="\0";var i=s.getBytes()+m+""+o;if(!a)a=t.random.getBytes(g.digestLength);else if(a.length!==g.digestLength){var p=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw p.seedLength=a.length,p.digestLength=g.digestLength,p}var v=r(a,A-g.digestLength-1,f),C=t.util.xorBytes(i,v,i.length),I=r(C,g.digestLength,f),B=t.util.xorBytes(a,I,a.length);return"\0"+B+C},e.decode_rsa_oaep=function(n,o,c){var u,a,g;typeof c=="string"?(u=c,a=arguments[3]||void 0):c&&(u=c.label||void 0,a=c.md||void 0,c.mgf1&&c.mgf1.md&&(g=c.mgf1.md));var f=Math.ceil(n.n.bitLength()/8);if(o.length!==f){var C=new Error("RSAES-OAEP encoded message length is invalid.");throw C.length=o.length,C.expectedLength=f,C}if(a===void 0?a=t.md.sha1.create():a.start(),g||(g=a),f<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");u||(u=""),a.update(u,"raw");for(var A=a.digest().getBytes(),E=o.charAt(0),p=o.substring(1,a.digestLength+1),s=o.substring(1+a.digestLength),m=r(s,a.digestLength,g),y=t.util.xorBytes(p,m,p.length),S=r(y,f-a.digestLength-1,g),i=t.util.xorBytes(s,S,s.length),v=i.substring(0,a.digestLength),C=E!=="\0",I=0;I<a.digestLength;++I)C|=A.charAt(I)!==v.charAt(I);for(var B=1,T=a.digestLength,h=a.digestLength;h<i.length;h++){var l=i.charCodeAt(h),R=l&1^1,N=B?65534:0;C|=l&N,B=B&R,T+=B}if(C||i.charCodeAt(T)!==1)throw new Error("Invalid RSAES-OAEP padding.");return i.substring(T+1)};function r(n,o,c){c||(c=t.md.sha1.create());for(var u="",a=Math.ceil(o/c.digestLength),g=0;g<a;++g){var f=String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255);c.start(),c.update(n+f),u+=c.digest().getBytes()}return u.substring(0,o)}return ti.exports}var xn={exports:{}},bo;function Iu(){if(bo)return xn.exports;bo=1;var t=me();return Ae(),ca(),yt(),function(){if(t.prime){xn.exports=t.prime;return}var e=xn.exports=t.prime=t.prime||{},r=t.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],o=new r(null);o.fromInt(30);var c=function(p,s){return p|s};e.generateProbablePrime=function(p,s,m){typeof s=="function"&&(m=s,s={}),s=s||{};var y=s.algorithm||"PRIMEINC";typeof y=="string"&&(y={name:y}),y.options=y.options||{};var S=s.prng||t.random,i={nextBytes:function(v){for(var C=S.getBytesSync(v.length),I=0;I<v.length;++I)v[I]=C.charCodeAt(I)}};if(y.name==="PRIMEINC")return u(p,i,y.options,m);throw new Error("Invalid prime generation algorithm: "+y.name)};function u(p,s,m,y){return"workers"in m?f(p,s,m,y):a(p,s,m,y)}function a(p,s,m,y){var S=A(p,s),i=0,v=E(S.bitLength());"millerRabinTests"in m&&(v=m.millerRabinTests);var C=10;"maxBlockTime"in m&&(C=m.maxBlockTime),g(S,p,s,i,v,C,y)}function g(p,s,m,y,S,i,v){var C=+new Date;do{if(p.bitLength()>s&&(p=A(s,m)),p.isProbablePrime(S))return v(null,p);p.dAddOffset(n[y++%8],0)}while(i<0||+new Date-C<i);t.util.setImmediate(function(){g(p,s,m,y,S,i,v)})}function f(p,s,m,y){if(typeof Worker>"u")return a(p,s,m,y);var S=A(p,s),i=m.workers,v=m.workLoad||100,C=v*30/8,I=m.workerScript||"forge/prime.worker.js";if(i===-1)return t.util.estimateCores(function(T,h){T&&(h=2),i=h-1,B()});B();function B(){i=Math.max(1,i);for(var T=[],h=0;h<i;++h)T[h]=new Worker(I);for(var h=0;h<i;++h)T[h].addEventListener("message",R);var l=!1;function R(N){if(!l){var F=N.data;if(F.found){for(var D=0;D<T.length;++D)T[D].terminate();return l=!0,y(null,new r(F.prime,16))}S.bitLength()>p&&(S=A(p,s));var q=S.toString(16);N.target.postMessage({hex:q,workLoad:v}),S.dAddOffset(C,0)}}}}function A(p,s){var m=new r(p,s),y=p-1;return m.testBit(y)||m.bitwiseTo(r.ONE.shiftLeft(y),c,m),m.dAddOffset(31-m.mod(o).byteValue(),0),m}function E(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}}(),xn.exports}var ni,Bo;function ua(){if(Bo)return ni;Bo=1;var t=me();if(Tt(),ca(),or(),wu(),Iu(),yt(),Ae(),typeof e>"u")var e=t.jsbn.BigInteger;var r=t.util.isNodejs?Qr:null,n=t.asn1,o=t.util;t.pki=t.pki||{},ni=t.pki.rsa=t.rsa=t.rsa||{};var c=t.pki,u=[6,4,2,4,2,4,6,2],a={name:"PrivateKeyInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},g={name:"RSAPrivateKey",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},A=t.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},E={name:"DigestInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:n.Class.UNIVERSAL,type:n.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},p=function(h){var l;if(h.algorithm in c.oids)l=c.oids[h.algorithm];else{var R=new Error("Unknown message digest algorithm.");throw R.algorithm=h.algorithm,R}var N=n.oidToDer(l).getBytes(),F=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),D=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);D.value.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,N)),D.value.push(n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,""));var q=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,h.digest().getBytes());return F.value.push(D),F.value.push(q),n.toDer(F).getBytes()},s=function(h,l,R){if(R)return h.modPow(l.e,l.n);if(!l.p||!l.q)return h.modPow(l.d,l.n);l.dP||(l.dP=l.d.mod(l.p.subtract(e.ONE))),l.dQ||(l.dQ=l.d.mod(l.q.subtract(e.ONE))),l.qInv||(l.qInv=l.q.modInverse(l.p));var N;do N=new e(t.util.bytesToHex(t.random.getBytes(l.n.bitLength()/8)),16);while(N.compareTo(l.n)>=0||!N.gcd(l.n).equals(e.ONE));h=h.multiply(N.modPow(l.e,l.n)).mod(l.n);for(var F=h.mod(l.p).modPow(l.dP,l.p),D=h.mod(l.q).modPow(l.dQ,l.q);F.compareTo(D)<0;)F=F.add(l.p);var q=F.subtract(D).multiply(l.qInv).mod(l.p).multiply(l.q).add(D);return q=q.multiply(N.modInverse(l.n)).mod(l.n),q};c.rsa.encrypt=function(h,l,R){var N=R,F,D=Math.ceil(l.n.bitLength()/8);R!==!1&&R!==!0?(N=R===2,F=m(h,l,R)):(F=t.util.createBuffer(),F.putBytes(h));for(var q=new e(F.toHex(),16),j=s(q,l,N),H=j.toString(16),Q=t.util.createBuffer(),J=D-Math.ceil(H.length/2);J>0;)Q.putByte(0),--J;return Q.putBytes(t.util.hexToBytes(H)),Q.getBytes()},c.rsa.decrypt=function(h,l,R,N){var F=Math.ceil(l.n.bitLength()/8);if(h.length!==F){var D=new Error("Encrypted message length is invalid.");throw D.length=h.length,D.expected=F,D}var q=new e(t.util.createBuffer(h).toHex(),16);if(q.compareTo(l.n)>=0)throw new Error("Encrypted message is invalid.");for(var j=s(q,l,R),H=j.toString(16),Q=t.util.createBuffer(),J=F-Math.ceil(H.length/2);J>0;)Q.putByte(0),--J;return Q.putBytes(t.util.hexToBytes(H)),N!==!1?y(Q.getBytes(),l,R):Q.getBytes()},c.rsa.createKeyPairGenerationState=function(h,l,R){typeof h=="string"&&(h=parseInt(h,10)),h=h||2048,R=R||{};var N=R.prng||t.random,F={nextBytes:function(j){for(var H=N.getBytesSync(j.length),Q=0;Q<j.length;++Q)j[Q]=H.charCodeAt(Q)}},D=R.algorithm||"PRIMEINC",q;if(D==="PRIMEINC")q={algorithm:D,state:0,bits:h,rng:F,eInt:l||65537,e:new e(null),p:null,q:null,qBits:h>>1,pBits:h-(h>>1),pqState:0,num:null,keys:null},q.e.fromInt(q.eInt);else throw new Error("Invalid key generation algorithm: "+D);return q},c.rsa.stepKeyPairGenerationState=function(h,l){"algorithm"in h||(h.algorithm="PRIMEINC");var R=new e(null);R.fromInt(30);for(var N=0,F=function(X,re){return X|re},D=+new Date,q,j=0;h.keys===null&&(l<=0||j<l);){if(h.state===0){var H=h.p===null?h.pBits:h.qBits,Q=H-1;h.pqState===0?(h.num=new e(H,h.rng),h.num.testBit(Q)||h.num.bitwiseTo(e.ONE.shiftLeft(Q),F,h.num),h.num.dAddOffset(31-h.num.mod(R).byteValue(),0),N=0,++h.pqState):h.pqState===1?h.num.bitLength()>H?h.pqState=0:h.num.isProbablePrime(v(h.num.bitLength()))?++h.pqState:h.num.dAddOffset(u[N++%8],0):h.pqState===2?h.pqState=h.num.subtract(e.ONE).gcd(h.e).compareTo(e.ONE)===0?3:0:h.pqState===3&&(h.pqState=0,h.p===null?h.p=h.num:h.q=h.num,h.p!==null&&h.q!==null&&++h.state,h.num=null)}else if(h.state===1)h.p.compareTo(h.q)<0&&(h.num=h.p,h.p=h.q,h.q=h.num),++h.state;else if(h.state===2)h.p1=h.p.subtract(e.ONE),h.q1=h.q.subtract(e.ONE),h.phi=h.p1.multiply(h.q1),++h.state;else if(h.state===3)h.phi.gcd(h.e).compareTo(e.ONE)===0?++h.state:(h.p=null,h.q=null,h.state=0);else if(h.state===4)h.n=h.p.multiply(h.q),h.n.bitLength()===h.bits?++h.state:(h.q=null,h.state=0);else if(h.state===5){var J=h.e.modInverse(h.phi);h.keys={privateKey:c.rsa.setPrivateKey(h.n,h.e,J,h.p,h.q,J.mod(h.p1),J.mod(h.q1),h.q.modInverse(h.p)),publicKey:c.rsa.setPublicKey(h.n,h.e)}}q=+new Date,j+=q-D,D=q}return h.keys!==null},c.rsa.generateKeyPair=function(h,l,R,N){if(arguments.length===1?typeof h=="object"?(R=h,h=void 0):typeof h=="function"&&(N=h,h=void 0):arguments.length===2?typeof h=="number"?typeof l=="function"?(N=l,l=void 0):typeof l!="number"&&(R=l,l=void 0):(R=h,N=l,h=void 0,l=void 0):arguments.length===3&&(typeof l=="number"?typeof R=="function"&&(N=R,R=void 0):(N=R,R=l,l=void 0)),R=R||{},h===void 0&&(h=R.bits||2048),l===void 0&&(l=R.e||65537),!t.options.usePureJavaScript&&!R.prng&&h>=256&&h<=16384&&(l===65537||l===3)){if(N){if(C("generateKeyPair"))return r.generateKeyPair("rsa",{modulusLength:h,publicExponent:l,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(j,H,Q){if(j)return N(j);N(null,{privateKey:c.privateKeyFromPem(Q),publicKey:c.publicKeyFromPem(H)})});if(I("generateKey")&&I("exportKey"))return o.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:h,publicExponent:T(l),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(j){return o.globalScope.crypto.subtle.exportKey("pkcs8",j.privateKey)}).then(void 0,function(j){N(j)}).then(function(j){if(j){var H=c.privateKeyFromAsn1(n.fromDer(t.util.createBuffer(j)));N(null,{privateKey:H,publicKey:c.setRsaPublicKey(H.n,H.e)})}});if(B("generateKey")&&B("exportKey")){var F=o.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:h,publicExponent:T(l),hash:{name:"SHA-256"}},!0,["sign","verify"]);F.oncomplete=function(j){var H=j.target.result,Q=o.globalScope.msCrypto.subtle.exportKey("pkcs8",H.privateKey);Q.oncomplete=function(J){var X=J.target.result,re=c.privateKeyFromAsn1(n.fromDer(t.util.createBuffer(X)));N(null,{privateKey:re,publicKey:c.setRsaPublicKey(re.n,re.e)})},Q.onerror=function(J){N(J)}},F.onerror=function(j){N(j)};return}}else if(C("generateKeyPairSync")){var D=r.generateKeyPairSync("rsa",{modulusLength:h,publicExponent:l,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(D.privateKey),publicKey:c.publicKeyFromPem(D.publicKey)}}}var q=c.rsa.createKeyPairGenerationState(h,l,R);if(!N)return c.rsa.stepKeyPairGenerationState(q,0),q.keys;S(q,R,N)},c.setRsaPublicKey=c.rsa.setPublicKey=function(h,l){var R={n:h,e:l};return R.encrypt=function(N,F,D){if(typeof F=="string"?F=F.toUpperCase():F===void 0&&(F="RSAES-PKCS1-V1_5"),F==="RSAES-PKCS1-V1_5")F={encode:function(j,H,Q){return m(j,H,2).getBytes()}};else if(F==="RSA-OAEP"||F==="RSAES-OAEP")F={encode:function(j,H){return t.pkcs1.encode_rsa_oaep(H,j,D)}};else if(["RAW","NONE","NULL",null].indexOf(F)!==-1)F={encode:function(j){return j}};else if(typeof F=="string")throw new Error('Unsupported encryption scheme: "'+F+'".');var q=F.encode(N,R,!0);return c.rsa.encrypt(q,R,!0)},R.verify=function(N,F,D,q){typeof D=="string"?D=D.toUpperCase():D===void 0&&(D="RSASSA-PKCS1-V1_5"),q===void 0&&(q={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in q||(q._parseAllDigestBytes=!0),D==="RSASSA-PKCS1-V1_5"?D={verify:function(H,Q){Q=y(Q,R,!0);var J=n.fromDer(Q,{parseAllBytes:q._parseAllDigestBytes}),X={},re=[];if(!n.validate(J,E,X,re)){var se=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw se.errors=re,se}var de=n.derToOid(X.algorithmIdentifier);if(!(de===t.oids.md2||de===t.oids.md5||de===t.oids.sha1||de===t.oids.sha224||de===t.oids.sha256||de===t.oids.sha384||de===t.oids.sha512||de===t.oids["sha512-224"]||de===t.oids["sha512-256"])){var se=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw se.oid=de,se}if((de===t.oids.md2||de===t.oids.md5)&&!("parameters"in X))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return H===X.digest}}:(D==="NONE"||D==="NULL"||D===null)&&(D={verify:function(H,Q){return Q=y(Q,R,!0),H===Q}});var j=c.rsa.decrypt(F,R,!0,!1);return D.verify(N,j,R.n.bitLength())},R},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(h,l,R,N,F,D,q,j){var H={n:h,e:l,d:R,p:N,q:F,dP:D,dQ:q,qInv:j};return H.decrypt=function(Q,J,X){typeof J=="string"?J=J.toUpperCase():J===void 0&&(J="RSAES-PKCS1-V1_5");var re=c.rsa.decrypt(Q,H,!1,!1);if(J==="RSAES-PKCS1-V1_5")J={decode:y};else if(J==="RSA-OAEP"||J==="RSAES-OAEP")J={decode:function(se,de){return t.pkcs1.decode_rsa_oaep(de,se,X)}};else if(["RAW","NONE","NULL",null].indexOf(J)!==-1)J={decode:function(se){return se}};else throw new Error('Unsupported encryption scheme: "'+J+'".');return J.decode(re,H,!1)},H.sign=function(Q,J){var X=!1;typeof J=="string"&&(J=J.toUpperCase()),J===void 0||J==="RSASSA-PKCS1-V1_5"?(J={encode:p},X=1):(J==="NONE"||J==="NULL"||J===null)&&(J={encode:function(){return Q}},X=1);var re=J.encode(Q,H.n.bitLength());return c.rsa.encrypt(re,H,X)},H},c.wrapRsaPrivateKey=function(h){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(0).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(c.oids.rsaEncryption).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(h).getBytes())])},c.privateKeyFromAsn1=function(h){var l={},R=[];if(n.validate(h,a,l,R)&&(h=n.fromDer(t.util.createBuffer(l.privateKey))),l={},R=[],!n.validate(h,g,l,R)){var N=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw N.errors=R,N}var F,D,q,j,H,Q,J,X;return F=t.util.createBuffer(l.privateKeyModulus).toHex(),D=t.util.createBuffer(l.privateKeyPublicExponent).toHex(),q=t.util.createBuffer(l.privateKeyPrivateExponent).toHex(),j=t.util.createBuffer(l.privateKeyPrime1).toHex(),H=t.util.createBuffer(l.privateKeyPrime2).toHex(),Q=t.util.createBuffer(l.privateKeyExponent1).toHex(),J=t.util.createBuffer(l.privateKeyExponent2).toHex(),X=t.util.createBuffer(l.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new e(F,16),new e(D,16),new e(q,16),new e(j,16),new e(H,16),new e(Q,16),new e(J,16),new e(X,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(h){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(0).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.n)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.e)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.d)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.p)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.q)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.dP)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.dQ)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.qInv))])},c.publicKeyFromAsn1=function(h){var l={},R=[];if(n.validate(h,A,l,R)){var N=n.derToOid(l.publicKeyOid);if(N!==c.oids.rsaEncryption){var F=new Error("Cannot read public key. Unknown OID.");throw F.oid=N,F}h=l.rsaPublicKey}if(R=[],!n.validate(h,f,l,R)){var F=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw F.errors=R,F}var D=t.util.createBuffer(l.publicKeyModulus).toHex(),q=t.util.createBuffer(l.publicKeyExponent).toHex();return c.setRsaPublicKey(new e(D,16),new e(q,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(h){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(c.oids.rsaEncryption).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(h)])])},c.publicKeyToRSAPublicKey=function(h){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.n)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i(h.e))])};function m(h,l,R){var N=t.util.createBuffer(),F=Math.ceil(l.n.bitLength()/8);if(h.length>F-11){var D=new Error("Message is too long for PKCS#1 v1.5 padding.");throw D.length=h.length,D.max=F-11,D}N.putByte(0),N.putByte(R);var q=F-3-h.length,j;if(R===0||R===1){j=R===0?0:255;for(var H=0;H<q;++H)N.putByte(j)}else for(;q>0;){for(var Q=0,J=t.random.getBytes(q),H=0;H<q;++H)j=J.charCodeAt(H),j===0?++Q:N.putByte(j);q=Q}return N.putByte(0),N.putBytes(h),N}function y(h,l,R,N){var F=Math.ceil(l.n.bitLength()/8),D=t.util.createBuffer(h),q=D.getByte(),j=D.getByte();if(q!==0||R&&j!==0&&j!==1||!R&&j!=2||R&&j===0&&typeof N>"u")throw new Error("Encryption block is invalid.");var H=0;if(j===0){H=F-3-N;for(var Q=0;Q<H;++Q)if(D.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(j===1)for(H=0;D.length()>1;){if(D.getByte()!==255){--D.read;break}++H}else if(j===2)for(H=0;D.length()>1;){if(D.getByte()===0){--D.read;break}++H}var J=D.getByte();if(J!==0||H!==F-3-D.length())throw new Error("Encryption block is invalid.");return D.getBytes()}function S(h,l,R){typeof l=="function"&&(R=l,l={}),l=l||{};var N={algorithm:{name:l.algorithm||"PRIMEINC",options:{workers:l.workers||2,workLoad:l.workLoad||100,workerScript:l.workerScript}}};"prng"in l&&(N.prng=l.prng),F();function F(){D(h.pBits,function(j,H){if(j)return R(j);if(h.p=H,h.q!==null)return q(j,h.q);D(h.qBits,q)})}function D(j,H){t.prime.generateProbablePrime(j,N,H)}function q(j,H){if(j)return R(j);if(h.q=H,h.p.compareTo(h.q)<0){var Q=h.p;h.p=h.q,h.q=Q}if(h.p.subtract(e.ONE).gcd(h.e).compareTo(e.ONE)!==0){h.p=null,F();return}if(h.q.subtract(e.ONE).gcd(h.e).compareTo(e.ONE)!==0){h.q=null,D(h.qBits,q);return}if(h.p1=h.p.subtract(e.ONE),h.q1=h.q.subtract(e.ONE),h.phi=h.p1.multiply(h.q1),h.phi.gcd(h.e).compareTo(e.ONE)!==0){h.p=h.q=null,F();return}if(h.n=h.p.multiply(h.q),h.n.bitLength()!==h.bits){h.q=null,D(h.qBits,q);return}var J=h.e.modInverse(h.phi);h.keys={privateKey:c.rsa.setPrivateKey(h.n,h.e,J,h.p,h.q,J.mod(h.p1),J.mod(h.q1),h.q.modInverse(h.p)),publicKey:c.rsa.setPublicKey(h.n,h.e)},R(null,h.keys)}}function i(h){var l=h.toString(16);l[0]>="8"&&(l="00"+l);var R=t.util.hexToBytes(l);return R.length>1&&(R.charCodeAt(0)===0&&!(R.charCodeAt(1)&128)||R.charCodeAt(0)===255&&(R.charCodeAt(1)&128)===128)?R.substr(1):R}function v(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}function C(h){return t.util.isNodejs&&typeof r[h]=="function"}function I(h){return typeof o.globalScope<"u"&&typeof o.globalScope.crypto=="object"&&typeof o.globalScope.crypto.subtle=="object"&&typeof o.globalScope.crypto.subtle[h]=="function"}function B(h){return typeof o.globalScope<"u"&&typeof o.globalScope.msCrypto=="object"&&typeof o.globalScope.msCrypto.subtle=="object"&&typeof o.globalScope.msCrypto.subtle[h]=="function"}function T(h){for(var l=t.util.hexToBytes(h.toString(16)),R=new Uint8Array(l.length),N=0;N<l.length;++N)R[N]=l.charCodeAt(N);return R}return ni}var ai,Ro;function bu(){if(Ro)return ai;Ro=1;var t=me();if(sr(),Tt(),oa(),Ut(),or(),gs(),Rr(),yt(),_u(),ua(),Ae(),typeof e>"u")var e=t.jsbn.BigInteger;var r=t.asn1,n=t.pki=t.pki||{};ai=n.pbe=t.pbe=t.pbe||{};var o=n.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},a={name:"pkcs-12PbeParams",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"iterations"}]};n.encryptPrivateKeyInfo=function(p,s,m){m=m||{},m.saltSize=m.saltSize||8,m.count=m.count||2048,m.algorithm=m.algorithm||"aes128",m.prfAlgorithm=m.prfAlgorithm||"sha1";var y=t.random.getBytesSync(m.saltSize),S=m.count,i=r.integerToDer(S),v,C,I;if(m.algorithm.indexOf("aes")===0||m.algorithm==="des"){var B,T,h;switch(m.algorithm){case"aes128":v=16,B=16,T=o["aes128-CBC"],h=t.aes.createEncryptionCipher;break;case"aes192":v=24,B=16,T=o["aes192-CBC"],h=t.aes.createEncryptionCipher;break;case"aes256":v=32,B=16,T=o["aes256-CBC"],h=t.aes.createEncryptionCipher;break;case"des":v=8,B=8,T=o.desCBC,h=t.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=m.algorithm,l}var R="hmacWith"+m.prfAlgorithm.toUpperCase(),N=A(R),F=t.pkcs5.pbkdf2(s,y,S,v,N),D=t.random.getBytesSync(B),q=h(F);q.start(D),q.update(r.toDer(p)),q.finish(),I=q.output.getBytes();var j=E(y,i,v,R);C=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(o.pkcs5PBES2).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(o.pkcs5PBKDF2).getBytes()),j]),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(T).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,D)])])])}else if(m.algorithm==="3des"){v=24;var H=new t.util.ByteBuffer(y),F=n.pbe.generatePkcs12Key(s,H,1,S,v),D=n.pbe.generatePkcs12Key(s,H,2,S,v),q=t.des.createEncryptionCipher(F);q.start(D),q.update(r.toDer(p)),q.finish(),I=q.output.getBytes(),C=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(o["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,y),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,i.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=m.algorithm,l}var Q=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[C,r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,I)]);return Q},n.decryptPrivateKeyInfo=function(p,s){var m=null,y={},S=[];if(!r.validate(p,c,y,S)){var i=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=S,i}var v=r.derToOid(y.encryptionOid),C=n.pbe.getCipher(v,y.encryptionParams,s),I=t.util.createBuffer(y.encryptedData);return C.update(I),C.finish()&&(m=r.fromDer(C.output)),m},n.encryptedPrivateKeyToPem=function(p,s){var m={type:"ENCRYPTED PRIVATE KEY",body:r.toDer(p).getBytes()};return t.pem.encode(m,{maxline:s})},n.encryptedPrivateKeyFromPem=function(p){var s=t.pem.decode(p)[0];if(s.type!=="ENCRYPTED PRIVATE KEY"){var m=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw m.headerType=s.type,m}if(s.procType&&s.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return r.fromDer(s.body)},n.encryptRsaPrivateKey=function(p,s,m){if(m=m||{},!m.legacy){var y=n.wrapRsaPrivateKey(n.privateKeyToAsn1(p));return y=n.encryptPrivateKeyInfo(y,s,m),n.encryptedPrivateKeyToPem(y)}var S,i,v,C;switch(m.algorithm){case"aes128":S="AES-128-CBC",v=16,i=t.random.getBytesSync(16),C=t.aes.createEncryptionCipher;break;case"aes192":S="AES-192-CBC",v=24,i=t.random.getBytesSync(16),C=t.aes.createEncryptionCipher;break;case"aes256":S="AES-256-CBC",v=32,i=t.random.getBytesSync(16),C=t.aes.createEncryptionCipher;break;case"3des":S="DES-EDE3-CBC",v=24,i=t.random.getBytesSync(8),C=t.des.createEncryptionCipher;break;case"des":S="DES-CBC",v=8,i=t.random.getBytesSync(8),C=t.des.createEncryptionCipher;break;default:var I=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+m.algorithm+'".');throw I.algorithm=m.algorithm,I}var B=t.pbe.opensslDeriveBytes(s,i.substr(0,8),v),T=C(B);T.start(i),T.update(r.toDer(n.privateKeyToAsn1(p))),T.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:S,parameters:t.util.bytesToHex(i).toUpperCase()},body:T.output.getBytes()};return t.pem.encode(h)},n.decryptRsaPrivateKey=function(p,s){var m=null,y=t.pem.decode(p)[0];if(y.type!=="ENCRYPTED PRIVATE KEY"&&y.type!=="PRIVATE KEY"&&y.type!=="RSA PRIVATE KEY"){var S=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw S.headerType=S,S}if(y.procType&&y.procType.type==="ENCRYPTED"){var i,v;switch(y.dekInfo.algorithm){case"DES-CBC":i=8,v=t.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,v=t.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,v=t.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,v=t.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,v=t.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,v=function(h){return t.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":i=8,v=function(h){return t.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":i=16,v=function(h){return t.rc2.createDecryptionCipher(h,128)};break;default:var S=new Error('Could not decrypt private key; unsupported encryption algorithm "'+y.dekInfo.algorithm+'".');throw S.algorithm=y.dekInfo.algorithm,S}var C=t.util.hexToBytes(y.dekInfo.parameters),I=t.pbe.opensslDeriveBytes(s,C.substr(0,8),i),B=v(I);if(B.start(C),B.update(t.util.createBuffer(y.body)),B.finish())m=B.output.getBytes();else return m}else m=y.body;return y.type==="ENCRYPTED PRIVATE KEY"?m=n.decryptPrivateKeyInfo(r.fromDer(m),s):m=r.fromDer(m),m!==null&&(m=n.privateKeyFromAsn1(m)),m},n.pbe.generatePkcs12Key=function(p,s,m,y,S,i){var v,C;if(typeof i>"u"||i===null){if(!("sha1"in t.md))throw new Error('"sha1" hash algorithm unavailable.');i=t.md.sha1.create()}var I=i.digestLength,B=i.blockLength,T=new t.util.ByteBuffer,h=new t.util.ByteBuffer;if(p!=null){for(C=0;C<p.length;C++)h.putInt16(p.charCodeAt(C));h.putInt16(0)}var l=h.length(),R=s.length(),N=new t.util.ByteBuffer;N.fillWithByte(m,B);var F=B*Math.ceil(R/B),D=new t.util.ByteBuffer;for(C=0;C<F;C++)D.putByte(s.at(C%R));var q=B*Math.ceil(l/B),j=new t.util.ByteBuffer;for(C=0;C<q;C++)j.putByte(h.at(C%l));var H=D;H.putBuffer(j);for(var Q=Math.ceil(S/I),J=1;J<=Q;J++){var X=new t.util.ByteBuffer;X.putBytes(N.bytes()),X.putBytes(H.bytes());for(var re=0;re<y;re++)i.start(),i.update(X.getBytes()),X=i.digest();var se=new t.util.ByteBuffer;for(C=0;C<B;C++)se.putByte(X.at(C%I));var de=Math.ceil(R/B)+Math.ceil(l/B),ye=new t.util.ByteBuffer;for(v=0;v<de;v++){var _e=new t.util.ByteBuffer(H.getBytes(B)),W=511;for(C=se.length()-1;C>=0;C--)W=W>>8,W+=se.at(C)+_e.at(C),_e.setAt(C,W&255);ye.putBuffer(_e)}H=ye,T.putBuffer(X)}return T.truncate(T.length()-S),T},n.pbe.getCipher=function(p,s,m){switch(p){case n.oids.pkcs5PBES2:return n.pbe.getCipherForPBES2(p,s,m);case n.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case n.oids["pbewithSHAAnd40BitRC2-CBC"]:return n.pbe.getCipherForPKCS12PBE(p,s,m);default:var y=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw y.oid=p,y.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],y}},n.pbe.getCipherForPBES2=function(p,s,m){var y={},S=[];if(!r.validate(s,u,y,S)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=S,i}if(p=r.derToOid(y.kdfOid),p!==n.oids.pkcs5PBKDF2){var i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw i.oid=p,i.supportedOids=["pkcs5PBKDF2"],i}if(p=r.derToOid(y.encOid),p!==n.oids["aes128-CBC"]&&p!==n.oids["aes192-CBC"]&&p!==n.oids["aes256-CBC"]&&p!==n.oids["des-EDE3-CBC"]&&p!==n.oids.desCBC){var i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw i.oid=p,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i}var v=y.kdfSalt,C=t.util.createBuffer(y.kdfIterationCount);C=C.getInt(C.length()<<3);var I,B;switch(n.oids[p]){case"aes128-CBC":I=16,B=t.aes.createDecryptionCipher;break;case"aes192-CBC":I=24,B=t.aes.createDecryptionCipher;break;case"aes256-CBC":I=32,B=t.aes.createDecryptionCipher;break;case"des-EDE3-CBC":I=24,B=t.des.createDecryptionCipher;break;case"desCBC":I=8,B=t.des.createDecryptionCipher;break}var T=f(y.prfOid),h=t.pkcs5.pbkdf2(m,v,C,I,T),l=y.encIv,R=B(h);return R.start(l),R},n.pbe.getCipherForPKCS12PBE=function(p,s,m){var y={},S=[];if(!r.validate(s,a,y,S)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=S,i}var v=t.util.createBuffer(y.salt),C=t.util.createBuffer(y.iterations);C=C.getInt(C.length()<<3);var I,B,T;switch(p){case n.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:I=24,B=8,T=t.des.startDecrypting;break;case n.oids["pbewithSHAAnd40BitRC2-CBC"]:I=5,B=8,T=function(F,D){var q=t.rc2.createDecryptionCipher(F,40);return q.start(D,null),q};break;default:var i=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw i.oid=p,i}var h=f(y.prfOid),l=n.pbe.generatePkcs12Key(m,v,1,C,I,h);h.start();var R=n.pbe.generatePkcs12Key(m,v,2,C,B,h);return T(l,R)},n.pbe.opensslDeriveBytes=function(p,s,m,y){if(typeof y>"u"||y===null){if(!("md5"in t.md))throw new Error('"md5" hash algorithm unavailable.');y=t.md.md5.create()}s===null&&(s="");for(var S=[g(y,p+s)],i=16,v=1;i<m;++v,i+=16)S.push(g(y,S[v-1]+p+s));return S.join("").substr(0,m)};function g(p,s){return p.start().update(s).digest().getBytes()}function f(p){var s;if(!p)s="hmacWithSHA1";else if(s=n.oids[r.derToOid(p)],!s){var m=new Error("Unsupported PRF OID.");throw m.oid=p,m.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],m}return A(s)}function A(p){var s=t.md;switch(p){case"hmacWithSHA224":s=t.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":p=p.substr(8).toLowerCase();break;default:var m=new Error("Unsupported PRF algorithm.");throw m.algorithm=p,m.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],m}if(!s||!(p in s))throw new Error("Unknown hash algorithm: "+p);return s[p].create()}function E(p,s,m,y){var S=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,p),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,s.getBytes())]);return y!=="hmacWithSHA1"&&S.value.push(r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,t.util.hexToBytes(m.toString(16))),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(n.oids[y]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.NULL,!1,"")])),S}return ai}var ii={exports:{}},si={exports:{}},No;function Bu(){if(No)return si.exports;No=1;var t=me();Tt(),Ae();var e=t.asn1,r=si.exports=t.pkcs7asn1=t.pkcs7asn1||{};t.pkcs7=t.pkcs7||{},t.pkcs7.asn1=r;var n={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=n;var o={name:"EncryptedContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(o)},r.encryptedDataValidator={name:"EncryptedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"}].concat(o)};var c={name:"SignerInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};return r.signedDataValidator={name:"SignedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},n,{name:"SignedData.Certificates",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]},si.exports}var oi={exports:{}},ci={exports:{}},Po;function Ru(){if(Po)return ci.exports;Po=1;var t=me();Ae(),t.mgf=t.mgf||{};var e=ci.exports=t.mgf.mgf1=t.mgf1=t.mgf1||{};return e.create=function(r){var n={generate:function(o,c){for(var u=new t.util.ByteBuffer,a=Math.ceil(c/r.digestLength),g=0;g<a;g++){var f=new t.util.ByteBuffer;f.putInt32(g),r.start(),r.update(o+f.getBytes()),u.putBuffer(r.digest())}return u.truncate(u.length()-c),u.getBytes()}};return n},ci.exports}var ui,Oo;function td(){if(Oo)return ui;Oo=1;var t=me();return Ru(),ui=t.mgf=t.mgf||{},t.mgf.mgf1=t.mgf1,ui}var li={exports:{}},Uo;function vs(){if(Uo)return li.exports;Uo=1;var t=me();yt(),Ae();var e=li.exports=t.pss=t.pss||{};return e.create=function(r){arguments.length===3&&(r={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var n=r.md,o=r.mgf,c=n.digestLength,u=r.salt||null;typeof u=="string"&&(u=t.util.createBuffer(u));var a;if("saltLength"in r)a=r.saltLength;else if(u!==null)a=u.length();else throw new Error("Salt length not specified or specific salt not given.");if(u!==null&&u.length()!==a)throw new Error("Given salt length does not match length of given salt.");var g=r.prng||t.random,f={};return f.encode=function(A,E){var p,s=E-1,m=Math.ceil(s/8),y=A.digest().getBytes();if(m<c+a+2)throw new Error("Message is too long to encrypt.");var S;u===null?S=g.getBytesSync(a):S=u.bytes();var i=new t.util.ByteBuffer;i.fillWithByte(0,8),i.putBytes(y),i.putBytes(S),n.start(),n.update(i.getBytes());var v=n.digest().getBytes(),C=new t.util.ByteBuffer;C.fillWithByte(0,m-a-c-2),C.putByte(1),C.putBytes(S);var I=C.getBytes(),B=m-c-1,T=o.generate(v,B),h="";for(p=0;p<B;p++)h+=String.fromCharCode(I.charCodeAt(p)^T.charCodeAt(p));var l=65280>>8*m-s&255;return h=String.fromCharCode(h.charCodeAt(0)&~l)+h.substr(1),h+v+String.fromCharCode(188)},f.verify=function(A,E,p){var s,m=p-1,y=Math.ceil(m/8);if(E=E.substr(-y),y<c+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(E.charCodeAt(y-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var S=y-c-1,i=E.substr(0,S),v=E.substr(S,c),C=65280>>8*y-m&255;if(i.charCodeAt(0)&C)throw new Error("Bits beyond keysize not zero as expected.");var I=o.generate(v,S),B="";for(s=0;s<S;s++)B+=String.fromCharCode(i.charCodeAt(s)^I.charCodeAt(s));B=String.fromCharCode(B.charCodeAt(0)&~C)+B.substr(1);var T=y-c-a-2;for(s=0;s<T;s++)if(B.charCodeAt(s)!==0)throw new Error("Leftmost octets not zero as expected");if(B.charCodeAt(T)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var h=B.substr(-a),l=new t.util.ByteBuffer;l.fillWithByte(0,8),l.putBytes(A),l.putBytes(h),n.start(),n.update(l.getBytes());var R=n.digest().getBytes();return v===R},f},li.exports}var ko;function ms(){if(ko)return oi.exports;ko=1;var t=me();sr(),Tt(),oa(),Ut(),td(),or(),Rr(),vs(),ua(),Ae();var e=t.asn1,r=oi.exports=t.pki=t.pki||{},n=r.oids,o={};o.CN=n.commonName,o.commonName="CN",o.C=n.countryName,o.countryName="C",o.L=n.localityName,o.localityName="L",o.ST=n.stateOrProvinceName,o.stateOrProvinceName="ST",o.O=n.organizationName,o.organizationName="O",o.OU=n.organizationalUnitName,o.organizationalUnitName="OU",o.E=n.emailAddress,o.emailAddress="E";var c=t.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},a={name:"rsapss",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},g={name:"CertificationRequestInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[g,{name:"CertificationRequest.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};r.RDNAttributesAsArray=function(T,h){for(var l=[],R,N,F,D=0;D<T.value.length;++D){R=T.value[D];for(var q=0;q<R.value.length;++q)F={},N=R.value[q],F.type=e.derToOid(N.value[0].value),F.value=N.value[1].value,F.valueTagClass=N.value[1].type,F.type in n&&(F.name=n[F.type],F.name in o&&(F.shortName=o[F.name])),h&&(h.update(F.type),h.update(F.value)),l.push(F)}return l},r.CRIAttributesAsArray=function(T){for(var h=[],l=0;l<T.length;++l)for(var R=T[l],N=e.derToOid(R.value[0].value),F=R.value[1].value,D=0;D<F.length;++D){var q={};if(q.type=N,q.value=F[D].value,q.valueTagClass=F[D].type,q.type in n&&(q.name=n[q.type],q.name in o&&(q.shortName=o[q.name])),q.type===n.extensionRequest){q.extensions=[];for(var j=0;j<q.value.length;++j)q.extensions.push(r.certificateExtensionFromAsn1(q.value[j]))}h.push(q)}return h};function A(T,h){typeof h=="string"&&(h={shortName:h});for(var l=null,R,N=0;l===null&&N<T.attributes.length;++N)R=T.attributes[N],(h.type&&h.type===R.type||h.name&&h.name===R.name||h.shortName&&h.shortName===R.shortName)&&(l=R);return l}var E=function(T,h,l){var R={};if(T!==n["RSASSA-PSS"])return R;l&&(R={hash:{algorithmOid:n.sha1},mgf:{algorithmOid:n.mgf1,hash:{algorithmOid:n.sha1}},saltLength:20});var N={},F=[];if(!e.validate(h,a,N,F)){var D=new Error("Cannot read RSASSA-PSS parameter block.");throw D.errors=F,D}return N.hashOid!==void 0&&(R.hash=R.hash||{},R.hash.algorithmOid=e.derToOid(N.hashOid)),N.maskGenOid!==void 0&&(R.mgf=R.mgf||{},R.mgf.algorithmOid=e.derToOid(N.maskGenOid),R.mgf.hash=R.mgf.hash||{},R.mgf.hash.algorithmOid=e.derToOid(N.maskGenHashOid)),N.saltLength!==void 0&&(R.saltLength=N.saltLength.charCodeAt(0)),R},p=function(T){switch(n[T.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return t.md.sha1.create();case"md5WithRSAEncryption":return t.md.md5.create();case"sha256WithRSAEncryption":return t.md.sha256.create();case"sha384WithRSAEncryption":return t.md.sha384.create();case"sha512WithRSAEncryption":return t.md.sha512.create();case"RSASSA-PSS":return t.md.sha256.create();default:var h=new Error("Could not compute "+T.type+" digest. Unknown signature OID.");throw h.signatureOid=T.signatureOid,h}},s=function(T){var h=T.certificate,l;switch(h.signatureOid){case n.sha1WithRSAEncryption:case n.sha1WithRSASignature:break;case n["RSASSA-PSS"]:var R,N;if(R=n[h.signatureParameters.mgf.hash.algorithmOid],R===void 0||t.md[R]===void 0){var F=new Error("Unsupported MGF hash function.");throw F.oid=h.signatureParameters.mgf.hash.algorithmOid,F.name=R,F}if(N=n[h.signatureParameters.mgf.algorithmOid],N===void 0||t.mgf[N]===void 0){var F=new Error("Unsupported MGF function.");throw F.oid=h.signatureParameters.mgf.algorithmOid,F.name=N,F}if(N=t.mgf[N].create(t.md[R].create()),R=n[h.signatureParameters.hash.algorithmOid],R===void 0||t.md[R]===void 0){var F=new Error("Unsupported RSASSA-PSS hash function.");throw F.oid=h.signatureParameters.hash.algorithmOid,F.name=R,F}l=t.pss.create(t.md[R].create(),N,h.signatureParameters.saltLength);break}return h.publicKey.verify(T.md.digest().getBytes(),T.signature,l)};r.certificateFromPem=function(T,h,l){var R=t.pem.decode(T)[0];if(R.type!=="CERTIFICATE"&&R.type!=="X509 CERTIFICATE"&&R.type!=="TRUSTED CERTIFICATE"){var N=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw N.headerType=R.type,N}if(R.procType&&R.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var F=e.fromDer(R.body,l);return r.certificateFromAsn1(F,h)},r.certificateToPem=function(T,h){var l={type:"CERTIFICATE",body:e.toDer(r.certificateToAsn1(T)).getBytes()};return t.pem.encode(l,{maxline:h})},r.publicKeyFromPem=function(T){var h=t.pem.decode(T)[0];if(h.type!=="PUBLIC KEY"&&h.type!=="RSA PUBLIC KEY"){var l=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw l.headerType=h.type,l}if(h.procType&&h.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var R=e.fromDer(h.body);return r.publicKeyFromAsn1(R)},r.publicKeyToPem=function(T,h){var l={type:"PUBLIC KEY",body:e.toDer(r.publicKeyToAsn1(T)).getBytes()};return t.pem.encode(l,{maxline:h})},r.publicKeyToRSAPublicKeyPem=function(T,h){var l={type:"RSA PUBLIC KEY",body:e.toDer(r.publicKeyToRSAPublicKey(T)).getBytes()};return t.pem.encode(l,{maxline:h})},r.getPublicKeyFingerprint=function(T,h){h=h||{};var l=h.md||t.md.sha1.create(),R=h.type||"RSAPublicKey",N;switch(R){case"RSAPublicKey":N=e.toDer(r.publicKeyToRSAPublicKey(T)).getBytes();break;case"SubjectPublicKeyInfo":N=e.toDer(r.publicKeyToAsn1(T)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+h.type+'".')}l.start(),l.update(N);var F=l.digest();if(h.encoding==="hex"){var D=F.toHex();return h.delimiter?D.match(/.{2}/g).join(h.delimiter):D}else{if(h.encoding==="binary")return F.getBytes();if(h.encoding)throw new Error('Unknown encoding "'+h.encoding+'".')}return F},r.certificationRequestFromPem=function(T,h,l){var R=t.pem.decode(T)[0];if(R.type!=="CERTIFICATE REQUEST"){var N=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw N.headerType=R.type,N}if(R.procType&&R.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var F=e.fromDer(R.body,l);return r.certificationRequestFromAsn1(F,h)},r.certificationRequestToPem=function(T,h){var l={type:"CERTIFICATE REQUEST",body:e.toDer(r.certificationRequestToAsn1(T)).getBytes()};return t.pem.encode(l,{maxline:h})},r.createCertificate=function(){var T={};return T.version=2,T.serialNumber="00",T.signatureOid=null,T.signature=null,T.siginfo={},T.siginfo.algorithmOid=null,T.validity={},T.validity.notBefore=new Date,T.validity.notAfter=new Date,T.issuer={},T.issuer.getField=function(h){return A(T.issuer,h)},T.issuer.addField=function(h){y([h]),T.issuer.attributes.push(h)},T.issuer.attributes=[],T.issuer.hash=null,T.subject={},T.subject.getField=function(h){return A(T.subject,h)},T.subject.addField=function(h){y([h]),T.subject.attributes.push(h)},T.subject.attributes=[],T.subject.hash=null,T.extensions=[],T.publicKey=null,T.md=null,T.setSubject=function(h,l){y(h),T.subject.attributes=h,delete T.subject.uniqueId,l&&(T.subject.uniqueId=l),T.subject.hash=null},T.setIssuer=function(h,l){y(h),T.issuer.attributes=h,delete T.issuer.uniqueId,l&&(T.issuer.uniqueId=l),T.issuer.hash=null},T.setExtensions=function(h){for(var l=0;l<h.length;++l)S(h[l],{cert:T});T.extensions=h},T.getExtension=function(h){typeof h=="string"&&(h={name:h});for(var l=null,R,N=0;l===null&&N<T.extensions.length;++N)R=T.extensions[N],(h.id&&R.id===h.id||h.name&&R.name===h.name)&&(l=R);return l},T.sign=function(h,l){T.md=l||t.md.sha1.create();var R=n[T.md.algorithm+"WithRSAEncryption"];if(!R){var N=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw N.algorithm=T.md.algorithm,N}T.signatureOid=T.siginfo.algorithmOid=R,T.tbsCertificate=r.getTBSCertificate(T);var F=e.toDer(T.tbsCertificate);T.md.update(F.getBytes()),T.signature=h.sign(T.md)},T.verify=function(h){var l=!1;if(!T.issued(h)){var R=h.issuer,N=T.subject,F=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw F.expectedIssuer=N.attributes,F.actualIssuer=R.attributes,F}var D=h.md;if(D===null){D=p({signatureOid:h.signatureOid,type:"certificate"});var q=h.tbsCertificate||r.getTBSCertificate(h),j=e.toDer(q);D.update(j.getBytes())}return D!==null&&(l=s({certificate:T,md:D,signature:h.signature})),l},T.isIssuer=function(h){var l=!1,R=T.issuer,N=h.subject;if(R.hash&&N.hash)l=R.hash===N.hash;else if(R.attributes.length===N.attributes.length){l=!0;for(var F,D,q=0;l&&q<R.attributes.length;++q)F=R.attributes[q],D=N.attributes[q],(F.type!==D.type||F.value!==D.value)&&(l=!1)}return l},T.issued=function(h){return h.isIssuer(T)},T.generateSubjectKeyIdentifier=function(){return r.getPublicKeyFingerprint(T.publicKey,{type:"RSAPublicKey"})},T.verifySubjectKeyIdentifier=function(){for(var h=n.subjectKeyIdentifier,l=0;l<T.extensions.length;++l){var R=T.extensions[l];if(R.id===h){var N=T.generateSubjectKeyIdentifier().getBytes();return t.util.hexToBytes(R.subjectKeyIdentifier)===N}}return!1},T},r.certificateFromAsn1=function(T,h){var l={},R=[];if(!e.validate(T,u,l,R)){var N=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw N.errors=R,N}var F=e.derToOid(l.publicKeyOid);if(F!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var D=r.createCertificate();D.version=l.certVersion?l.certVersion.charCodeAt(0):0;var q=t.util.createBuffer(l.certSerialNumber);D.serialNumber=q.toHex(),D.signatureOid=t.asn1.derToOid(l.certSignatureOid),D.signatureParameters=E(D.signatureOid,l.certSignatureParams,!0),D.siginfo.algorithmOid=t.asn1.derToOid(l.certinfoSignatureOid),D.siginfo.parameters=E(D.siginfo.algorithmOid,l.certinfoSignatureParams,!1),D.signature=l.certSignature;var j=[];if(l.certValidity1UTCTime!==void 0&&j.push(e.utcTimeToDate(l.certValidity1UTCTime)),l.certValidity2GeneralizedTime!==void 0&&j.push(e.generalizedTimeToDate(l.certValidity2GeneralizedTime)),l.certValidity3UTCTime!==void 0&&j.push(e.utcTimeToDate(l.certValidity3UTCTime)),l.certValidity4GeneralizedTime!==void 0&&j.push(e.generalizedTimeToDate(l.certValidity4GeneralizedTime)),j.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(j.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(D.validity.notBefore=j[0],D.validity.notAfter=j[1],D.tbsCertificate=l.tbsCertificate,h){D.md=p({signatureOid:D.signatureOid,type:"certificate"});var H=e.toDer(D.tbsCertificate);D.md.update(H.getBytes())}var Q=t.md.sha1.create(),J=e.toDer(l.certIssuer);Q.update(J.getBytes()),D.issuer.getField=function(se){return A(D.issuer,se)},D.issuer.addField=function(se){y([se]),D.issuer.attributes.push(se)},D.issuer.attributes=r.RDNAttributesAsArray(l.certIssuer),l.certIssuerUniqueId&&(D.issuer.uniqueId=l.certIssuerUniqueId),D.issuer.hash=Q.digest().toHex();var X=t.md.sha1.create(),re=e.toDer(l.certSubject);return X.update(re.getBytes()),D.subject.getField=function(se){return A(D.subject,se)},D.subject.addField=function(se){y([se]),D.subject.attributes.push(se)},D.subject.attributes=r.RDNAttributesAsArray(l.certSubject),l.certSubjectUniqueId&&(D.subject.uniqueId=l.certSubjectUniqueId),D.subject.hash=X.digest().toHex(),l.certExtensions?D.extensions=r.certificateExtensionsFromAsn1(l.certExtensions):D.extensions=[],D.publicKey=r.publicKeyFromAsn1(l.subjectPublicKeyInfo),D},r.certificateExtensionsFromAsn1=function(T){for(var h=[],l=0;l<T.value.length;++l)for(var R=T.value[l],N=0;N<R.value.length;++N)h.push(r.certificateExtensionFromAsn1(R.value[N]));return h},r.certificateExtensionFromAsn1=function(T){var h={};if(h.id=e.derToOid(T.value[0].value),h.critical=!1,T.value[1].type===e.Type.BOOLEAN?(h.critical=T.value[1].value.charCodeAt(0)!==0,h.value=T.value[2].value):h.value=T.value[1].value,h.id in n){if(h.name=n[h.id],h.name==="keyUsage"){var l=e.fromDer(h.value),R=0,N=0;l.value.length>1&&(R=l.value.charCodeAt(1),N=l.value.length>2?l.value.charCodeAt(2):0),h.digitalSignature=(R&128)===128,h.nonRepudiation=(R&64)===64,h.keyEncipherment=(R&32)===32,h.dataEncipherment=(R&16)===16,h.keyAgreement=(R&8)===8,h.keyCertSign=(R&4)===4,h.cRLSign=(R&2)===2,h.encipherOnly=(R&1)===1,h.decipherOnly=(N&128)===128}else if(h.name==="basicConstraints"){var l=e.fromDer(h.value);l.value.length>0&&l.value[0].type===e.Type.BOOLEAN?h.cA=l.value[0].value.charCodeAt(0)!==0:h.cA=!1;var F=null;l.value.length>0&&l.value[0].type===e.Type.INTEGER?F=l.value[0].value:l.value.length>1&&(F=l.value[1].value),F!==null&&(h.pathLenConstraint=e.derToInteger(F))}else if(h.name==="extKeyUsage")for(var l=e.fromDer(h.value),D=0;D<l.value.length;++D){var q=e.derToOid(l.value[D].value);q in n?h[n[q]]=!0:h[q]=!0}else if(h.name==="nsCertType"){var l=e.fromDer(h.value),R=0;l.value.length>1&&(R=l.value.charCodeAt(1)),h.client=(R&128)===128,h.server=(R&64)===64,h.email=(R&32)===32,h.objsign=(R&16)===16,h.reserved=(R&8)===8,h.sslCA=(R&4)===4,h.emailCA=(R&2)===2,h.objCA=(R&1)===1}else if(h.name==="subjectAltName"||h.name==="issuerAltName"){h.altNames=[];for(var j,l=e.fromDer(h.value),H=0;H<l.value.length;++H){j=l.value[H];var Q={type:j.type,value:j.value};switch(h.altNames.push(Q),j.type){case 1:case 2:case 6:break;case 7:Q.ip=t.util.bytesToIP(j.value);break;case 8:Q.oid=e.derToOid(j.value);break}}}else if(h.name==="subjectKeyIdentifier"){var l=e.fromDer(h.value);h.subjectKeyIdentifier=t.util.bytesToHex(l.value)}}return h},r.certificationRequestFromAsn1=function(T,h){var l={},R=[];if(!e.validate(T,f,l,R)){var N=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw N.errors=R,N}var F=e.derToOid(l.publicKeyOid);if(F!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var D=r.createCertificationRequest();if(D.version=l.csrVersion?l.csrVersion.charCodeAt(0):0,D.signatureOid=t.asn1.derToOid(l.csrSignatureOid),D.signatureParameters=E(D.signatureOid,l.csrSignatureParams,!0),D.siginfo.algorithmOid=t.asn1.derToOid(l.csrSignatureOid),D.siginfo.parameters=E(D.siginfo.algorithmOid,l.csrSignatureParams,!1),D.signature=l.csrSignature,D.certificationRequestInfo=l.certificationRequestInfo,h){D.md=p({signatureOid:D.signatureOid,type:"certification request"});var q=e.toDer(D.certificationRequestInfo);D.md.update(q.getBytes())}var j=t.md.sha1.create();return D.subject.getField=function(H){return A(D.subject,H)},D.subject.addField=function(H){y([H]),D.subject.attributes.push(H)},D.subject.attributes=r.RDNAttributesAsArray(l.certificationRequestInfoSubject,j),D.subject.hash=j.digest().toHex(),D.publicKey=r.publicKeyFromAsn1(l.subjectPublicKeyInfo),D.getAttribute=function(H){return A(D,H)},D.addAttribute=function(H){y([H]),D.attributes.push(H)},D.attributes=r.CRIAttributesAsArray(l.certificationRequestInfoAttributes||[]),D},r.createCertificationRequest=function(){var T={};return T.version=0,T.signatureOid=null,T.signature=null,T.siginfo={},T.siginfo.algorithmOid=null,T.subject={},T.subject.getField=function(h){return A(T.subject,h)},T.subject.addField=function(h){y([h]),T.subject.attributes.push(h)},T.subject.attributes=[],T.subject.hash=null,T.publicKey=null,T.attributes=[],T.getAttribute=function(h){return A(T,h)},T.addAttribute=function(h){y([h]),T.attributes.push(h)},T.md=null,T.setSubject=function(h){y(h),T.subject.attributes=h,T.subject.hash=null},T.setAttributes=function(h){y(h),T.attributes=h},T.sign=function(h,l){T.md=l||t.md.sha1.create();var R=n[T.md.algorithm+"WithRSAEncryption"];if(!R){var N=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw N.algorithm=T.md.algorithm,N}T.signatureOid=T.siginfo.algorithmOid=R,T.certificationRequestInfo=r.getCertificationRequestInfo(T);var F=e.toDer(T.certificationRequestInfo);T.md.update(F.getBytes()),T.signature=h.sign(T.md)},T.verify=function(){var h=!1,l=T.md;if(l===null){l=p({signatureOid:T.signatureOid,type:"certification request"});var R=T.certificationRequestInfo||r.getCertificationRequestInfo(T),N=e.toDer(R);l.update(N.getBytes())}return l!==null&&(h=s({certificate:T,md:l,signature:T.signature})),h},T};function m(T){for(var h=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),l,R,N=T.attributes,F=0;F<N.length;++F){l=N[F];var D=l.value,q=e.Type.PRINTABLESTRING;"valueTagClass"in l&&(q=l.valueTagClass,q===e.Type.UTF8&&(D=t.util.encodeUtf8(D))),R=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(l.type).getBytes()),e.create(e.Class.UNIVERSAL,q,!1,D)])]),h.value.push(R)}return h}function y(T){for(var h,l=0;l<T.length;++l){if(h=T[l],typeof h.name>"u"&&(h.type&&h.type in r.oids?h.name=r.oids[h.type]:h.shortName&&h.shortName in o&&(h.name=r.oids[o[h.shortName]])),typeof h.type>"u")if(h.name&&h.name in r.oids)h.type=r.oids[h.name];else{var R=new Error("Attribute type not specified.");throw R.attribute=h,R}if(typeof h.shortName>"u"&&h.name&&h.name in o&&(h.shortName=o[h.name]),h.type===n.extensionRequest&&(h.valueConstructed=!0,h.valueTagClass=e.Type.SEQUENCE,!h.value&&h.extensions)){h.value=[];for(var N=0;N<h.extensions.length;++N)h.value.push(r.certificateExtensionToAsn1(S(h.extensions[N])))}if(typeof h.value>"u"){var R=new Error("Attribute value not specified.");throw R.attribute=h,R}}}function S(T,h){if(h=h||{},typeof T.name>"u"&&T.id&&T.id in r.oids&&(T.name=r.oids[T.id]),typeof T.id>"u")if(T.name&&T.name in r.oids)T.id=r.oids[T.name];else{var l=new Error("Extension ID not specified.");throw l.extension=T,l}if(typeof T.value<"u")return T;if(T.name==="keyUsage"){var R=0,N=0,F=0;T.digitalSignature&&(N|=128,R=7),T.nonRepudiation&&(N|=64,R=6),T.keyEncipherment&&(N|=32,R=5),T.dataEncipherment&&(N|=16,R=4),T.keyAgreement&&(N|=8,R=3),T.keyCertSign&&(N|=4,R=2),T.cRLSign&&(N|=2,R=1),T.encipherOnly&&(N|=1,R=0),T.decipherOnly&&(F|=128,R=7);var D=String.fromCharCode(R);F!==0?D+=String.fromCharCode(N)+String.fromCharCode(F):N!==0&&(D+=String.fromCharCode(N)),T.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,D)}else if(T.name==="basicConstraints")T.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),T.cA&&T.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in T&&T.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(T.pathLenConstraint).getBytes()));else if(T.name==="extKeyUsage"){T.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);var q=T.value.value;for(var j in T)T[j]===!0&&(j in n?q.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(n[j]).getBytes())):j.indexOf(".")!==-1&&q.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(j).getBytes())))}else if(T.name==="nsCertType"){var R=0,N=0;T.client&&(N|=128,R=7),T.server&&(N|=64,R=6),T.email&&(N|=32,R=5),T.objsign&&(N|=16,R=4),T.reserved&&(N|=8,R=3),T.sslCA&&(N|=4,R=2),T.emailCA&&(N|=2,R=1),T.objCA&&(N|=1,R=0);var D=String.fromCharCode(R);N!==0&&(D+=String.fromCharCode(N)),T.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,D)}else if(T.name==="subjectAltName"||T.name==="issuerAltName"){T.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);for(var H,Q=0;Q<T.altNames.length;++Q){H=T.altNames[Q];var D=H.value;if(H.type===7&&H.ip){if(D=t.util.bytesFromIP(H.ip),D===null){var l=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw l.extension=T,l}}else H.type===8&&(H.oid?D=e.oidToDer(e.oidToDer(H.oid)):D=e.oidToDer(D));T.value.value.push(e.create(e.Class.CONTEXT_SPECIFIC,H.type,!1,D))}}else if(T.name==="nsComment"&&h.cert){if(!/^[\x00-\x7F]*$/.test(T.comment)||T.comment.length<1||T.comment.length>128)throw new Error('Invalid "nsComment" content.');T.value=e.create(e.Class.UNIVERSAL,e.Type.IA5STRING,!1,T.comment)}else if(T.name==="subjectKeyIdentifier"&&h.cert){var J=h.cert.generateSubjectKeyIdentifier();T.subjectKeyIdentifier=J.toHex(),T.value=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,J.getBytes())}else if(T.name==="authorityKeyIdentifier"&&h.cert){T.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);var q=T.value.value;if(T.keyIdentifier){var X=T.keyIdentifier===!0?h.cert.generateSubjectKeyIdentifier().getBytes():T.keyIdentifier;q.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!1,X))}if(T.authorityCertIssuer){var re=[e.create(e.Class.CONTEXT_SPECIFIC,4,!0,[m(T.authorityCertIssuer===!0?h.cert.issuer:T.authorityCertIssuer)])];q.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,re))}if(T.serialNumber){var se=t.util.hexToBytes(T.serialNumber===!0?h.cert.serialNumber:T.serialNumber);q.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!1,se))}}else if(T.name==="cRLDistributionPoints"){T.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);for(var q=T.value.value,de=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),ye=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]),H,Q=0;Q<T.altNames.length;++Q){H=T.altNames[Q];var D=H.value;if(H.type===7&&H.ip){if(D=t.util.bytesFromIP(H.ip),D===null){var l=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw l.extension=T,l}}else H.type===8&&(H.oid?D=e.oidToDer(e.oidToDer(H.oid)):D=e.oidToDer(D));ye.value.push(e.create(e.Class.CONTEXT_SPECIFIC,H.type,!1,D))}de.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[ye])),q.push(de)}if(typeof T.value>"u"){var l=new Error("Extension value not specified.");throw l.extension=T,l}return T}function i(T,h){switch(T){case n["RSASSA-PSS"]:var l=[];return h.hash.algorithmOid!==void 0&&l.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])),h.mgf.algorithmOid!==void 0&&l.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.mgf.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.mgf.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])])),h.saltLength!==void 0&&l.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(h.saltLength).getBytes())])),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,l);default:return e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")}}function v(T){var h=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);if(T.attributes.length===0)return h;for(var l=T.attributes,R=0;R<l.length;++R){var N=l[R],F=N.value,D=e.Type.UTF8;"valueTagClass"in N&&(D=N.valueTagClass),D===e.Type.UTF8&&(F=t.util.encodeUtf8(F));var q=!1;"valueConstructed"in N&&(q=N.valueConstructed);var j=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(N.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,D,q,F)])]);h.value.push(j)}return h}var C=new Date("1950-01-01T00:00:00Z"),I=new Date("2050-01-01T00:00:00Z");function B(T){return T>=C&&T<I?e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(T)):e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(T))}return r.getTBSCertificate=function(T){var h=B(T.validity.notBefore),l=B(T.validity.notAfter),R=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(T.version).getBytes())]),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,t.util.hexToBytes(T.serialNumber)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(T.siginfo.algorithmOid).getBytes()),i(T.siginfo.algorithmOid,T.siginfo.parameters)]),m(T.issuer),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[h,l]),m(T.subject),r.publicKeyToAsn1(T.publicKey)]);return T.issuer.uniqueId&&R.value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+T.issuer.uniqueId)])),T.subject.uniqueId&&R.value.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+T.subject.uniqueId)])),T.extensions.length>0&&R.value.push(r.certificateExtensionsToAsn1(T.extensions)),R},r.getCertificationRequestInfo=function(T){var h=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(T.version).getBytes()),m(T.subject),r.publicKeyToAsn1(T.publicKey),v(T)]);return h},r.distinguishedNameToAsn1=function(T){return m(T)},r.certificateToAsn1=function(T){var h=T.tbsCertificate||r.getTBSCertificate(T);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[h,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(T.signatureOid).getBytes()),i(T.signatureOid,T.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+T.signature)])},r.certificateExtensionsToAsn1=function(T){var h=e.create(e.Class.CONTEXT_SPECIFIC,3,!0,[]),l=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);h.value.push(l);for(var R=0;R<T.length;++R)l.value.push(r.certificateExtensionToAsn1(T[R]));return h},r.certificateExtensionToAsn1=function(T){var h=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);h.value.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(T.id).getBytes())),T.critical&&h.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,String.fromCharCode(255)));var l=T.value;return typeof T.value!="string"&&(l=e.toDer(l).getBytes()),h.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,l)),h},r.certificationRequestToAsn1=function(T){var h=T.certificationRequestInfo||r.getCertificationRequestInfo(T);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[h,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(T.signatureOid).getBytes()),i(T.signatureOid,T.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+T.signature)])},r.createCaStore=function(T){var h={certs:{}};h.getIssuer=function(D){var q=l(D.issuer);return q},h.addCertificate=function(D){if(typeof D=="string"&&(D=t.pki.certificateFromPem(D)),R(D.subject),!h.hasCertificate(D))if(D.subject.hash in h.certs){var q=h.certs[D.subject.hash];t.util.isArray(q)||(q=[q]),q.push(D),h.certs[D.subject.hash]=q}else h.certs[D.subject.hash]=D},h.hasCertificate=function(D){typeof D=="string"&&(D=t.pki.certificateFromPem(D));var q=l(D.subject);if(!q)return!1;t.util.isArray(q)||(q=[q]);for(var j=e.toDer(r.certificateToAsn1(D)).getBytes(),H=0;H<q.length;++H){var Q=e.toDer(r.certificateToAsn1(q[H])).getBytes();if(j===Q)return!0}return!1},h.listAllCertificates=function(){var D=[];for(var q in h.certs)if(h.certs.hasOwnProperty(q)){var j=h.certs[q];if(!t.util.isArray(j))D.push(j);else for(var H=0;H<j.length;++H)D.push(j[H])}return D},h.removeCertificate=function(D){var q;if(typeof D=="string"&&(D=t.pki.certificateFromPem(D)),R(D.subject),!h.hasCertificate(D))return null;var j=l(D.subject);if(!t.util.isArray(j))return q=h.certs[D.subject.hash],delete h.certs[D.subject.hash],q;for(var H=e.toDer(r.certificateToAsn1(D)).getBytes(),Q=0;Q<j.length;++Q){var J=e.toDer(r.certificateToAsn1(j[Q])).getBytes();H===J&&(q=j[Q],j.splice(Q,1))}return j.length===0&&delete h.certs[D.subject.hash],q};function l(D){return R(D),h.certs[D.hash]||null}function R(D){if(!D.hash){var q=t.md.sha1.create();D.attributes=r.RDNAttributesAsArray(m(D),q),D.hash=q.digest().toHex()}}if(T)for(var N=0;N<T.length;++N){var F=T[N];h.addCertificate(F)}return h},r.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},r.verifyCertificateChain=function(T,h,l){typeof l=="function"&&(l={verify:l}),l=l||{},h=h.slice(0);var R=h.slice(0),N=l.validityCheckDate;typeof N>"u"&&(N=new Date);var F=!0,D=null,q=0;do{var j=h.shift(),H=null,Q=!1;if(N&&(N<j.validity.notBefore||N>j.validity.notAfter)&&(D={message:"Certificate is not valid yet or has expired.",error:r.certificateError.certificate_expired,notBefore:j.validity.notBefore,notAfter:j.validity.notAfter,now:N}),D===null){if(H=h[0]||T.getIssuer(j),H===null&&j.isIssuer(j)&&(Q=!0,H=j),H){var J=H;t.util.isArray(J)||(J=[J]);for(var X=!1;!X&&J.length>0;){H=J.shift();try{X=H.verify(j)}catch{}}X||(D={message:"Certificate signature is invalid.",error:r.certificateError.bad_certificate})}D===null&&(!H||Q)&&!T.hasCertificate(j)&&(D={message:"Certificate is not trusted.",error:r.certificateError.unknown_ca})}if(D===null&&H&&!j.isIssuer(H)&&(D={message:"Certificate issuer is invalid.",error:r.certificateError.bad_certificate}),D===null)for(var re={keyUsage:!0,basicConstraints:!0},se=0;D===null&&se<j.extensions.length;++se){var de=j.extensions[se];de.critical&&!(de.name in re)&&(D={message:"Certificate has an unsupported critical extension.",error:r.certificateError.unsupported_certificate})}if(D===null&&(!F||h.length===0&&(!H||Q))){var ye=j.getExtension("basicConstraints"),_e=j.getExtension("keyUsage");if(_e!==null&&(!_e.keyCertSign||ye===null)&&(D={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:r.certificateError.bad_certificate}),D===null&&ye!==null&&!ye.cA&&(D={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:r.certificateError.bad_certificate}),D===null&&_e!==null&&"pathLenConstraint"in ye){var W=q-1;W>ye.pathLenConstraint&&(D={message:"Certificate basicConstraints pathLenConstraint violated.",error:r.certificateError.bad_certificate})}}var he=D===null?!0:D.error,ae=l.verify?l.verify(he,q,R):he;if(ae===!0)D=null;else throw he===!0&&(D={message:"The application rejected the certificate.",error:r.certificateError.bad_certificate}),(ae||ae===0)&&(typeof ae=="object"&&!t.util.isArray(ae)?(ae.message&&(D.message=ae.message),ae.error&&(D.error=ae.error)):typeof ae=="string"&&(D.error=ae)),D;F=!1,++q}while(h.length>0);return!0},oi.exports}var Do;function Nu(){if(Do)return ii.exports;Do=1;var t=me();Tt(),an(),or(),Bu(),bu(),yt(),ua(),sn(),Ae(),ms();var e=t.asn1,r=t.pki,n=ii.exports=t.pkcs12=t.pkcs12||{},o={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},c={name:"PFX",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},o,{name:"PFX.macData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:e.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},u={name:"SafeBag",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},a={name:"Attribute",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,capture:"values"}]},g={name:"CertBag",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:e.Class.UNIVERSAL,type:e.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function f(y,S,i,v){for(var C=[],I=0;I<y.length;I++)for(var B=0;B<y[I].safeBags.length;B++){var T=y[I].safeBags[B];if(!(v!==void 0&&T.type!==v)){if(S===null){C.push(T);continue}T.attributes[S]!==void 0&&T.attributes[S].indexOf(i)>=0&&C.push(T)}}return C}n.pkcs12FromAsn1=function(y,S,i){typeof S=="string"?(i=S,S=!0):S===void 0&&(S=!0);var v={},C=[];if(!e.validate(y,c,v,C)){var I=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw I.errors=I,I}var B={version:v.version.charCodeAt(0),safeContents:[],getBags:function(H){var Q={},J;return"localKeyId"in H?J=H.localKeyId:"localKeyIdHex"in H&&(J=t.util.hexToBytes(H.localKeyIdHex)),J===void 0&&!("friendlyName"in H)&&"bagType"in H&&(Q[H.bagType]=f(B.safeContents,null,null,H.bagType)),J!==void 0&&(Q.localKeyId=f(B.safeContents,"localKeyId",J,H.bagType)),"friendlyName"in H&&(Q.friendlyName=f(B.safeContents,"friendlyName",H.friendlyName,H.bagType)),Q},getBagsByFriendlyName:function(H,Q){return f(B.safeContents,"friendlyName",H,Q)},getBagsByLocalKeyId:function(H,Q){return f(B.safeContents,"localKeyId",H,Q)}};if(v.version.charCodeAt(0)!==3){var I=new Error("PKCS#12 PFX of version other than 3 not supported.");throw I.version=v.version.charCodeAt(0),I}if(e.derToOid(v.contentType)!==r.oids.data){var I=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw I.oid=e.derToOid(v.contentType),I}var T=v.content.value[0];if(T.tagClass!==e.Class.UNIVERSAL||T.type!==e.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(T=A(T),v.mac){var h=null,l=0,R=e.derToOid(v.macAlgorithm);switch(R){case r.oids.sha1:h=t.md.sha1.create(),l=20;break;case r.oids.sha256:h=t.md.sha256.create(),l=32;break;case r.oids.sha384:h=t.md.sha384.create(),l=48;break;case r.oids.sha512:h=t.md.sha512.create(),l=64;break;case r.oids.md5:h=t.md.md5.create(),l=16;break}if(h===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+R);var N=new t.util.ByteBuffer(v.macSalt),F="macIterations"in v?parseInt(t.util.bytesToHex(v.macIterations),16):1,D=n.generateKey(i,N,3,F,l,h),q=t.hmac.create();q.start(h,D),q.update(T.value);var j=q.getMac();if(j.getBytes()!==v.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return E(B,T.value,S,i),B};function A(y){if(y.composed||y.constructed){for(var S=t.util.createBuffer(),i=0;i<y.value.length;++i)S.putBytes(y.value[i].value);y.composed=y.constructed=!1,y.value=S.getBytes()}return y}function E(y,S,i,v){if(S=e.fromDer(S,i),S.tagClass!==e.Class.UNIVERSAL||S.type!==e.Type.SEQUENCE||S.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var C=0;C<S.value.length;C++){var I=S.value[C],B={},T=[];if(!e.validate(I,o,B,T)){var h=new Error("Cannot read ContentInfo.");throw h.errors=T,h}var l={encrypted:!1},R=null,N=B.content.value[0];switch(e.derToOid(B.contentType)){case r.oids.data:if(N.tagClass!==e.Class.UNIVERSAL||N.type!==e.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");R=A(N).value;break;case r.oids.encryptedData:R=p(N,v),l.encrypted=!0;break;default:var h=new Error("Unsupported PKCS#12 contentType.");throw h.contentType=e.derToOid(B.contentType),h}l.safeBags=s(R,i,v),y.safeContents.push(l)}}function p(y,S){var i={},v=[];if(!e.validate(y,t.pkcs7.asn1.encryptedDataValidator,i,v)){var C=new Error("Cannot read EncryptedContentInfo.");throw C.errors=v,C}var I=e.derToOid(i.contentType);if(I!==r.oids.data){var C=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw C.oid=I,C}I=e.derToOid(i.encAlgorithm);var B=r.pbe.getCipher(I,i.encParameter,S),T=A(i.encryptedContentAsn1),h=t.util.createBuffer(T.value);if(B.update(h),!B.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return B.output.getBytes()}function s(y,S,i){if(!S&&y.length===0)return[];if(y=e.fromDer(y,S),y.tagClass!==e.Class.UNIVERSAL||y.type!==e.Type.SEQUENCE||y.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var v=[],C=0;C<y.value.length;C++){var I=y.value[C],B={},T=[];if(!e.validate(I,u,B,T)){var h=new Error("Cannot read SafeBag.");throw h.errors=T,h}var l={type:e.derToOid(B.bagId),attributes:m(B.bagAttributes)};v.push(l);var R,N,F=B.bagValue.value[0];switch(l.type){case r.oids.pkcs8ShroudedKeyBag:if(F=r.decryptPrivateKeyInfo(F,i),F===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case r.oids.keyBag:try{l.key=r.privateKeyFromAsn1(F)}catch{l.key=null,l.asn1=F}continue;case r.oids.certBag:R=g,N=function(){if(e.derToOid(B.certId)!==r.oids.x509Certificate){var q=new Error("Unsupported certificate type, only X.509 supported.");throw q.oid=e.derToOid(B.certId),q}var j=e.fromDer(B.cert,S);try{l.cert=r.certificateFromAsn1(j,!0)}catch{l.cert=null,l.asn1=j}};break;default:var h=new Error("Unsupported PKCS#12 SafeBag type.");throw h.oid=l.type,h}if(R!==void 0&&!e.validate(F,R,B,T)){var h=new Error("Cannot read PKCS#12 "+R.name);throw h.errors=T,h}N()}return v}function m(y){var S={};if(y!==void 0)for(var i=0;i<y.length;++i){var v={},C=[];if(!e.validate(y[i],a,v,C)){var I=new Error("Cannot read PKCS#12 BagAttribute.");throw I.errors=C,I}var B=e.derToOid(v.oid);if(r.oids[B]!==void 0){S[r.oids[B]]=[];for(var T=0;T<v.values.length;++T)S[r.oids[B]].push(v.values[T].value)}}return S}return n.toPkcs12Asn1=function(y,S,i,v){v=v||{},v.saltSize=v.saltSize||8,v.count=v.count||2048,v.algorithm=v.algorithm||v.encAlgorithm||"aes128","useMac"in v||(v.useMac=!0),"localKeyId"in v||(v.localKeyId=null),"generateLocalKeyId"in v||(v.generateLocalKeyId=!0);var C=v.localKeyId,I;if(C!==null)C=t.util.hexToBytes(C);else if(v.generateLocalKeyId)if(S){var B=t.util.isArray(S)?S[0]:S;typeof B=="string"&&(B=r.certificateFromPem(B));var T=t.md.sha1.create();T.update(e.toDer(r.certificateToAsn1(B)).getBytes()),C=T.digest().getBytes()}else C=t.random.getBytes(20);var h=[];C!==null&&h.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.localKeyId).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,C)])])),"friendlyName"in v&&h.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.friendlyName).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.BMPSTRING,!1,v.friendlyName)])])),h.length>0&&(I=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,h));var l=[],R=[];S!==null&&(t.util.isArray(S)?R=S:R=[S]);for(var N=[],F=0;F<R.length;++F){S=R[F],typeof S=="string"&&(S=r.certificateFromPem(S));var D=F===0?I:void 0,q=r.certificateToAsn1(S),j=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.certBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.x509Certificate).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(q).getBytes())])])]),D]);N.push(j)}if(N.length>0){var H=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,N),Q=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(H).getBytes())])]);l.push(Q)}var J=null;if(y!==null){var X=r.wrapRsaPrivateKey(r.privateKeyToAsn1(y));i===null?J=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.keyBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[X]),I]):J=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.pkcs8ShroudedKeyBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[r.encryptPrivateKeyInfo(X,i,v)]),I]);var re=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[J]),se=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(re).getBytes())])]);l.push(se)}var de=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,l),ye;if(v.useMac){var T=t.md.sha1.create(),_e=new t.util.ByteBuffer(t.random.getBytes(v.saltSize)),W=v.count,y=n.generateKey(i,_e,3,W,20),he=t.hmac.create();he.start(T,y),he.update(e.toDer(de).getBytes());var ae=he.getMac();ye=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.sha1).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,ae.getBytes())]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,_e.getBytes()),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(W).getBytes())])}return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(3).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(de).getBytes())])]),ye])},n.generateKey=t.pbe.generatePkcs12Key,ii.exports}var Lo;function Pu(){if(Lo)return Wa.exports;Lo=1;var t=me();Tt(),or(),bu(),Rr(),gs(),Nu(),vs(),ua(),Ae(),ms();var e=t.asn1,r=Wa.exports=t.pki=t.pki||{};return r.pemToDer=function(n){var o=t.pem.decode(n)[0];if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return t.util.createBuffer(o.body)},r.privateKeyFromPem=function(n){var o=t.pem.decode(n)[0];if(o.type!=="PRIVATE KEY"&&o.type!=="RSA PRIVATE KEY"){var c=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var u=e.fromDer(o.body);return r.privateKeyFromAsn1(u)},r.privateKeyToPem=function(n,o){var c={type:"RSA PRIVATE KEY",body:e.toDer(r.privateKeyToAsn1(n)).getBytes()};return t.pem.encode(c,{maxline:o})},r.privateKeyInfoToPem=function(n,o){var c={type:"PRIVATE KEY",body:e.toDer(n).getBytes()};return t.pem.encode(c,{maxline:o})},Wa.exports}var fi,Fo;function Ou(){if(Fo)return fi;Fo=1;var t=me();Tt(),an(),ys(),Rr(),Pu(),yt(),sn(),Ae();var e=function(_,x,w,d){var b=t.util.createBuffer(),U=_.length>>1,P=U+(_.length&1),K=_.substr(0,P),V=_.substr(U,P),$=t.util.createBuffer(),M=t.hmac.create();w=x+w;var G=Math.ceil(d/16),Y=Math.ceil(d/20);M.start("MD5",K);var ne=t.util.createBuffer();$.putBytes(w);for(var te=0;te<G;++te)M.start(null,null),M.update($.getBytes()),$.putBuffer(M.digest()),M.start(null,null),M.update($.bytes()+w),ne.putBuffer(M.digest());M.start("SHA1",V);var ue=t.util.createBuffer();$.clear(),$.putBytes(w);for(var te=0;te<Y;++te)M.start(null,null),M.update($.getBytes()),$.putBuffer(M.digest()),M.start(null,null),M.update($.bytes()+w),ue.putBuffer(M.digest());return b.putBytes(t.util.xorBytes(ne.getBytes(),ue.getBytes(),d)),b},r=function(_,x,w){var d=t.hmac.create();d.start("SHA1",_);var b=t.util.createBuffer();return b.putInt32(x[0]),b.putInt32(x[1]),b.putByte(w.type),b.putByte(w.version.major),b.putByte(w.version.minor),b.putInt16(w.length),b.putBytes(w.fragment.bytes()),d.update(b.getBytes()),d.digest().getBytes()},n=function(_,x,w){var d=!1;try{var b=_.deflate(x.fragment.getBytes());x.fragment=t.util.createBuffer(b),x.length=b.length,d=!0}catch{}return d},o=function(_,x,w){var d=!1;try{var b=_.inflate(x.fragment.getBytes());x.fragment=t.util.createBuffer(b),x.length=b.length,d=!0}catch{}return d},c=function(_,x){var w=0;switch(x){case 1:w=_.getByte();break;case 2:w=_.getInt16();break;case 3:w=_.getInt24();break;case 4:w=_.getInt32();break}return t.util.createBuffer(_.getBytes(w))},u=function(_,x,w){_.putInt(w.length(),x<<3),_.putBuffer(w)},a={};a.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},a.SupportedVersions=[a.Versions.TLS_1_1,a.Versions.TLS_1_0],a.Version=a.SupportedVersions[0],a.MaxFragment=16384-1024,a.ConnectionEnd={server:0,client:1},a.PRFAlgorithm={tls_prf_sha256:0},a.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},a.CipherType={stream:0,block:1,aead:2},a.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},a.CompressionMethod={none:0,deflate:1},a.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},a.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},a.Alert={},a.Alert.Level={warning:1,fatal:2},a.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},a.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},a.CipherSuites={},a.getCipherSuite=function(_){var x=null;for(var w in a.CipherSuites){var d=a.CipherSuites[w];if(d.id[0]===_.charCodeAt(0)&&d.id[1]===_.charCodeAt(1)){x=d;break}}return x},a.handleUnexpected=function(_,x){var w=!_.open&&_.entity===a.ConnectionEnd.client;w||_.error(_,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})},a.handleHelloRequest=function(_,x,w){!_.handshaking&&_.handshakes>0&&(a.queue(_,a.createAlert(_,{level:a.Alert.Level.warning,description:a.Alert.Description.no_renegotiation})),a.flush(_)),_.process()},a.parseHelloMessage=function(_,x,w){var d=null,b=_.entity===a.ConnectionEnd.client;if(w<38)_.error(_,{message:b?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});else{var U=x.fragment,P=U.length();if(d={version:{major:U.getByte(),minor:U.getByte()},random:t.util.createBuffer(U.getBytes(32)),session_id:c(U,1),extensions:[]},b?(d.cipher_suite=U.getBytes(2),d.compression_method=U.getByte()):(d.cipher_suites=c(U,2),d.compression_methods=c(U,1)),P=w-(P-U.length()),P>0){for(var K=c(U,2);K.length()>0;)d.extensions.push({type:[K.getByte(),K.getByte()],data:c(K,2)});if(!b)for(var V=0;V<d.extensions.length;++V){var $=d.extensions[V];if($.type[0]===0&&$.type[1]===0)for(var M=c($.data,2);M.length()>0;){var G=M.getByte();if(G!==0)break;_.session.extensions.server_name.serverNameList.push(c(M,2).getBytes())}}}if(_.session.version&&(d.version.major!==_.session.version.major||d.version.minor!==_.session.version.minor))return _.error(_,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});if(b)_.session.cipherSuite=a.getCipherSuite(d.cipher_suite);else for(var Y=t.util.createBuffer(d.cipher_suites.bytes());Y.length()>0&&(_.session.cipherSuite=a.getCipherSuite(Y.getBytes(2)),_.session.cipherSuite===null););if(_.session.cipherSuite===null)return _.error(_,{message:"No cipher suites in common.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure},cipherSuite:t.util.bytesToHex(d.cipher_suite)});b?_.session.compressionMethod=d.compression_method:_.session.compressionMethod=a.CompressionMethod.none}return d},a.createSecurityParameters=function(_,x){var w=_.entity===a.ConnectionEnd.client,d=x.random.bytes(),b=w?_.session.sp.client_random:d,U=w?d:a.createRandom().getBytes();_.session.sp={entity:_.entity,prf_algorithm:a.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:_.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:b,server_random:U}},a.handleServerHello=function(_,x,w){var d=a.parseHelloMessage(_,x,w);if(!_.fail){if(d.version.minor<=_.version.minor)_.version.minor=d.version.minor;else return _.error(_,{message:"Incompatible TLS version.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});_.session.version=_.version;var b=d.session_id.bytes();b.length>0&&b===_.session.id?(_.expect=s,_.session.resuming=!0,_.session.sp.server_random=d.random.bytes()):(_.expect=f,_.session.resuming=!1,a.createSecurityParameters(_,d)),_.session.id=b,_.process()}},a.handleClientHello=function(_,x,w){var d=a.parseHelloMessage(_,x,w);if(!_.fail){var b=d.session_id.bytes(),U=null;if(_.sessionCache&&(U=_.sessionCache.getSession(b),U===null?b="":(U.version.major!==d.version.major||U.version.minor>d.version.minor)&&(U=null,b="")),b.length===0&&(b=t.random.getBytes(32)),_.session.id=b,_.session.clientHelloVersion=d.version,_.session.sp={},U)_.version=_.session.version=U.version,_.session.sp=U.sp;else{for(var P,K=1;K<a.SupportedVersions.length&&(P=a.SupportedVersions[K],!(P.minor<=d.version.minor));++K);_.version={major:P.major,minor:P.minor},_.session.version=_.version}U!==null?(_.expect=B,_.session.resuming=!0,_.session.sp.client_random=d.random.bytes()):(_.expect=_.verifyClient!==!1?v:C,_.session.resuming=!1,a.createSecurityParameters(_,d)),_.open=!0,a.queue(_,a.createRecord(_,{type:a.ContentType.handshake,data:a.createServerHello(_)})),_.session.resuming?(a.queue(_,a.createRecord(_,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),_.state.pending=a.createConnectionState(_),_.state.current.write=_.state.pending.write,a.queue(_,a.createRecord(_,{type:a.ContentType.handshake,data:a.createFinished(_)}))):(a.queue(_,a.createRecord(_,{type:a.ContentType.handshake,data:a.createCertificate(_)})),_.fail||(a.queue(_,a.createRecord(_,{type:a.ContentType.handshake,data:a.createServerKeyExchange(_)})),_.verifyClient!==!1&&a.queue(_,a.createRecord(_,{type:a.ContentType.handshake,data:a.createCertificateRequest(_)})),a.queue(_,a.createRecord(_,{type:a.ContentType.handshake,data:a.createServerHelloDone(_)})))),a.flush(_),_.process()}},a.handleCertificate=function(_,x,w){if(w<3)return _.error(_,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var d=x.fragment,b={certificate_list:c(d,3)},U,P,K=[];try{for(;b.certificate_list.length()>0;)U=c(b.certificate_list,3),P=t.asn1.fromDer(U),U=t.pki.certificateFromAsn1(P,!0),K.push(U)}catch($){return _.error(_,{message:"Could not parse certificate list.",cause:$,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var V=_.entity===a.ConnectionEnd.client;(V||_.verifyClient===!0)&&K.length===0?_.error(_,{message:V?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}}):K.length===0?_.expect=V?A:C:(V?_.session.serverCertificate=K[0]:_.session.clientCertificate=K[0],a.verifyCertificateChain(_,K)&&(_.expect=V?A:C)),_.process()},a.handleServerKeyExchange=function(_,x,w){if(w>0)return _.error(_,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});_.expect=E,_.process()},a.handleClientKeyExchange=function(_,x,w){if(w<48)return _.error(_,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});var d=x.fragment,b={enc_pre_master_secret:c(d,2).getBytes()},U=null;if(_.getPrivateKey)try{U=_.getPrivateKey(_,_.session.serverCertificate),U=t.pki.privateKeyFromPem(U)}catch(V){_.error(_,{message:"Could not get private key.",cause:V,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}if(U===null)return _.error(_,{message:"No private key set.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}});try{var P=_.session.sp;P.pre_master_secret=U.decrypt(b.enc_pre_master_secret);var K=_.session.clientHelloVersion;if(K.major!==P.pre_master_secret.charCodeAt(0)||K.minor!==P.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{P.pre_master_secret=t.random.getBytes(48)}_.expect=B,_.session.clientCertificate!==null&&(_.expect=I),_.process()},a.handleCertificateRequest=function(_,x,w){if(w<3)return _.error(_,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var d=x.fragment,b={certificate_types:c(d,1),certificate_authorities:c(d,2)};_.session.certificateRequest=b,_.expect=p,_.process()},a.handleCertificateVerify=function(_,x,w){if(w<2)return _.error(_,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var d=x.fragment;d.read-=4;var b=d.bytes();d.read+=4;var U={signature:c(d,2).getBytes()},P=t.util.createBuffer();P.putBuffer(_.session.md5.digest()),P.putBuffer(_.session.sha1.digest()),P=P.getBytes();try{var K=_.session.clientCertificate;if(!K.publicKey.verify(P,U.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");_.session.md5.update(b),_.session.sha1.update(b)}catch{return _.error(_,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure}})}_.expect=B,_.process()},a.handleServerHelloDone=function(_,x,w){if(w>0)return _.error(_,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.record_overflow}});if(_.serverCertificate===null){var d={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.insufficient_security}},b=0,U=_.verify(_,d.alert.description,b,[]);if(U!==!0)return(U||U===0)&&(typeof U=="object"&&!t.util.isArray(U)?(U.message&&(d.message=U.message),U.alert&&(d.alert.description=U.alert)):typeof U=="number"&&(d.alert.description=U)),_.error(_,d)}_.session.certificateRequest!==null&&(x=a.createRecord(_,{type:a.ContentType.handshake,data:a.createCertificate(_)}),a.queue(_,x)),x=a.createRecord(_,{type:a.ContentType.handshake,data:a.createClientKeyExchange(_)}),a.queue(_,x),_.expect=S;var P=function(K,V){K.session.certificateRequest!==null&&K.session.clientCertificate!==null&&a.queue(K,a.createRecord(K,{type:a.ContentType.handshake,data:a.createCertificateVerify(K,V)})),a.queue(K,a.createRecord(K,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),K.state.pending=a.createConnectionState(K),K.state.current.write=K.state.pending.write,a.queue(K,a.createRecord(K,{type:a.ContentType.handshake,data:a.createFinished(K)})),K.expect=s,a.flush(K),K.process()};if(_.session.certificateRequest===null||_.session.clientCertificate===null)return P(_,null);a.getClientSignature(_,P)},a.handleChangeCipherSpec=function(_,x){if(x.fragment.getByte()!==1)return _.error(_,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var w=_.entity===a.ConnectionEnd.client;(_.session.resuming&&w||!_.session.resuming&&!w)&&(_.state.pending=a.createConnectionState(_)),_.state.current.read=_.state.pending.read,(!_.session.resuming&&w||_.session.resuming&&!w)&&(_.state.pending=null),_.expect=w?m:T,_.process()},a.handleFinished=function(_,x,w){var d=x.fragment;d.read-=4;var b=d.bytes();d.read+=4;var U=x.fragment.getBytes();d=t.util.createBuffer(),d.putBuffer(_.session.md5.digest()),d.putBuffer(_.session.sha1.digest());var P=_.entity===a.ConnectionEnd.client,K=P?"server finished":"client finished",V=_.session.sp,$=12,M=e;if(d=M(V.master_secret,K,d.getBytes(),$),d.getBytes()!==U)return _.error(_,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decrypt_error}});_.session.md5.update(b),_.session.sha1.update(b),(_.session.resuming&&P||!_.session.resuming&&!P)&&(a.queue(_,a.createRecord(_,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),_.state.current.write=_.state.pending.write,_.state.pending=null,a.queue(_,a.createRecord(_,{type:a.ContentType.handshake,data:a.createFinished(_)}))),_.expect=P?y:h,_.handshaking=!1,++_.handshakes,_.peerCertificate=P?_.session.serverCertificate:_.session.clientCertificate,a.flush(_),_.isConnected=!0,_.connected(_),_.process()},a.handleAlert=function(_,x){var w=x.fragment,d={level:w.getByte(),description:w.getByte()},b;switch(d.description){case a.Alert.Description.close_notify:b="Connection closed.";break;case a.Alert.Description.unexpected_message:b="Unexpected message.";break;case a.Alert.Description.bad_record_mac:b="Bad record MAC.";break;case a.Alert.Description.decryption_failed:b="Decryption failed.";break;case a.Alert.Description.record_overflow:b="Record overflow.";break;case a.Alert.Description.decompression_failure:b="Decompression failed.";break;case a.Alert.Description.handshake_failure:b="Handshake failure.";break;case a.Alert.Description.bad_certificate:b="Bad certificate.";break;case a.Alert.Description.unsupported_certificate:b="Unsupported certificate.";break;case a.Alert.Description.certificate_revoked:b="Certificate revoked.";break;case a.Alert.Description.certificate_expired:b="Certificate expired.";break;case a.Alert.Description.certificate_unknown:b="Certificate unknown.";break;case a.Alert.Description.illegal_parameter:b="Illegal parameter.";break;case a.Alert.Description.unknown_ca:b="Unknown certificate authority.";break;case a.Alert.Description.access_denied:b="Access denied.";break;case a.Alert.Description.decode_error:b="Decode error.";break;case a.Alert.Description.decrypt_error:b="Decrypt error.";break;case a.Alert.Description.export_restriction:b="Export restriction.";break;case a.Alert.Description.protocol_version:b="Unsupported protocol version.";break;case a.Alert.Description.insufficient_security:b="Insufficient security.";break;case a.Alert.Description.internal_error:b="Internal error.";break;case a.Alert.Description.user_canceled:b="User canceled.";break;case a.Alert.Description.no_renegotiation:b="Renegotiation not supported.";break;default:b="Unknown error.";break}if(d.description===a.Alert.Description.close_notify)return _.close();_.error(_,{message:b,send:!1,origin:_.entity===a.ConnectionEnd.client?"server":"client",alert:d}),_.process()},a.handleHandshake=function(_,x){var w=x.fragment,d=w.getByte(),b=w.getInt24();if(b>w.length())return _.fragmented=x,x.fragment=t.util.createBuffer(),w.read-=4,_.process();_.fragmented=null,w.read-=4;var U=w.bytes(b+4);w.read+=4,d in ye[_.entity][_.expect]?(_.entity===a.ConnectionEnd.server&&!_.open&&!_.fail&&(_.handshaking=!0,_.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:t.md.md5.create(),sha1:t.md.sha1.create()}),d!==a.HandshakeType.hello_request&&d!==a.HandshakeType.certificate_verify&&d!==a.HandshakeType.finished&&(_.session.md5.update(U),_.session.sha1.update(U)),ye[_.entity][_.expect][d](_,x,b)):a.handleUnexpected(_,x)},a.handleApplicationData=function(_,x){_.data.putBuffer(x.fragment),_.dataReady(_),_.process()},a.handleHeartbeat=function(_,x){var w=x.fragment,d=w.getByte(),b=w.getInt16(),U=w.getBytes(b);if(d===a.HeartbeatMessageType.heartbeat_request){if(_.handshaking||b>U.length)return _.process();a.queue(_,a.createRecord(_,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_response,U)})),a.flush(_)}else if(d===a.HeartbeatMessageType.heartbeat_response){if(U!==_.expectedHeartbeatPayload)return _.process();_.heartbeatReceived&&_.heartbeatReceived(_,t.util.createBuffer(U))}_.process()};var g=0,f=1,A=2,E=3,p=4,s=5,m=6,y=7,S=8,i=0,v=1,C=2,I=3,B=4,T=5,h=6,l=a.handleUnexpected,R=a.handleChangeCipherSpec,N=a.handleAlert,F=a.handleHandshake,D=a.handleApplicationData,q=a.handleHeartbeat,j=[];j[a.ConnectionEnd.client]=[[l,N,F,l,q],[l,N,F,l,q],[l,N,F,l,q],[l,N,F,l,q],[l,N,F,l,q],[R,N,l,l,q],[l,N,F,l,q],[l,N,F,D,q],[l,N,F,l,q]],j[a.ConnectionEnd.server]=[[l,N,F,l,q],[l,N,F,l,q],[l,N,F,l,q],[l,N,F,l,q],[R,N,l,l,q],[l,N,F,l,q],[l,N,F,D,q],[l,N,F,l,q]];var H=a.handleHelloRequest,Q=a.handleServerHello,J=a.handleCertificate,X=a.handleServerKeyExchange,re=a.handleCertificateRequest,se=a.handleServerHelloDone,de=a.handleFinished,ye=[];ye[a.ConnectionEnd.client]=[[l,l,Q,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[H,l,l,l,l,l,l,l,l,l,l,J,X,re,se,l,l,l,l,l,l],[H,l,l,l,l,l,l,l,l,l,l,l,X,re,se,l,l,l,l,l,l],[H,l,l,l,l,l,l,l,l,l,l,l,l,re,se,l,l,l,l,l,l],[H,l,l,l,l,l,l,l,l,l,l,l,l,l,se,l,l,l,l,l,l],[H,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[H,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,de],[H,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[H,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l]];var _e=a.handleClientHello,W=a.handleClientKeyExchange,he=a.handleCertificateVerify;ye[a.ConnectionEnd.server]=[[l,_e,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,J,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,W,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,he,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,de],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l]],a.generateKeys=function(_,x){var w=e,d=x.client_random+x.server_random;_.session.resuming||(x.master_secret=w(x.pre_master_secret,"master secret",d,48).bytes(),x.pre_master_secret=null),d=x.server_random+x.client_random;var b=2*x.mac_key_length+2*x.enc_key_length,U=_.version.major===a.Versions.TLS_1_0.major&&_.version.minor===a.Versions.TLS_1_0.minor;U&&(b+=2*x.fixed_iv_length);var P=w(x.master_secret,"key expansion",d,b),K={client_write_MAC_key:P.getBytes(x.mac_key_length),server_write_MAC_key:P.getBytes(x.mac_key_length),client_write_key:P.getBytes(x.enc_key_length),server_write_key:P.getBytes(x.enc_key_length)};return U&&(K.client_write_IV=P.getBytes(x.fixed_iv_length),K.server_write_IV=P.getBytes(x.fixed_iv_length)),K},a.createConnectionState=function(_){var x=_.entity===a.ConnectionEnd.client,w=function(){var U={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(P){return!0},compressionState:null,compressFunction:function(P){return!0},updateSequenceNumber:function(){U.sequenceNumber[1]===4294967295?(U.sequenceNumber[1]=0,++U.sequenceNumber[0]):++U.sequenceNumber[1]}};return U},d={read:w(),write:w()};if(d.read.update=function(U,P){return d.read.cipherFunction(P,d.read)?d.read.compressFunction(U,P,d.read)||U.error(U,{message:"Could not decompress record.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decompression_failure}}):U.error(U,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_record_mac}}),!U.fail},d.write.update=function(U,P){return d.write.compressFunction(U,P,d.write)?d.write.cipherFunction(P,d.write)||U.error(U,{message:"Could not encrypt record.",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):U.error(U,{message:"Could not compress record.",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}),!U.fail},_.session){var b=_.session.sp;switch(_.session.cipherSuite.initSecurityParameters(b),b.keys=a.generateKeys(_,b),d.read.macKey=x?b.keys.server_write_MAC_key:b.keys.client_write_MAC_key,d.write.macKey=x?b.keys.client_write_MAC_key:b.keys.server_write_MAC_key,_.session.cipherSuite.initConnectionState(d,_,b),b.compression_algorithm){case a.CompressionMethod.none:break;case a.CompressionMethod.deflate:d.read.compressFunction=o,d.write.compressFunction=n;break;default:throw new Error("Unsupported compression algorithm.")}}return d},a.createRandom=function(){var _=new Date,x=+_+_.getTimezoneOffset()*6e4,w=t.util.createBuffer();return w.putInt32(x),w.putBytes(t.random.getBytes(28)),w},a.createRecord=function(_,x){if(!x.data)return null;var w={type:x.type,version:{major:_.version.major,minor:_.version.minor},length:x.data.length(),fragment:x.data};return w},a.createAlert=function(_,x){var w=t.util.createBuffer();return w.putByte(x.level),w.putByte(x.description),a.createRecord(_,{type:a.ContentType.alert,data:w})},a.createClientHello=function(_){_.session.clientHelloVersion={major:_.version.major,minor:_.version.minor};for(var x=t.util.createBuffer(),w=0;w<_.cipherSuites.length;++w){var d=_.cipherSuites[w];x.putByte(d.id[0]),x.putByte(d.id[1])}var b=x.length(),U=t.util.createBuffer();U.putByte(a.CompressionMethod.none);var P=U.length(),K=t.util.createBuffer();if(_.virtualHost){var V=t.util.createBuffer();V.putByte(0),V.putByte(0);var $=t.util.createBuffer();$.putByte(0),u($,2,t.util.createBuffer(_.virtualHost));var M=t.util.createBuffer();u(M,2,$),u(V,2,M),K.putBuffer(V)}var G=K.length();G>0&&(G+=2);var Y=_.session.id,ne=Y.length+1+2+4+28+2+b+1+P+G,te=t.util.createBuffer();return te.putByte(a.HandshakeType.client_hello),te.putInt24(ne),te.putByte(_.version.major),te.putByte(_.version.minor),te.putBytes(_.session.sp.client_random),u(te,1,t.util.createBuffer(Y)),u(te,2,x),u(te,1,U),G>0&&u(te,2,K),te},a.createServerHello=function(_){var x=_.session.id,w=x.length+1+2+4+28+2+1,d=t.util.createBuffer();return d.putByte(a.HandshakeType.server_hello),d.putInt24(w),d.putByte(_.version.major),d.putByte(_.version.minor),d.putBytes(_.session.sp.server_random),u(d,1,t.util.createBuffer(x)),d.putByte(_.session.cipherSuite.id[0]),d.putByte(_.session.cipherSuite.id[1]),d.putByte(_.session.compressionMethod),d},a.createCertificate=function(_){var x=_.entity===a.ConnectionEnd.client,w=null;if(_.getCertificate){var d;x?d=_.session.certificateRequest:d=_.session.extensions.server_name.serverNameList,w=_.getCertificate(_,d)}var b=t.util.createBuffer();if(w!==null)try{t.util.isArray(w)||(w=[w]);for(var U=null,P=0;P<w.length;++P){var K=t.pem.decode(w[P])[0];if(K.type!=="CERTIFICATE"&&K.type!=="X509 CERTIFICATE"&&K.type!=="TRUSTED CERTIFICATE"){var V=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw V.headerType=K.type,V}if(K.procType&&K.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var $=t.util.createBuffer(K.body);U===null&&(U=t.asn1.fromDer($.bytes(),!1));var M=t.util.createBuffer();u(M,3,$),b.putBuffer(M)}w=t.pki.certificateFromAsn1(U),x?_.session.clientCertificate=w:_.session.serverCertificate=w}catch(ne){return _.error(_,{message:"Could not send certificate list.",cause:ne,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var G=3+b.length(),Y=t.util.createBuffer();return Y.putByte(a.HandshakeType.certificate),Y.putInt24(G),u(Y,3,b),Y},a.createClientKeyExchange=function(_){var x=t.util.createBuffer();x.putByte(_.session.clientHelloVersion.major),x.putByte(_.session.clientHelloVersion.minor),x.putBytes(t.random.getBytes(46));var w=_.session.sp;w.pre_master_secret=x.getBytes();var d=_.session.serverCertificate.publicKey;x=d.encrypt(w.pre_master_secret);var b=x.length+2,U=t.util.createBuffer();return U.putByte(a.HandshakeType.client_key_exchange),U.putInt24(b),U.putInt16(x.length),U.putBytes(x),U},a.createServerKeyExchange=function(_){var x=t.util.createBuffer();return x},a.getClientSignature=function(_,x){var w=t.util.createBuffer();w.putBuffer(_.session.md5.digest()),w.putBuffer(_.session.sha1.digest()),w=w.getBytes(),_.getSignature=_.getSignature||function(d,b,U){var P=null;if(d.getPrivateKey)try{P=d.getPrivateKey(d,d.session.clientCertificate),P=t.pki.privateKeyFromPem(P)}catch(K){d.error(d,{message:"Could not get private key.",cause:K,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}P===null?d.error(d,{message:"No private key set.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):b=P.sign(b,null),U(d,b)},_.getSignature(_,w,x)},a.createCertificateVerify=function(_,x){var w=x.length+2,d=t.util.createBuffer();return d.putByte(a.HandshakeType.certificate_verify),d.putInt24(w),d.putInt16(x.length),d.putBytes(x),d},a.createCertificateRequest=function(_){var x=t.util.createBuffer();x.putByte(1);var w=t.util.createBuffer();for(var d in _.caStore.certs){var b=_.caStore.certs[d],U=t.pki.distinguishedNameToAsn1(b.subject),P=t.asn1.toDer(U);w.putInt16(P.length()),w.putBuffer(P)}var K=1+x.length()+2+w.length(),V=t.util.createBuffer();return V.putByte(a.HandshakeType.certificate_request),V.putInt24(K),u(V,1,x),u(V,2,w),V},a.createServerHelloDone=function(_){var x=t.util.createBuffer();return x.putByte(a.HandshakeType.server_hello_done),x.putInt24(0),x},a.createChangeCipherSpec=function(){var _=t.util.createBuffer();return _.putByte(1),_},a.createFinished=function(_){var x=t.util.createBuffer();x.putBuffer(_.session.md5.digest()),x.putBuffer(_.session.sha1.digest());var w=_.entity===a.ConnectionEnd.client,d=_.session.sp,b=12,U=e,P=w?"client finished":"server finished";x=U(d.master_secret,P,x.getBytes(),b);var K=t.util.createBuffer();return K.putByte(a.HandshakeType.finished),K.putInt24(x.length()),K.putBuffer(x),K},a.createHeartbeat=function(_,x,w){typeof w>"u"&&(w=x.length);var d=t.util.createBuffer();d.putByte(_),d.putInt16(w),d.putBytes(x);var b=d.length(),U=Math.max(16,b-w-3);return d.putBytes(t.random.getBytes(U)),d},a.queue=function(_,x){if(x&&!(x.fragment.length()===0&&(x.type===a.ContentType.handshake||x.type===a.ContentType.alert||x.type===a.ContentType.change_cipher_spec))){if(x.type===a.ContentType.handshake){var w=x.fragment.bytes();_.session.md5.update(w),_.session.sha1.update(w),w=null}var d;if(x.fragment.length()<=a.MaxFragment)d=[x];else{d=[];for(var b=x.fragment.bytes();b.length>a.MaxFragment;)d.push(a.createRecord(_,{type:x.type,data:t.util.createBuffer(b.slice(0,a.MaxFragment))})),b=b.slice(a.MaxFragment);b.length>0&&d.push(a.createRecord(_,{type:x.type,data:t.util.createBuffer(b)}))}for(var U=0;U<d.length&&!_.fail;++U){var P=d[U],K=_.state.current.write;K.update(_,P)&&_.records.push(P)}}},a.flush=function(_){for(var x=0;x<_.records.length;++x){var w=_.records[x];_.tlsData.putByte(w.type),_.tlsData.putByte(w.version.major),_.tlsData.putByte(w.version.minor),_.tlsData.putInt16(w.fragment.length()),_.tlsData.putBuffer(_.records[x].fragment)}return _.records=[],_.tlsDataReady(_)};var ae=function(_){switch(_){case!0:return!0;case t.pki.certificateError.bad_certificate:return a.Alert.Description.bad_certificate;case t.pki.certificateError.unsupported_certificate:return a.Alert.Description.unsupported_certificate;case t.pki.certificateError.certificate_revoked:return a.Alert.Description.certificate_revoked;case t.pki.certificateError.certificate_expired:return a.Alert.Description.certificate_expired;case t.pki.certificateError.certificate_unknown:return a.Alert.Description.certificate_unknown;case t.pki.certificateError.unknown_ca:return a.Alert.Description.unknown_ca;default:return a.Alert.Description.bad_certificate}},ke=function(_){switch(_){case!0:return!0;case a.Alert.Description.bad_certificate:return t.pki.certificateError.bad_certificate;case a.Alert.Description.unsupported_certificate:return t.pki.certificateError.unsupported_certificate;case a.Alert.Description.certificate_revoked:return t.pki.certificateError.certificate_revoked;case a.Alert.Description.certificate_expired:return t.pki.certificateError.certificate_expired;case a.Alert.Description.certificate_unknown:return t.pki.certificateError.certificate_unknown;case a.Alert.Description.unknown_ca:return t.pki.certificateError.unknown_ca;default:return t.pki.certificateError.bad_certificate}};a.verifyCertificateChain=function(_,x){try{var w={};for(var d in _.verifyOptions)w[d]=_.verifyOptions[d];w.verify=function(U,P,K){var V=ae(U),$=_.verify(_,U,P,K);if($!==!0){if(typeof $=="object"&&!t.util.isArray($)){var M=new Error("The application rejected the certificate.");throw M.send=!0,M.alert={level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate},$.message&&(M.message=$.message),$.alert&&(M.alert.description=$.alert),M}$!==U&&($=ke($))}return $},t.pki.verifyCertificateChain(_.caStore,x,w)}catch(U){var b=U;(typeof b!="object"||t.util.isArray(b))&&(b={send:!0,alert:{level:a.Alert.Level.fatal,description:ae(U)}}),"send"in b||(b.send=!0),"alert"in b||(b.alert={level:a.Alert.Level.fatal,description:ae(b.error)}),_.error(_,b)}return!_.fail},a.createSessionCache=function(_,x){var w=null;if(_&&_.getSession&&_.setSession&&_.order)w=_;else{w={},w.cache=_||{},w.capacity=Math.max(x||100,1),w.order=[];for(var d in _)w.order.length<=x?w.order.push(d):delete _[d];w.getSession=function(b){var U=null,P=null;if(b?P=t.util.bytesToHex(b):w.order.length>0&&(P=w.order[0]),P!==null&&P in w.cache){U=w.cache[P],delete w.cache[P];for(var K in w.order)if(w.order[K]===P){w.order.splice(K,1);break}}return U},w.setSession=function(b,U){if(w.order.length===w.capacity){var P=w.order.shift();delete w.cache[P]}var P=t.util.bytesToHex(b);w.order.push(P),w.cache[P]=U}}return w},a.createConnection=function(_){var x=null;_.caStore?t.util.isArray(_.caStore)?x=t.pki.createCaStore(_.caStore):x=_.caStore:x=t.pki.createCaStore();var w=_.cipherSuites||null;if(w===null){w=[];for(var d in a.CipherSuites)w.push(a.CipherSuites[d])}var b=_.server?a.ConnectionEnd.server:a.ConnectionEnd.client,U=_.sessionCache?a.createSessionCache(_.sessionCache):null,P={version:{major:a.Version.major,minor:a.Version.minor},entity:b,sessionId:_.sessionId,caStore:x,sessionCache:U,cipherSuites:w,connected:_.connected,virtualHost:_.virtualHost||null,verifyClient:_.verifyClient||!1,verify:_.verify||function(M,G,Y,ne){return G},verifyOptions:_.verifyOptions||{},getCertificate:_.getCertificate||null,getPrivateKey:_.getPrivateKey||null,getSignature:_.getSignature||null,input:t.util.createBuffer(),tlsData:t.util.createBuffer(),data:t.util.createBuffer(),tlsDataReady:_.tlsDataReady,dataReady:_.dataReady,heartbeatReceived:_.heartbeatReceived,closed:_.closed,error:function(M,G){G.origin=G.origin||(M.entity===a.ConnectionEnd.client?"client":"server"),G.send&&(a.queue(M,a.createAlert(M,G.alert)),a.flush(M));var Y=G.fatal!==!1;Y&&(M.fail=!0),_.error(M,G),Y&&M.close(!1)},deflate:_.deflate||null,inflate:_.inflate||null};P.reset=function(M){P.version={major:a.Version.major,minor:a.Version.minor},P.record=null,P.session=null,P.peerCertificate=null,P.state={pending:null,current:null},P.expect=P.entity===a.ConnectionEnd.client?g:i,P.fragmented=null,P.records=[],P.open=!1,P.handshakes=0,P.handshaking=!1,P.isConnected=!1,P.fail=!(M||typeof M>"u"),P.input.clear(),P.tlsData.clear(),P.data.clear(),P.state.current=a.createConnectionState(P)},P.reset();var K=function(M,G){var Y=G.type-a.ContentType.change_cipher_spec,ne=j[M.entity][M.expect];Y in ne?ne[Y](M,G):a.handleUnexpected(M,G)},V=function(M){var G=0,Y=M.input,ne=Y.length();if(ne<5)G=5-ne;else{M.record={type:Y.getByte(),version:{major:Y.getByte(),minor:Y.getByte()},length:Y.getInt16(),fragment:t.util.createBuffer(),ready:!1};var te=M.record.version.major===M.version.major;te&&M.session&&M.session.version&&(te=M.record.version.minor===M.version.minor),te||M.error(M,{message:"Incompatible TLS version.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}})}return G},$=function(M){var G=0,Y=M.input,ne=Y.length();if(ne<M.record.length)G=M.record.length-ne;else{M.record.fragment.putBytes(Y.getBytes(M.record.length)),Y.compact();var te=M.state.current.read;te.update(M,M.record)&&(M.fragmented!==null&&(M.fragmented.type===M.record.type?(M.fragmented.fragment.putBuffer(M.record.fragment),M.record=M.fragmented):M.error(M,{message:"Invalid fragmented record.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})),M.record.ready=!0)}return G};return P.handshake=function(M){if(P.entity!==a.ConnectionEnd.client)P.error(P,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(P.handshaking)P.error(P,{message:"Handshake already in progress.",fatal:!1});else{P.fail&&!P.open&&P.handshakes===0&&(P.fail=!1),P.handshaking=!0,M=M||"";var G=null;M.length>0&&(P.sessionCache&&(G=P.sessionCache.getSession(M)),G===null&&(M="")),M.length===0&&P.sessionCache&&(G=P.sessionCache.getSession(),G!==null&&(M=G.id)),P.session={id:M,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:t.md.md5.create(),sha1:t.md.sha1.create()},G&&(P.version=G.version,P.session.sp=G.sp),P.session.sp.client_random=a.createRandom().getBytes(),P.open=!0,a.queue(P,a.createRecord(P,{type:a.ContentType.handshake,data:a.createClientHello(P)})),a.flush(P)}},P.process=function(M){var G=0;return M&&P.input.putBytes(M),P.fail||(P.record!==null&&P.record.ready&&P.record.fragment.isEmpty()&&(P.record=null),P.record===null&&(G=V(P)),!P.fail&&P.record!==null&&!P.record.ready&&(G=$(P)),!P.fail&&P.record!==null&&P.record.ready&&K(P,P.record)),G},P.prepare=function(M){return a.queue(P,a.createRecord(P,{type:a.ContentType.application_data,data:t.util.createBuffer(M)})),a.flush(P)},P.prepareHeartbeatRequest=function(M,G){return M instanceof t.util.ByteBuffer&&(M=M.bytes()),typeof G>"u"&&(G=M.length),P.expectedHeartbeatPayload=M,a.queue(P,a.createRecord(P,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_request,M,G)})),a.flush(P)},P.close=function(M){if(!P.fail&&P.sessionCache&&P.session){var G={id:P.session.id,version:P.session.version,sp:P.session.sp};G.sp.keys=null,P.sessionCache.setSession(G.id,G)}P.open&&(P.open=!1,P.input.clear(),(P.isConnected||P.handshaking)&&(P.isConnected=P.handshaking=!1,a.queue(P,a.createAlert(P,{level:a.Alert.Level.warning,description:a.Alert.Description.close_notify})),a.flush(P)),P.closed(P)),P.reset(M)},P},fi=t.tls=t.tls||{};for(var fe in a)typeof a[fe]!="function"&&(t.tls[fe]=a[fe]);return t.tls.prf_tls1=e,t.tls.hmac_sha1=r,t.tls.createSessionCache=a.createSessionCache,t.tls.createConnection=a.createConnection,fi}var Mo;function rd(){if(Mo)return Va.exports;Mo=1;var t=me();sr(),Ou();var e=Va.exports=t.tls;e.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(g){g.bulk_cipher_algorithm=e.BulkCipherAlgorithm.aes,g.cipher_type=e.CipherType.block,g.enc_key_length=16,g.block_length=16,g.fixed_iv_length=16,g.record_iv_length=16,g.mac_algorithm=e.MACAlgorithm.hmac_sha1,g.mac_length=20,g.mac_key_length=20},initConnectionState:r},e.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(g){g.bulk_cipher_algorithm=e.BulkCipherAlgorithm.aes,g.cipher_type=e.CipherType.block,g.enc_key_length=32,g.block_length=16,g.fixed_iv_length=16,g.record_iv_length=16,g.mac_algorithm=e.MACAlgorithm.hmac_sha1,g.mac_length=20,g.mac_key_length=20},initConnectionState:r};function r(g,f,A){var E=f.entity===t.tls.ConnectionEnd.client;g.read.cipherState={init:!1,cipher:t.cipher.createDecipher("AES-CBC",E?A.keys.server_write_key:A.keys.client_write_key),iv:E?A.keys.server_write_IV:A.keys.client_write_IV},g.write.cipherState={init:!1,cipher:t.cipher.createCipher("AES-CBC",E?A.keys.client_write_key:A.keys.server_write_key),iv:E?A.keys.client_write_IV:A.keys.server_write_IV},g.read.cipherFunction=u,g.write.cipherFunction=n,g.read.macLength=g.write.macLength=A.mac_length,g.read.macFunction=g.write.macFunction=e.hmac_sha1}function n(g,f){var A=!1,E=f.macFunction(f.macKey,f.sequenceNumber,g);g.fragment.putBytes(E),f.updateSequenceNumber();var p;g.version.minor===e.Versions.TLS_1_0.minor?p=f.cipherState.init?null:f.cipherState.iv:p=t.random.getBytesSync(16),f.cipherState.init=!0;var s=f.cipherState.cipher;return s.start({iv:p}),g.version.minor>=e.Versions.TLS_1_1.minor&&s.output.putBytes(p),s.update(g.fragment),s.finish(o)&&(g.fragment=s.output,g.length=g.fragment.length(),A=!0),A}function o(g,f,A){if(!A){var E=g-f.length()%g;f.fillWithByte(E-1,E)}return!0}function c(g,f,A){var E=!0;if(A){for(var p=f.length(),s=f.last(),m=p-1-s;m<p-1;++m)E=E&&f.at(m)==s;E&&f.truncate(s+1)}return E}function u(g,f){var A=!1,E;g.version.minor===e.Versions.TLS_1_0.minor?E=f.cipherState.init?null:f.cipherState.iv:E=g.fragment.getBytes(16),f.cipherState.init=!0;var p=f.cipherState.cipher;p.start({iv:E}),p.update(g.fragment),A=p.finish(c);var s=f.macLength,m=t.random.getBytesSync(s),y=p.output.length();y>=s?(g.fragment=p.output.getBytes(y-s),m=p.output.getBytes(s)):g.fragment=p.output.getBytes(),g.fragment=t.util.createBuffer(g.fragment),g.length=g.fragment.length();var S=f.macFunction(f.macKey,f.sequenceNumber,g);return f.updateSequenceNumber(),A=a(f.macKey,m,S)&&A,A}function a(g,f,A){var E=t.hmac.create();return E.start("SHA1",g),E.update(f),f=E.digest().getBytes(),E.start(null,null),E.update(A),A=E.digest().getBytes(),f===A}return Va.exports}var di={exports:{}},qo;function Uu(){if(qo)return di.exports;qo=1;var t=me();Ut(),Ae();var e=di.exports=t.sha512=t.sha512||{};t.md.sha512=t.md.algorithms.sha512=e;var r=t.sha384=t.sha512.sha384=t.sha512.sha384||{};r.create=function(){return e.create("SHA-384")},t.md.sha384=t.md.algorithms.sha384=r,t.sha512.sha256=t.sha512.sha256||{create:function(){return e.create("SHA-512/256")}},t.md["sha512/256"]=t.md.algorithms["sha512/256"]=t.sha512.sha256,t.sha512.sha224=t.sha512.sha224||{create:function(){return e.create("SHA-512/224")}},t.md["sha512/224"]=t.md.algorithms["sha512/224"]=t.sha512.sha224,e.create=function(f){if(o||a(),typeof f>"u"&&(f="SHA-512"),!(f in u))throw new Error("Invalid SHA-512 algorithm: "+f);for(var A=u[f],E=null,p=t.util.createBuffer(),s=new Array(80),m=0;m<80;++m)s[m]=new Array(2);var y=64;switch(f){case"SHA-384":y=48;break;case"SHA-512/256":y=32;break;case"SHA-512/224":y=28;break}var S={algorithm:f.replace("-","").toLowerCase(),blockLength:128,digestLength:y,messageLength:0,fullMessageLength:null,messageLengthSize:16};return S.start=function(){S.messageLength=0,S.fullMessageLength=S.messageLength128=[];for(var i=S.messageLengthSize/4,v=0;v<i;++v)S.fullMessageLength.push(0);p=t.util.createBuffer(),E=new Array(A.length);for(var v=0;v<A.length;++v)E[v]=A[v].slice(0);return S},S.start(),S.update=function(i,v){v==="utf8"&&(i=t.util.encodeUtf8(i));var C=i.length;S.messageLength+=C,C=[C/4294967296>>>0,C>>>0];for(var I=S.fullMessageLength.length-1;I>=0;--I)S.fullMessageLength[I]+=C[1],C[1]=C[0]+(S.fullMessageLength[I]/4294967296>>>0),S.fullMessageLength[I]=S.fullMessageLength[I]>>>0,C[0]=C[1]/4294967296>>>0;return p.putBytes(i),g(E,s,p),(p.read>2048||p.length()===0)&&p.compact(),S},S.digest=function(){var i=t.util.createBuffer();i.putBytes(p.bytes());var v=S.fullMessageLength[S.fullMessageLength.length-1]+S.messageLengthSize,C=v&S.blockLength-1;i.putBytes(n.substr(0,S.blockLength-C));for(var I,B,T=S.fullMessageLength[0]*8,h=0;h<S.fullMessageLength.length-1;++h)I=S.fullMessageLength[h+1]*8,B=I/4294967296>>>0,T+=B,i.putInt32(T>>>0),T=I>>>0;i.putInt32(T);for(var l=new Array(E.length),h=0;h<E.length;++h)l[h]=E[h].slice(0);g(l,s,i);var R=t.util.createBuffer(),N;f==="SHA-512"?N=l.length:f==="SHA-384"?N=l.length-2:N=l.length-4;for(var h=0;h<N;++h)R.putInt32(l[h][0]),(h!==N-1||f!=="SHA-512/224")&&R.putInt32(l[h][1]);return R},S};var n=null,o=!1,c=null,u=null;function a(){n=String.fromCharCode(128),n+=t.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],o=!0}function g(f,A,E){for(var p,s,m,y,S,i,v,C,I,B,T,h,l,R,N,F,D,q,j,H,Q,J,X,re,se,de,ye,_e,W,he,ae,ke,fe,_,x,w=E.length();w>=128;){for(W=0;W<16;++W)A[W][0]=E.getInt32()>>>0,A[W][1]=E.getInt32()>>>0;for(;W<80;++W)ke=A[W-2],he=ke[0],ae=ke[1],p=((he>>>19|ae<<13)^(ae>>>29|he<<3)^he>>>6)>>>0,s=((he<<13|ae>>>19)^(ae<<3|he>>>29)^(he<<26|ae>>>6))>>>0,_=A[W-15],he=_[0],ae=_[1],m=((he>>>1|ae<<31)^(he>>>8|ae<<24)^he>>>7)>>>0,y=((he<<31|ae>>>1)^(he<<24|ae>>>8)^(he<<25|ae>>>7))>>>0,fe=A[W-7],x=A[W-16],ae=s+fe[1]+y+x[1],A[W][0]=p+fe[0]+m+x[0]+(ae/4294967296>>>0)>>>0,A[W][1]=ae>>>0;for(l=f[0][0],R=f[0][1],N=f[1][0],F=f[1][1],D=f[2][0],q=f[2][1],j=f[3][0],H=f[3][1],Q=f[4][0],J=f[4][1],X=f[5][0],re=f[5][1],se=f[6][0],de=f[6][1],ye=f[7][0],_e=f[7][1],W=0;W<80;++W)v=((Q>>>14|J<<18)^(Q>>>18|J<<14)^(J>>>9|Q<<23))>>>0,C=((Q<<18|J>>>14)^(Q<<14|J>>>18)^(J<<23|Q>>>9))>>>0,I=(se^Q&(X^se))>>>0,B=(de^J&(re^de))>>>0,S=((l>>>28|R<<4)^(R>>>2|l<<30)^(R>>>7|l<<25))>>>0,i=((l<<4|R>>>28)^(R<<30|l>>>2)^(R<<25|l>>>7))>>>0,T=(l&N|D&(l^N))>>>0,h=(R&F|q&(R^F))>>>0,ae=_e+C+B+c[W][1]+A[W][1],p=ye+v+I+c[W][0]+A[W][0]+(ae/4294967296>>>0)>>>0,s=ae>>>0,ae=i+h,m=S+T+(ae/4294967296>>>0)>>>0,y=ae>>>0,ye=se,_e=de,se=X,de=re,X=Q,re=J,ae=H+s,Q=j+p+(ae/4294967296>>>0)>>>0,J=ae>>>0,j=D,H=q,D=N,q=F,N=l,F=R,ae=s+y,l=p+m+(ae/4294967296>>>0)>>>0,R=ae>>>0;ae=f[0][1]+R,f[0][0]=f[0][0]+l+(ae/4294967296>>>0)>>>0,f[0][1]=ae>>>0,ae=f[1][1]+F,f[1][0]=f[1][0]+N+(ae/4294967296>>>0)>>>0,f[1][1]=ae>>>0,ae=f[2][1]+q,f[2][0]=f[2][0]+D+(ae/4294967296>>>0)>>>0,f[2][1]=ae>>>0,ae=f[3][1]+H,f[3][0]=f[3][0]+j+(ae/4294967296>>>0)>>>0,f[3][1]=ae>>>0,ae=f[4][1]+J,f[4][0]=f[4][0]+Q+(ae/4294967296>>>0)>>>0,f[4][1]=ae>>>0,ae=f[5][1]+re,f[5][0]=f[5][0]+X+(ae/4294967296>>>0)>>>0,f[5][1]=ae>>>0,ae=f[6][1]+de,f[6][0]=f[6][0]+se+(ae/4294967296>>>0)>>>0,f[6][1]=ae>>>0,ae=f[7][1]+_e,f[7][0]=f[7][0]+ye+(ae/4294967296>>>0)>>>0,f[7][1]=ae>>>0,w-=128}}return di.exports}var _n={},Vo;function nd(){if(Vo)return _n;Vo=1;var t=me();Tt();var e=t.asn1;return _n.privateKeyValidator={name:"PrivateKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},_n.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]},_n}var hi,Ko;function ad(){if(Ko)return hi;Ko=1;var t=me();ca(),yt(),Uu(),Ae();var e=nd(),r=e.publicKeyValidator,n=e.privateKeyValidator;if(typeof o>"u")var o=t.jsbn.BigInteger;var c=t.util.ByteBuffer,u=typeof Buffer>"u"?Uint8Array:Buffer;t.pki=t.pki||{},hi=t.pki.ed25519=t.ed25519=t.ed25519||{};var a=t.ed25519;a.constants={},a.constants.PUBLIC_KEY_BYTE_LENGTH=32,a.constants.PRIVATE_KEY_BYTE_LENGTH=64,a.constants.SEED_BYTE_LENGTH=32,a.constants.SIGN_BYTE_LENGTH=64,a.constants.HASH_BYTE_LENGTH=64,a.generateKeyPair=function(_){_=_||{};var x=_.seed;if(x===void 0)x=t.random.getBytesSync(a.constants.SEED_BYTE_LENGTH);else if(typeof x=="string"){if(x.length!==a.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+a.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(x instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');x=g({message:x,encoding:"binary"});for(var w=new u(a.constants.PUBLIC_KEY_BYTE_LENGTH),d=new u(a.constants.PRIVATE_KEY_BYTE_LENGTH),b=0;b<32;++b)d[b]=x[b];return v(w,d),{publicKey:w,privateKey:d}},a.privateKeyFromAsn1=function(_){var x={},w=[],d=t.asn1.validate(_,n,x,w);if(!d){var b=new Error("Invalid Key.");throw b.errors=w,b}var U=t.asn1.derToOid(x.privateKeyOid),P=t.oids.EdDSA25519;if(U!==P)throw new Error('Invalid OID "'+U+'"; OID must be "'+P+'".');var K=x.privateKey,V=g({message:t.asn1.fromDer(K).value,encoding:"binary"});return{privateKeyBytes:V}},a.publicKeyFromAsn1=function(_){var x={},w=[],d=t.asn1.validate(_,r,x,w);if(!d){var b=new Error("Invalid Key.");throw b.errors=w,b}var U=t.asn1.derToOid(x.publicKeyOid),P=t.oids.EdDSA25519;if(U!==P)throw new Error('Invalid OID "'+U+'"; OID must be "'+P+'".');var K=x.ed25519PublicKey;if(K.length!==a.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return g({message:K,encoding:"binary"})},a.publicKeyFromPrivateKey=function(_){_=_||{};var x=g({message:_.privateKey,encoding:"binary"});if(x.length!==a.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+a.constants.PRIVATE_KEY_BYTE_LENGTH);for(var w=new u(a.constants.PUBLIC_KEY_BYTE_LENGTH),d=0;d<w.length;++d)w[d]=x[32+d];return w},a.sign=function(_){_=_||{};var x=g(_),w=g({message:_.privateKey,encoding:"binary"});if(w.length===a.constants.SEED_BYTE_LENGTH){var d=a.generateKeyPair({seed:w});w=d.privateKey}else if(w.length!==a.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+a.constants.SEED_BYTE_LENGTH+" or "+a.constants.PRIVATE_KEY_BYTE_LENGTH);var b=new u(a.constants.SIGN_BYTE_LENGTH+x.length);C(b,x,x.length,w);for(var U=new u(a.constants.SIGN_BYTE_LENGTH),P=0;P<U.length;++P)U[P]=b[P];return U},a.verify=function(_){_=_||{};var x=g(_);if(_.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var w=g({message:_.signature,encoding:"binary"});if(w.length!==a.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+a.constants.SIGN_BYTE_LENGTH);var d=g({message:_.publicKey,encoding:"binary"});if(d.length!==a.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+a.constants.PUBLIC_KEY_BYTE_LENGTH);var b=new u(a.constants.SIGN_BYTE_LENGTH+x.length),U=new u(a.constants.SIGN_BYTE_LENGTH+x.length),P;for(P=0;P<a.constants.SIGN_BYTE_LENGTH;++P)b[P]=w[P];for(P=0;P<x.length;++P)b[P+a.constants.SIGN_BYTE_LENGTH]=x[P];return I(U,b,b.length,d)>=0};function g(_){var x=_.message;if(x instanceof Uint8Array||x instanceof u)return x;var w=_.encoding;if(x===void 0)if(_.md)x=_.md.digest().getBytes(),w="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof x=="string"&&!w)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof x=="string"){if(typeof Buffer<"u")return Buffer.from(x,w);x=new c(x,w)}else if(!(x instanceof c))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var d=new u(x.length()),b=0;b<d.length;++b)d[b]=x.at(b);return d}var f=W(),A=W([1]),E=W([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=W([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),s=W([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=W([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),S=W([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function i(_,x){var w=t.md.sha512.create(),d=new c(_);w.update(d.getBytes(x),"binary");var b=w.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(b,"binary");for(var U=new u(a.constants.HASH_BYTE_LENGTH),P=0;P<64;++P)U[P]=b.charCodeAt(P);return U}function v(_,x){var w=[W(),W(),W(),W()],d,b=i(x,32);for(b[0]&=248,b[31]&=127,b[31]|=64,re(w,b),R(_,w),d=0;d<32;++d)x[d+32]=_[d];return 0}function C(_,x,w,d){var b,U,P=new Float64Array(64),K=[W(),W(),W(),W()],V=i(d,32);V[0]&=248,V[31]&=127,V[31]|=64;var $=w+64;for(b=0;b<w;++b)_[64+b]=x[b];for(b=0;b<32;++b)_[32+b]=V[32+b];var M=i(_.subarray(32),w+32);for(T(M),re(K,M),R(_,K),b=32;b<64;++b)_[b]=d[b];var G=i(_,w+64);for(T(G),b=32;b<64;++b)P[b]=0;for(b=0;b<32;++b)P[b]=M[b];for(b=0;b<32;++b)for(U=0;U<32;U++)P[b+U]+=G[b]*V[U];return B(_.subarray(32),P),$}function I(_,x,w,d){var b,U,P=new u(32),K=[W(),W(),W(),W()],V=[W(),W(),W(),W()];if(U=-1,w<64||F(V,d))return-1;for(b=0;b<w;++b)_[b]=x[b];for(b=0;b<32;++b)_[b+32]=d[b];var $=i(_,w);if(T($),X(K,V,$),re(V,x.subarray(32)),h(K,V),R(P,K),w-=64,H(x,0,P,0)){for(b=0;b<w;++b)_[b]=0;return-1}for(b=0;b<w;++b)_[b]=x[b+64];return U=w,U}function B(_,x){var w,d,b,U;for(d=63;d>=32;--d){for(w=0,b=d-32,U=d-12;b<U;++b)x[b]+=w-16*x[d]*y[b-(d-32)],w=x[b]+128>>8,x[b]-=w*256;x[b]+=w,x[d]=0}for(w=0,b=0;b<32;++b)x[b]+=w-(x[31]>>4)*y[b],w=x[b]>>8,x[b]&=255;for(b=0;b<32;++b)x[b]-=w*y[b];for(d=0;d<32;++d)x[d+1]+=x[d]>>8,_[d]=x[d]&255}function T(_){for(var x=new Float64Array(64),w=0;w<64;++w)x[w]=_[w],_[w]=0;B(_,x)}function h(_,x){var w=W(),d=W(),b=W(),U=W(),P=W(),K=W(),V=W(),$=W(),M=W();ae(w,_[1],_[0]),ae(M,x[1],x[0]),fe(w,w,M),he(d,_[0],_[1]),he(M,x[0],x[1]),fe(d,d,M),fe(b,_[3],x[3]),fe(b,b,p),fe(U,_[2],x[2]),he(U,U,U),ae(P,d,w),ae(K,U,b),he(V,U,b),he($,d,w),fe(_[0],P,K),fe(_[1],$,V),fe(_[2],V,K),fe(_[3],P,$)}function l(_,x,w){for(var d=0;d<4;++d)_e(_[d],x[d],w)}function R(_,x){var w=W(),d=W(),b=W();de(b,x[2]),fe(w,x[0],b),fe(d,x[1],b),N(_,d),_[31]^=J(w)<<7}function N(_,x){var w,d,b,U=W(),P=W();for(w=0;w<16;++w)P[w]=x[w];for(ye(P),ye(P),ye(P),d=0;d<2;++d){for(U[0]=P[0]-65517,w=1;w<15;++w)U[w]=P[w]-65535-(U[w-1]>>16&1),U[w-1]&=65535;U[15]=P[15]-32767-(U[14]>>16&1),b=U[15]>>16&1,U[14]&=65535,_e(P,U,1-b)}for(w=0;w<16;w++)_[2*w]=P[w]&255,_[2*w+1]=P[w]>>8}function F(_,x){var w=W(),d=W(),b=W(),U=W(),P=W(),K=W(),V=W();return se(_[2],A),D(_[1],x),ke(b,_[1]),fe(U,b,E),ae(b,b,_[2]),he(U,_[2],U),ke(P,U),ke(K,P),fe(V,K,P),fe(w,V,b),fe(w,w,U),q(w,w),fe(w,w,b),fe(w,w,U),fe(w,w,U),fe(_[0],w,U),ke(d,_[0]),fe(d,d,U),j(d,b)&&fe(_[0],_[0],S),ke(d,_[0]),fe(d,d,U),j(d,b)?-1:(J(_[0])===x[31]>>7&&ae(_[0],f,_[0]),fe(_[3],_[0],_[1]),0)}function D(_,x){var w;for(w=0;w<16;++w)_[w]=x[2*w]+(x[2*w+1]<<8);_[15]&=32767}function q(_,x){var w=W(),d;for(d=0;d<16;++d)w[d]=x[d];for(d=250;d>=0;--d)ke(w,w),d!==1&&fe(w,w,x);for(d=0;d<16;++d)_[d]=w[d]}function j(_,x){var w=new u(32),d=new u(32);return N(w,_),N(d,x),H(w,0,d,0)}function H(_,x,w,d){return Q(_,x,w,d,32)}function Q(_,x,w,d,b){var U,P=0;for(U=0;U<b;++U)P|=_[x+U]^w[d+U];return(1&P-1>>>8)-1}function J(_){var x=new u(32);return N(x,_),x[0]&1}function X(_,x,w){var d,b;for(se(_[0],f),se(_[1],A),se(_[2],A),se(_[3],f),b=255;b>=0;--b)d=w[b/8|0]>>(b&7)&1,l(_,x,d),h(x,_),h(_,_),l(_,x,d)}function re(_,x){var w=[W(),W(),W(),W()];se(w[0],s),se(w[1],m),se(w[2],A),fe(w[3],s,m),X(_,w,x)}function se(_,x){var w;for(w=0;w<16;w++)_[w]=x[w]|0}function de(_,x){var w=W(),d;for(d=0;d<16;++d)w[d]=x[d];for(d=253;d>=0;--d)ke(w,w),d!==2&&d!==4&&fe(w,w,x);for(d=0;d<16;++d)_[d]=w[d]}function ye(_){var x,w,d=1;for(x=0;x<16;++x)w=_[x]+d+65535,d=Math.floor(w/65536),_[x]=w-d*65536;_[0]+=d-1+37*(d-1)}function _e(_,x,w){for(var d,b=~(w-1),U=0;U<16;++U)d=b&(_[U]^x[U]),_[U]^=d,x[U]^=d}function W(_){var x,w=new Float64Array(16);if(_)for(x=0;x<_.length;++x)w[x]=_[x];return w}function he(_,x,w){for(var d=0;d<16;++d)_[d]=x[d]+w[d]}function ae(_,x,w){for(var d=0;d<16;++d)_[d]=x[d]-w[d]}function ke(_,x){fe(_,x,x)}function fe(_,x,w){var d,b,U=0,P=0,K=0,V=0,$=0,M=0,G=0,Y=0,ne=0,te=0,ue=0,pe=0,ge=0,ce=0,le=0,ve=0,be=0,Ne=0,Pe=0,we=0,Oe=0,Ie=0,Te=0,Ee=0,gt=0,xt=0,kt=0,zt=0,ur=0,Or=0,yn=0,Le=w[0],Fe=w[1],Me=w[2],qe=w[3],Ve=w[4],Ke=w[5],$e=w[6],Ge=w[7],je=w[8],He=w[9],ze=w[10],We=w[11],Re=w[12],De=w[13],Qe=w[14],Ye=w[15];d=x[0],U+=d*Le,P+=d*Fe,K+=d*Me,V+=d*qe,$+=d*Ve,M+=d*Ke,G+=d*$e,Y+=d*Ge,ne+=d*je,te+=d*He,ue+=d*ze,pe+=d*We,ge+=d*Re,ce+=d*De,le+=d*Qe,ve+=d*Ye,d=x[1],P+=d*Le,K+=d*Fe,V+=d*Me,$+=d*qe,M+=d*Ve,G+=d*Ke,Y+=d*$e,ne+=d*Ge,te+=d*je,ue+=d*He,pe+=d*ze,ge+=d*We,ce+=d*Re,le+=d*De,ve+=d*Qe,be+=d*Ye,d=x[2],K+=d*Le,V+=d*Fe,$+=d*Me,M+=d*qe,G+=d*Ve,Y+=d*Ke,ne+=d*$e,te+=d*Ge,ue+=d*je,pe+=d*He,ge+=d*ze,ce+=d*We,le+=d*Re,ve+=d*De,be+=d*Qe,Ne+=d*Ye,d=x[3],V+=d*Le,$+=d*Fe,M+=d*Me,G+=d*qe,Y+=d*Ve,ne+=d*Ke,te+=d*$e,ue+=d*Ge,pe+=d*je,ge+=d*He,ce+=d*ze,le+=d*We,ve+=d*Re,be+=d*De,Ne+=d*Qe,Pe+=d*Ye,d=x[4],$+=d*Le,M+=d*Fe,G+=d*Me,Y+=d*qe,ne+=d*Ve,te+=d*Ke,ue+=d*$e,pe+=d*Ge,ge+=d*je,ce+=d*He,le+=d*ze,ve+=d*We,be+=d*Re,Ne+=d*De,Pe+=d*Qe,we+=d*Ye,d=x[5],M+=d*Le,G+=d*Fe,Y+=d*Me,ne+=d*qe,te+=d*Ve,ue+=d*Ke,pe+=d*$e,ge+=d*Ge,ce+=d*je,le+=d*He,ve+=d*ze,be+=d*We,Ne+=d*Re,Pe+=d*De,we+=d*Qe,Oe+=d*Ye,d=x[6],G+=d*Le,Y+=d*Fe,ne+=d*Me,te+=d*qe,ue+=d*Ve,pe+=d*Ke,ge+=d*$e,ce+=d*Ge,le+=d*je,ve+=d*He,be+=d*ze,Ne+=d*We,Pe+=d*Re,we+=d*De,Oe+=d*Qe,Ie+=d*Ye,d=x[7],Y+=d*Le,ne+=d*Fe,te+=d*Me,ue+=d*qe,pe+=d*Ve,ge+=d*Ke,ce+=d*$e,le+=d*Ge,ve+=d*je,be+=d*He,Ne+=d*ze,Pe+=d*We,we+=d*Re,Oe+=d*De,Ie+=d*Qe,Te+=d*Ye,d=x[8],ne+=d*Le,te+=d*Fe,ue+=d*Me,pe+=d*qe,ge+=d*Ve,ce+=d*Ke,le+=d*$e,ve+=d*Ge,be+=d*je,Ne+=d*He,Pe+=d*ze,we+=d*We,Oe+=d*Re,Ie+=d*De,Te+=d*Qe,Ee+=d*Ye,d=x[9],te+=d*Le,ue+=d*Fe,pe+=d*Me,ge+=d*qe,ce+=d*Ve,le+=d*Ke,ve+=d*$e,be+=d*Ge,Ne+=d*je,Pe+=d*He,we+=d*ze,Oe+=d*We,Ie+=d*Re,Te+=d*De,Ee+=d*Qe,gt+=d*Ye,d=x[10],ue+=d*Le,pe+=d*Fe,ge+=d*Me,ce+=d*qe,le+=d*Ve,ve+=d*Ke,be+=d*$e,Ne+=d*Ge,Pe+=d*je,we+=d*He,Oe+=d*ze,Ie+=d*We,Te+=d*Re,Ee+=d*De,gt+=d*Qe,xt+=d*Ye,d=x[11],pe+=d*Le,ge+=d*Fe,ce+=d*Me,le+=d*qe,ve+=d*Ve,be+=d*Ke,Ne+=d*$e,Pe+=d*Ge,we+=d*je,Oe+=d*He,Ie+=d*ze,Te+=d*We,Ee+=d*Re,gt+=d*De,xt+=d*Qe,kt+=d*Ye,d=x[12],ge+=d*Le,ce+=d*Fe,le+=d*Me,ve+=d*qe,be+=d*Ve,Ne+=d*Ke,Pe+=d*$e,we+=d*Ge,Oe+=d*je,Ie+=d*He,Te+=d*ze,Ee+=d*We,gt+=d*Re,xt+=d*De,kt+=d*Qe,zt+=d*Ye,d=x[13],ce+=d*Le,le+=d*Fe,ve+=d*Me,be+=d*qe,Ne+=d*Ve,Pe+=d*Ke,we+=d*$e,Oe+=d*Ge,Ie+=d*je,Te+=d*He,Ee+=d*ze,gt+=d*We,xt+=d*Re,kt+=d*De,zt+=d*Qe,ur+=d*Ye,d=x[14],le+=d*Le,ve+=d*Fe,be+=d*Me,Ne+=d*qe,Pe+=d*Ve,we+=d*Ke,Oe+=d*$e,Ie+=d*Ge,Te+=d*je,Ee+=d*He,gt+=d*ze,xt+=d*We,kt+=d*Re,zt+=d*De,ur+=d*Qe,Or+=d*Ye,d=x[15],ve+=d*Le,be+=d*Fe,Ne+=d*Me,Pe+=d*qe,we+=d*Ve,Oe+=d*Ke,Ie+=d*$e,Te+=d*Ge,Ee+=d*je,gt+=d*He,xt+=d*ze,kt+=d*We,zt+=d*Re,ur+=d*De,Or+=d*Qe,yn+=d*Ye,U+=38*be,P+=38*Ne,K+=38*Pe,V+=38*we,$+=38*Oe,M+=38*Ie,G+=38*Te,Y+=38*Ee,ne+=38*gt,te+=38*xt,ue+=38*kt,pe+=38*zt,ge+=38*ur,ce+=38*Or,le+=38*yn,b=1,d=U+b+65535,b=Math.floor(d/65536),U=d-b*65536,d=P+b+65535,b=Math.floor(d/65536),P=d-b*65536,d=K+b+65535,b=Math.floor(d/65536),K=d-b*65536,d=V+b+65535,b=Math.floor(d/65536),V=d-b*65536,d=$+b+65535,b=Math.floor(d/65536),$=d-b*65536,d=M+b+65535,b=Math.floor(d/65536),M=d-b*65536,d=G+b+65535,b=Math.floor(d/65536),G=d-b*65536,d=Y+b+65535,b=Math.floor(d/65536),Y=d-b*65536,d=ne+b+65535,b=Math.floor(d/65536),ne=d-b*65536,d=te+b+65535,b=Math.floor(d/65536),te=d-b*65536,d=ue+b+65535,b=Math.floor(d/65536),ue=d-b*65536,d=pe+b+65535,b=Math.floor(d/65536),pe=d-b*65536,d=ge+b+65535,b=Math.floor(d/65536),ge=d-b*65536,d=ce+b+65535,b=Math.floor(d/65536),ce=d-b*65536,d=le+b+65535,b=Math.floor(d/65536),le=d-b*65536,d=ve+b+65535,b=Math.floor(d/65536),ve=d-b*65536,U+=b-1+37*(b-1),b=1,d=U+b+65535,b=Math.floor(d/65536),U=d-b*65536,d=P+b+65535,b=Math.floor(d/65536),P=d-b*65536,d=K+b+65535,b=Math.floor(d/65536),K=d-b*65536,d=V+b+65535,b=Math.floor(d/65536),V=d-b*65536,d=$+b+65535,b=Math.floor(d/65536),$=d-b*65536,d=M+b+65535,b=Math.floor(d/65536),M=d-b*65536,d=G+b+65535,b=Math.floor(d/65536),G=d-b*65536,d=Y+b+65535,b=Math.floor(d/65536),Y=d-b*65536,d=ne+b+65535,b=Math.floor(d/65536),ne=d-b*65536,d=te+b+65535,b=Math.floor(d/65536),te=d-b*65536,d=ue+b+65535,b=Math.floor(d/65536),ue=d-b*65536,d=pe+b+65535,b=Math.floor(d/65536),pe=d-b*65536,d=ge+b+65535,b=Math.floor(d/65536),ge=d-b*65536,d=ce+b+65535,b=Math.floor(d/65536),ce=d-b*65536,d=le+b+65535,b=Math.floor(d/65536),le=d-b*65536,d=ve+b+65535,b=Math.floor(d/65536),ve=d-b*65536,U+=b-1+37*(b-1),_[0]=U,_[1]=P,_[2]=K,_[3]=V,_[4]=$,_[5]=M,_[6]=G,_[7]=Y,_[8]=ne,_[9]=te,_[10]=ue,_[11]=pe,_[12]=ge,_[13]=ce,_[14]=le,_[15]=ve}return hi}var pi,$o;function id(){if($o)return pi;$o=1;var t=me();Ae(),yt(),ca(),pi=t.kem=t.kem||{};var e=t.jsbn.BigInteger;t.kem.rsa={},t.kem.rsa.create=function(n,o){o=o||{};var c=o.prng||t.random,u={};return u.encrypt=function(a,g){var f=Math.ceil(a.n.bitLength()/8),A;do A=new e(t.util.bytesToHex(c.getBytesSync(f)),16).mod(a.n);while(A.compareTo(e.ONE)<=0);A=t.util.hexToBytes(A.toString(16));var E=f-A.length;E>0&&(A=t.util.fillString(String.fromCharCode(0),E)+A);var p=a.encrypt(A,"NONE"),s=n.generate(A,g);return{encapsulation:p,key:s}},u.decrypt=function(a,g,f){var A=a.decrypt(g,"NONE");return n.generate(A,f)},u},t.kem.kdf1=function(n,o){r(this,n,0,o||n.digestLength)},t.kem.kdf2=function(n,o){r(this,n,1,o||n.digestLength)};function r(n,o,c,u){n.generate=function(a,g){for(var f=new t.util.ByteBuffer,A=Math.ceil(g/u)+c,E=new t.util.ByteBuffer,p=c;p<A;++p){E.putInt32(p),o.start(),o.update(a+E.getBytes());var s=o.digest();f.putBytes(s.getBytes(u))}return f.truncate(f.length()-g),f.getBytes()}}return pi}var yi,Go;function sd(){if(Go)return yi;Go=1;var t=me();Ae(),yi=t.log=t.log||{},t.log.levels=["none","error","warning","info","debug","verbose","max"];var e={},r=[],n=null;t.log.LEVEL_LOCKED=2,t.log.NO_LEVEL_CHECK=4,t.log.INTERPOLATE=8;for(var o=0;o<t.log.levels.length;++o){var c=t.log.levels[o];e[c]={index:o,name:c.toUpperCase()}}t.log.logMessage=function(p){for(var s=e[p.level].index,m=0;m<r.length;++m){var y=r[m];if(y.flags&t.log.NO_LEVEL_CHECK)y.f(p);else{var S=e[y.level].index;s<=S&&y.f(y,p)}}},t.log.prepareStandard=function(p){"standard"in p||(p.standard=e[p.level].name+" ["+p.category+"] "+p.message)},t.log.prepareFull=function(p){if(!("full"in p)){var s=[p.message];s=s.concat([]),p.full=t.util.format.apply(this,s)}},t.log.prepareStandardFull=function(p){"standardFull"in p||(t.log.prepareStandard(p),p.standardFull=p.standard)};for(var u=["error","warning","info","debug","verbose"],o=0;o<u.length;++o)(function(s){t.log[s]=function(m,y){var S=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:s,category:m,message:y,arguments:S};t.log.logMessage(i)}})(u[o]);if(t.log.makeLogger=function(p){var s={flags:0,f:p};return t.log.setLevel(s,"none"),s},t.log.setLevel=function(p,s){var m=!1;if(p&&!(p.flags&t.log.LEVEL_LOCKED))for(var y=0;y<t.log.levels.length;++y){var S=t.log.levels[y];if(s==S){p.level=s,m=!0;break}}return m},t.log.lock=function(p,s){typeof s>"u"||s?p.flags|=t.log.LEVEL_LOCKED:p.flags&=~t.log.LEVEL_LOCKED},t.log.addLogger=function(p){r.push(p)},typeof console<"u"&&"log"in console){var a;if(console.error&&console.warn&&console.info&&console.debug){var g={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(p,s){t.log.prepareStandard(s);var m=g[s.level],y=[s.standard];y=y.concat(s.arguments.slice()),m.apply(console,y)};a=t.log.makeLogger(f)}else{var f=function(s,m){t.log.prepareStandardFull(m),console.log(m.standardFull)};a=t.log.makeLogger(f)}t.log.setLevel(a,"debug"),t.log.addLogger(a),n=a}else console={log:function(){}};if(n!==null&&typeof window<"u"&&window.location){var A=new URL(window.location.href).searchParams;if(A.has("console.level")&&t.log.setLevel(n,A.get("console.level").slice(-1)[0]),A.has("console.lock")){var E=A.get("console.lock").slice(-1)[0];E=="true"&&t.log.lock(n)}}return t.log.consoleLogger=n,yi}var gi,jo;function od(){return jo||(jo=1,gi=Ut(),ys(),sn(),Tu(),Uu()),gi}var vi={exports:{}},Ho;function cd(){if(Ho)return vi.exports;Ho=1;var t=me();sr(),Tt(),oa(),or(),Rr(),Bu(),yt(),Ae(),ms();var e=t.asn1,r=vi.exports=t.pkcs7=t.pkcs7||{};r.messageFromPem=function(s){var m=t.pem.decode(s)[0];if(m.type!=="PKCS7"){var y=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw y.headerType=m.type,y}if(m.procType&&m.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var S=e.fromDer(m.body);return r.messageFromAsn1(S)},r.messageToPem=function(s,m){var y={type:"PKCS7",body:e.toDer(s.toAsn1()).getBytes()};return t.pem.encode(y,{maxline:m})},r.messageFromAsn1=function(s){var m={},y=[];if(!e.validate(s,r.asn1.contentInfoValidator,m,y)){var S=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw S.errors=y,S}var i=e.derToOid(m.contentType),v;switch(i){case t.pki.oids.envelopedData:v=r.createEnvelopedData();break;case t.pki.oids.encryptedData:v=r.createEncryptedData();break;case t.pki.oids.signedData:v=r.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return v.fromAsn1(m.content.value[0]),v},r.createSignedData=function(){var s=null;return s={type:t.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(S){if(E(s,S,r.asn1.signedDataValidator),s.certificates=[],s.crls=[],s.digestAlgorithmIdentifiers=[],s.contentInfo=null,s.signerInfos=[],s.rawCapture.certificates)for(var i=s.rawCapture.certificates.value,v=0;v<i.length;++v)s.certificates.push(t.pki.certificateFromAsn1(i[v]))},toAsn1:function(){s.contentInfo||s.sign();for(var S=[],i=0;i<s.certificates.length;++i)S.push(t.pki.certificateToAsn1(s.certificates[i]));var v=[],C=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(s.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,s.digestAlgorithmIdentifiers),s.contentInfo])]);return S.length>0&&C.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,S)),v.length>0&&C.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,v)),C.value[0].value.push(e.create(e.Class.UNIVERSAL,e.Type.SET,!0,s.signerInfos)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.type).getBytes()),C])},addSigner:function(S){var i=S.issuer,v=S.serialNumber;if(S.certificate){var C=S.certificate;typeof C=="string"&&(C=t.pki.certificateFromPem(C)),i=C.issuer.attributes,v=C.serialNumber}var I=S.key;if(!I)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof I=="string"&&(I=t.pki.privateKeyFromPem(I));var B=S.digestAlgorithm||t.pki.oids.sha1;switch(B){case t.pki.oids.sha1:case t.pki.oids.sha256:case t.pki.oids.sha384:case t.pki.oids.sha512:case t.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+B)}var T=S.authenticatedAttributes||[];if(T.length>0){for(var h=!1,l=!1,R=0;R<T.length;++R){var N=T[R];if(!h&&N.type===t.pki.oids.contentType){if(h=!0,l)break;continue}if(!l&&N.type===t.pki.oids.messageDigest){if(l=!0,h)break;continue}}if(!h||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}s.signers.push({key:I,version:1,issuer:i,serialNumber:v,digestAlgorithm:B,signatureAlgorithm:t.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:T,unauthenticatedAttributes:[]})},sign:function(S){if(S=S||{},(typeof s.content!="object"||s.contentInfo===null)&&(s.contentInfo=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(t.pki.oids.data).getBytes())]),"content"in s)){var i;s.content instanceof t.util.ByteBuffer?i=s.content.bytes():typeof s.content=="string"&&(i=t.util.encodeUtf8(s.content)),S.detached?s.detachedContent=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,i):s.contentInfo.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,i)]))}if(s.signers.length!==0){var v=m();y(v)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(S){typeof S=="string"&&(S=t.pki.certificateFromPem(S)),s.certificates.push(S)},addCertificateRevokationList:function(S){throw new Error("PKCS#7 CRL support not yet implemented.")}},s;function m(){for(var S={},i=0;i<s.signers.length;++i){var v=s.signers[i],C=v.digestAlgorithm;C in S||(S[C]=t.md[t.pki.oids[C]].create()),v.authenticatedAttributes.length===0?v.md=S[C]:v.md=t.md[t.pki.oids[C]].create()}s.digestAlgorithmIdentifiers=[];for(var C in S)s.digestAlgorithmIdentifiers.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(C).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]));return S}function y(S){var i;if(s.detachedContent?i=s.detachedContent:(i=s.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var v=e.derToOid(s.contentInfo.value[0].value),C=e.toDer(i);C.getByte(),e.getBerValueLength(C),C=C.getBytes();for(var I in S)S[I].start().update(C);for(var B=new Date,T=0;T<s.signers.length;++T){var h=s.signers[T];if(h.authenticatedAttributes.length===0){if(v!==t.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{h.authenticatedAttributesAsn1=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var l=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[]),R=0;R<h.authenticatedAttributes.length;++R){var N=h.authenticatedAttributes[R];N.type===t.pki.oids.messageDigest?N.value=S[h.digestAlgorithm].digest():N.type===t.pki.oids.signingTime&&(N.value||(N.value=B)),l.value.push(f(N)),h.authenticatedAttributesAsn1.value.push(f(N))}C=e.toDer(l).getBytes(),h.md.start().update(C)}h.signature=h.key.sign(h.md,"RSASSA-PKCS1-V1_5")}s.signerInfos=g(s.signers)}},r.createEncryptedData=function(){var s=null;return s={type:t.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:t.pki.oids["aes256-CBC"]},fromAsn1:function(m){E(s,m,r.asn1.encryptedDataValidator)},decrypt:function(m){m!==void 0&&(s.encryptedContent.key=m),p(s)}},s},r.createEnvelopedData=function(){var s=null;return s={type:t.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:t.pki.oids["aes256-CBC"]},fromAsn1:function(m){var y=E(s,m,r.asn1.envelopedDataValidator);s.recipients=c(y.recipientInfos.value)},toAsn1:function(){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.type).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(s.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,u(s.recipients)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,A(s.encryptedContent))])])])},findRecipient:function(m){for(var y=m.issuer.attributes,S=0;S<s.recipients.length;++S){var i=s.recipients[S],v=i.issuer;if(i.serialNumber===m.serialNumber&&v.length===y.length){for(var C=!0,I=0;I<y.length;++I)if(v[I].type!==y[I].type||v[I].value!==y[I].value){C=!1;break}if(C)return i}}return null},decrypt:function(m,y){if(s.encryptedContent.key===void 0&&m!==void 0&&y!==void 0)switch(m.encryptedContent.algorithm){case t.pki.oids.rsaEncryption:case t.pki.oids.desCBC:var S=y.decrypt(m.encryptedContent.content);s.encryptedContent.key=t.util.createBuffer(S);break;default:throw new Error("Unsupported asymmetric cipher, OID "+m.encryptedContent.algorithm)}p(s)},addRecipient:function(m){s.recipients.push({version:0,issuer:m.issuer.attributes,serialNumber:m.serialNumber,encryptedContent:{algorithm:t.pki.oids.rsaEncryption,key:m.publicKey}})},encrypt:function(m,y){if(s.encryptedContent.content===void 0){y=y||s.encryptedContent.algorithm,m=m||s.encryptedContent.key;var S,i,v;switch(y){case t.pki.oids["aes128-CBC"]:S=16,i=16,v=t.aes.createEncryptionCipher;break;case t.pki.oids["aes192-CBC"]:S=24,i=16,v=t.aes.createEncryptionCipher;break;case t.pki.oids["aes256-CBC"]:S=32,i=16,v=t.aes.createEncryptionCipher;break;case t.pki.oids["des-EDE3-CBC"]:S=24,i=8,v=t.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+y)}if(m===void 0)m=t.util.createBuffer(t.random.getBytes(S));else if(m.length()!=S)throw new Error("Symmetric key has wrong length; got "+m.length()+" bytes, expected "+S+".");s.encryptedContent.algorithm=y,s.encryptedContent.key=m,s.encryptedContent.parameter=t.util.createBuffer(t.random.getBytes(i));var C=v(m);if(C.start(s.encryptedContent.parameter.copy()),C.update(s.content),!C.finish())throw new Error("Symmetric encryption failed.");s.encryptedContent.content=C.output}for(var I=0;I<s.recipients.length;++I){var B=s.recipients[I];if(B.encryptedContent.content===void 0)switch(B.encryptedContent.algorithm){case t.pki.oids.rsaEncryption:B.encryptedContent.content=B.encryptedContent.key.encrypt(s.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+B.encryptedContent.algorithm)}}}},s};function n(s){var m={},y=[];if(!e.validate(s,r.asn1.recipientInfoValidator,m,y)){var S=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw S.errors=y,S}return{version:m.version.charCodeAt(0),issuer:t.pki.RDNAttributesAsArray(m.issuer),serialNumber:t.util.createBuffer(m.serial).toHex(),encryptedContent:{algorithm:e.derToOid(m.encAlgorithm),parameter:m.encParameter?m.encParameter.value:void 0,content:m.encKey}}}function o(s){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(s.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[t.pki.distinguishedNameToAsn1({attributes:s.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,t.util.hexToBytes(s.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.encryptedContent.algorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,s.encryptedContent.content)])}function c(s){for(var m=[],y=0;y<s.length;++y)m.push(n(s[y]));return m}function u(s){for(var m=[],y=0;y<s.length;++y)m.push(o(s[y]));return m}function a(s){var m=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(s.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[t.pki.distinguishedNameToAsn1({attributes:s.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,t.util.hexToBytes(s.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.digestAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])]);if(s.authenticatedAttributesAsn1&&m.value.push(s.authenticatedAttributesAsn1),m.value.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.signatureAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])),m.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,s.signature)),s.unauthenticatedAttributes.length>0){for(var y=e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[]),S=0;S<s.unauthenticatedAttributes.length;++S){var i=s.unauthenticatedAttributes[S];y.values.push(f(i))}m.value.push(y)}return m}function g(s){for(var m=[],y=0;y<s.length;++y)m.push(a(s[y]));return m}function f(s){var m;if(s.type===t.pki.oids.contentType)m=e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.value).getBytes());else if(s.type===t.pki.oids.messageDigest)m=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,s.value.bytes());else if(s.type===t.pki.oids.signingTime){var y=new Date("1950-01-01T00:00:00Z"),S=new Date("2050-01-01T00:00:00Z"),i=s.value;if(typeof i=="string"){var v=Date.parse(i);isNaN(v)?i.length===13?i=e.utcTimeToDate(i):i=e.generalizedTimeToDate(i):i=new Date(v)}i>=y&&i<S?m=e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(i)):m=e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(i))}return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[m])])}function A(s){return[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(t.pki.oids.data).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(s.algorithm).getBytes()),s.parameter?e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,s.parameter.getBytes()):void 0]),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,s.content.getBytes())])]}function E(s,m,y){var S={},i=[];if(!e.validate(m,y,S,i)){var v=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw v.errors=v,v}var C=e.derToOid(S.contentType);if(C!==t.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(S.encryptedContent){var I="";if(t.util.isArray(S.encryptedContent))for(var B=0;B<S.encryptedContent.length;++B){if(S.encryptedContent[B].type!==e.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");I+=S.encryptedContent[B].value}else I=S.encryptedContent;s.encryptedContent={algorithm:e.derToOid(S.encAlgorithm),parameter:t.util.createBuffer(S.encParameter.value),content:t.util.createBuffer(I)}}if(S.content){var I="";if(t.util.isArray(S.content))for(var B=0;B<S.content.length;++B){if(S.content[B].type!==e.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");I+=S.content[B].value}else I=S.content;s.content=t.util.createBuffer(I)}return s.version=S.version.charCodeAt(0),s.rawCapture=S,S}function p(s){if(s.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(s.content===void 0){var m;switch(s.encryptedContent.algorithm){case t.pki.oids["aes128-CBC"]:case t.pki.oids["aes192-CBC"]:case t.pki.oids["aes256-CBC"]:m=t.aes.createDecryptionCipher(s.encryptedContent.key);break;case t.pki.oids.desCBC:case t.pki.oids["des-EDE3-CBC"]:m=t.des.createDecryptionCipher(s.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+s.encryptedContent.algorithm)}if(m.start(s.encryptedContent.parameter),m.update(s.encryptedContent.content),!m.finish())throw new Error("Symmetric decryption failed.");s.content=m.output}}return vi.exports}var mi={exports:{}},zo;function ud(){if(zo)return mi.exports;zo=1;var t=me();sr(),an(),ys(),sn(),Ae();var e=mi.exports=t.ssh=t.ssh||{};e.privateKeyToPutty=function(c,u,a){a=a||"",u=u||"";var g="ssh-rsa",f=u===""?"none":"aes256-cbc",A="PuTTY-User-Key-File-2: "+g+`\r
`;A+="Encryption: "+f+`\r
`,A+="Comment: "+a+`\r
`;var E=t.util.createBuffer();n(E,g),r(E,c.e),r(E,c.n);var p=t.util.encode64(E.bytes(),64),s=Math.floor(p.length/66)+1;A+="Public-Lines: "+s+`\r
`,A+=p;var m=t.util.createBuffer();r(m,c.d),r(m,c.p),r(m,c.q),r(m,c.qInv);var y;if(!u)y=t.util.encode64(m.bytes(),64);else{var S=m.length()+16-1;S-=S%16;var i=o(m.bytes());i.truncate(i.length()-S+m.length()),m.putBuffer(i);var v=t.util.createBuffer();v.putBuffer(o("\0\0\0\0",u)),v.putBuffer(o("\0\0\0",u));var C=t.aes.createEncryptionCipher(v.truncate(8),"CBC");C.start(t.util.createBuffer().fillWithByte(0,16)),C.update(m.copy()),C.finish();var I=C.output;I.truncate(16),y=t.util.encode64(I.bytes(),64)}s=Math.floor(y.length/66)+1,A+=`\r
Private-Lines: `+s+`\r
`,A+=y;var B=o("putty-private-key-file-mac-key",u),T=t.util.createBuffer();n(T,g),n(T,f),n(T,a),T.putInt32(E.length()),T.putBuffer(E),T.putInt32(m.length()),T.putBuffer(m);var h=t.hmac.create();return h.start("sha1",B),h.update(T.bytes()),A+=`\r
Private-MAC: `+h.digest().toHex()+`\r
`,A},e.publicKeyToOpenSSH=function(c,u){var a="ssh-rsa";u=u||"";var g=t.util.createBuffer();return n(g,a),r(g,c.e),r(g,c.n),a+" "+t.util.encode64(g.bytes())+" "+u},e.privateKeyToOpenSSH=function(c,u){return u?t.pki.encryptRsaPrivateKey(c,u,{legacy:!0,algorithm:"aes128"}):t.pki.privateKeyToPem(c)},e.getPublicKeyFingerprint=function(c,u){u=u||{};var a=u.md||t.md.md5.create(),g="ssh-rsa",f=t.util.createBuffer();n(f,g),r(f,c.e),r(f,c.n),a.start(),a.update(f.getBytes());var A=a.digest();if(u.encoding==="hex"){var E=A.toHex();return u.delimiter?E.match(/.{2}/g).join(u.delimiter):E}else{if(u.encoding==="binary")return A.getBytes();if(u.encoding)throw new Error('Unknown encoding "'+u.encoding+'".')}return A};function r(c,u){var a=u.toString(16);a[0]>="8"&&(a="00"+a);var g=t.util.hexToBytes(a);c.putInt32(g.length),c.putBytes(g)}function n(c,u){c.putInt32(u.length),c.putString(u)}function o(){for(var c=t.md.sha1.create(),u=arguments.length,a=0;a<u;++a)c.update(arguments[a]);return c.digest()}return mi.exports}var Ei,Wo;function ld(){return Wo||(Wo=1,Ei=me(),sr(),rd(),Tt(),ps(),oa(),ad(),an(),id(),sd(),od(),Ru(),gs(),Rr(),wu(),Nu(),cd(),Pu(),Iu(),xu(),vs(),yt(),_u(),ud(),Ou(),Ae()),Ei}var Qo;function fd(){if(Qo)return kr;Qo=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.getPem=void 0;const t=nr,e=ld(),n=(0,Pt.promisify)(t.readFile);function o(a,g){if(g)c(a).then(f=>g(null,f)).catch(f=>g(f,null));else return c(a)}kr.getPem=o;function c(a){return n(a,{encoding:"base64"}).then(g=>u(g))}function u(a){const g=e.util.decode64(a),f=e.asn1.fromDer(g),E=e.pkcs12.pkcs12FromAsn1(f,"notasecret").getBags({friendlyName:"privatekey"});if(E.friendlyName){const p=E.friendlyName[0].key;return e.pki.privateKeyToPem(p).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}return kr}Object.defineProperty(na,"__esModule",{value:!0});na.GoogleToken=void 0;const Yo=nr,dd=At,hd=Ot,pd=Fc,yd=Pt,Jo=Yo.readFile?(0,yd.promisify)(Yo.readFile):async()=>{throw new Un("use key rather than keyFile.","MISSING_CREDENTIALS")},Xo="https://www.googleapis.com/oauth2/v4/token",gd="https://accounts.google.com/o/oauth2/revoke?token=";class Un extends Error{constructor(e,r){super(e),this.code=r}}let Ci;class vd{constructor(e){this.transporter={request:r=>(0,dd.request)(r)},this.configure(e)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){const e=new Date().getTime();return this.rawToken&&this.expiresAt?e>=this.expiresAt:!0}isTokenExpiring(){var e;const r=new Date().getTime(),n=(e=this.eagerRefreshThresholdMillis)!==null&&e!==void 0?e:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),r=Object.assign({forceRefresh:!1},r),e){const n=e;this.getTokenAsync(r).then(o=>n(null,o),e);return}return this.getTokenAsync(r)}async getCredentials(e){switch(pd.extname(e)){case".json":{const n=await Jo(e,"utf8"),o=JSON.parse(n),c=o.private_key,u=o.client_email;if(!c||!u)throw new Un("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:c,clientEmail:u}}case".der":case".crt":case".pem":return{privateKey:await Jo(e,"utf8")};case".p12":case".pfx":return Ci||(Ci=(await Promise.resolve().then(()=>fd())).getPem),{privateKey:await Ci(e)};default:throw new Un("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}}async getTokenAsync(e){if(this.inFlightRequest&&!e.forceRefresh)return this.inFlightRequest;try{return await(this.inFlightRequest=this.getTokenAsyncInner(e))}finally{this.inFlightRequest=void 0}}async getTokenAsyncInner(e){if(this.isTokenExpiring()===!1&&e.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){const r=await this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()}ensureEmail(){if(!this.iss)throw new Un("email is required.","MISSING_CREDENTIALS")}revokeToken(e){if(e){this.revokeTokenAsync().then(()=>e(),e);return}return this.revokeTokenAsync()}async revokeTokenAsync(){if(!this.accessToken)throw new Error("No token to revoke.");const e=gd+this.accessToken;await this.transporter.request({url:e}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})}configure(e={}){this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,typeof e.scope=="object"?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,e.transporter&&(this.transporter=e.transporter)}async requestToken(){var e,r;const n=Math.floor(new Date().getTime()/1e3),o=this.additionalClaims||{},c=Object.assign({iss:this.iss,scope:this.scope,aud:Xo,exp:n+3600,iat:n,sub:this.sub},o),u=hd.sign({header:{alg:"RS256"},payload:c,secret:this.key});try{const a=await this.transporter.request({method:"POST",url:Xo,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:u},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(n+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;const g=a.response&&(!((e=a.response)===null||e===void 0)&&e.data)?(r=a.response)===null||r===void 0?void 0:r.data:{};if(g.error){const f=g.error_description?`: ${g.error_description}`:"";a.message=`${g.error}${f}`}throw a}}}na.GoogleToken=vd;var on={},Si,Zo;function md(){return Zo||(Zo=1,Si=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Si}var Ed=Se;Se.Node=Zt;Se.create=Se;function Se(t){var e=this;if(e instanceof Se||(e=new Se),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Se.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Se.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Se.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Se.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Sd(this,arguments[t]);return this.length};Se.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Ad(this,arguments[t]);return this.length};Se.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Se.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Se.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Se.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Se.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Se.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Se.prototype.map=function(t,e){e=e||this;for(var r=new Se,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Se.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Se,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Se.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=t(r,n.value,o),n=n.next;return r};Se.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=t(r,n.value,o),n=n.prev;return r};Se.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Se.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Se.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Se;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,o=this.head;o!==null&&n<t;n++)o=o.next;for(;o!==null&&n<e;n++,o=o.next)r.push(o.value);return r};Se.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Se;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,o=this.tail;o!==null&&n>e;n--)o=o.prev;for(;o!==null&&n>t;n--,o=o.prev)r.push(o.value);return r};Se.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,o=this.head;o!==null&&n<t;n++)o=o.next;for(var c=[],n=0;o&&n<e;n++)c.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=Cd(this,o,r[n]);return c};Se.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function Cd(t,e,r){var n=e===t.head?new Zt(r,null,e,t):new Zt(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function Sd(t,e){t.tail=new Zt(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Ad(t,e){t.head=new Zt(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Zt(t,e,r,n){if(!(this instanceof Zt))return new Zt(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{md()(Se)}catch{}const Td=Ed,Qt=Symbol("max"),Bt=Symbol("length"),hr=Symbol("lengthCalculator"),$r=Symbol("allowStale"),Jt=Symbol("maxAge"),bt=Symbol("dispose"),ec=Symbol("noDisposeOnSet"),Xe=Symbol("lruList"),ht=Symbol("cache"),ku=Symbol("updateAgeOnGet"),Ai=()=>1;class xd{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[Qt]=e.max||1/0;const r=e.length||Ai;if(this[hr]=typeof r!="function"?Ai:r,this[$r]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Jt]=e.maxAge||0,this[bt]=e.dispose,this[ec]=e.noDisposeOnSet||!1,this[ku]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Qt]=e||1/0,Dr(this)}get max(){return this[Qt]}set allowStale(e){this[$r]=!!e}get allowStale(){return this[$r]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Jt]=e,Dr(this)}get maxAge(){return this[Jt]}set lengthCalculator(e){typeof e!="function"&&(e=Ai),e!==this[hr]&&(this[hr]=e,this[Bt]=0,this[Xe].forEach(r=>{r.length=this[hr](r.value,r.key),this[Bt]+=r.length})),Dr(this)}get lengthCalculator(){return this[hr]}get length(){return this[Bt]}get itemCount(){return this[Xe].length}rforEach(e,r){r=r||this;for(let n=this[Xe].tail;n!==null;){const o=n.prev;tc(this,e,n,r),n=o}}forEach(e,r){r=r||this;for(let n=this[Xe].head;n!==null;){const o=n.next;tc(this,e,n,r),n=o}}keys(){return this[Xe].toArray().map(e=>e.key)}values(){return this[Xe].toArray().map(e=>e.value)}reset(){this[bt]&&this[Xe]&&this[Xe].length&&this[Xe].forEach(e=>this[bt](e.key,e.value)),this[ht]=new Map,this[Xe]=new Td,this[Bt]=0}dump(){return this[Xe].map(e=>Vn(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Xe]}set(e,r,n){if(n=n||this[Jt],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const o=n?Date.now():0,c=this[hr](r,e);if(this[ht].has(e)){if(c>this[Qt])return Er(this,this[ht].get(e)),!1;const g=this[ht].get(e).value;return this[bt]&&(this[ec]||this[bt](e,g.value)),g.now=o,g.maxAge=n,g.value=r,this[Bt]+=c-g.length,g.length=c,this.get(e),Dr(this),!0}const u=new _d(e,r,c,o,n);return u.length>this[Qt]?(this[bt]&&this[bt](e,r),!1):(this[Bt]+=u.length,this[Xe].unshift(u),this[ht].set(e,this[Xe].head),Dr(this),!0)}has(e){if(!this[ht].has(e))return!1;const r=this[ht].get(e).value;return!Vn(this,r)}get(e){return Ti(this,e,!0)}peek(e){return Ti(this,e,!1)}pop(){const e=this[Xe].tail;return e?(Er(this,e),e.value):null}del(e){Er(this,this[ht].get(e))}load(e){this.reset();const r=Date.now();for(let n=e.length-1;n>=0;n--){const o=e[n],c=o.e||0;if(c===0)this.set(o.k,o.v);else{const u=c-r;u>0&&this.set(o.k,o.v,u)}}}prune(){this[ht].forEach((e,r)=>Ti(this,r,!1))}}const Ti=(t,e,r)=>{const n=t[ht].get(e);if(n){const o=n.value;if(Vn(t,o)){if(Er(t,n),!t[$r])return}else r&&(t[ku]&&(n.value.now=Date.now()),t[Xe].unshiftNode(n));return o.value}},Vn=(t,e)=>{if(!e||!e.maxAge&&!t[Jt])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Jt]&&r>t[Jt]},Dr=t=>{if(t[Bt]>t[Qt])for(let e=t[Xe].tail;t[Bt]>t[Qt]&&e!==null;){const r=e.prev;Er(t,e),e=r}},Er=(t,e)=>{if(e){const r=e.value;t[bt]&&t[bt](r.key,r.value),t[Bt]-=r.length,t[ht].delete(r.key),t[Xe].removeNode(e)}};class _d{constructor(e,r,n,o,c){this.key=e,this.value=r,this.length=n,this.now=o,this.maxAge=c||0}}const tc=(t,e,r,n)=>{let o=r.value;Vn(t,o)&&(Er(t,r),t[$r]||(o=void 0)),o&&e.call(n,o.value,o.key,t)};var wd=xd;Object.defineProperty(on,"__esModule",{value:!0});on.JWTAccess=void 0;const Id=Ot,bd=wd,rc={alg:"RS256",typ:"JWT"};class Es{constructor(e,r,n,o){this.cache=new bd({max:500,maxAge:60*60*1e3}),this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=o??5*60*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){const o=this.getCachedKey(e,n),c=this.cache.get(o),u=Date.now();if(c&&c.expiration-u>this.eagerRefreshThresholdMillis)return c.headers;const a=Math.floor(Date.now()/1e3),g=Es.getExpirationTime(a);let f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:g,iat:a}:f={iss:this.email,sub:this.email,aud:e,exp:g,iat:a},r){for(const m in f)if(r[m])throw new Error(`The '${m}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}const A=this.keyId?{...rc,kid:this.keyId}:rc,E=Object.assign(f,r),s={Authorization:`Bearer ${Id.sign({header:A,payload:E,secret:this.key})}`};return this.cache.set(o,{expiration:g*1e3,headers:s}),s}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let o="";e.setEncoding("utf8").on("data",c=>o+=c).on("error",n).on("end",()=>{try{const c=JSON.parse(o);this.fromJSON(c),r()}catch(c){n(c)}})})}}on.JWTAccess=Es;Object.defineProperty(rn,"__esModule",{value:!0});rn.JWT=void 0;const nc=na,Bd=on,Rd=ir;class Cs extends Rd.OAuth2Client{constructor(e,r,n,o,c,u){const a=e&&typeof e=="object"?e:{email:e,keyFile:r,key:n,keyId:u,scopes:o,subject:c};super({eagerRefreshThresholdMillis:a.eagerRefreshThresholdMillis,forceRefreshOnFailure:a.forceRefreshOnFailure}),this.email=a.email,this.keyFile=a.keyFile,this.key=a.key,this.keyId=a.keyId,this.scopes=a.scopes,this.subject=a.subject,this.additionalClaims=a.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){return new Cs({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:e,subject:this.subject,additionalClaims:this.additionalClaims})}async getRequestMetadataAsync(e){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;const r=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&r)if(this.additionalClaims&&this.additionalClaims.target_audience){const{tokens:n}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${n.id_token}`})}}else{this.access||(this.access=new Bd.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let n;this.hasUserScopes()?n=this.scopes:e||(n=this.defaultScopes);const o=await this.access.getRequestHeaders(e??void 0,this.additionalClaims,this.useJWTAccessWithScope?n:void 0);return{headers:this.addSharedMetadataHeaders(o)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(e):{headers:{}}}async fetchIdToken(e){const r=new nc.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e},transporter:this.transporter});if(await r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}async authorizeAsync(){const e=await this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens}async refreshTokenNoCache(e){const r=this.createGToken(),o={access_token:(await r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",o),{res:null,tokens:o}}createGToken(){return this.gtoken||(this.gtoken=new nc.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let o="";e.setEncoding("utf8").on("error",n).on("data",c=>o+=c).on("end",()=>{try{const c=JSON.parse(o);this.fromJSON(c),r()}catch(c){n(c)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){const r=await this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}}rn.JWT=Cs;var er={};Object.defineProperty(er,"__esModule",{value:!0});er.UserRefreshClient=er.USER_REFRESH_ACCOUNT_TYPE=void 0;const Nd=ir;er.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class Pd extends Nd.OAuth2Client{constructor(e,r,n,o,c){const u=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:o,forceRefreshOnFailure:c};super({clientId:u.clientId,clientSecret:u.clientSecret,eagerRefreshThresholdMillis:u.eagerRefreshThresholdMillis,forceRefreshOnFailure:u.forceRefreshOnFailure}),this._refreshToken=u.refreshToken,this.credentials.refresh_token=u.refreshToken}async refreshTokenNoCache(e){return super.refreshTokenNoCache(this._refreshToken)}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}async fromStreamAsync(e){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let o="";e.setEncoding("utf8").on("error",n).on("data",c=>o+=c).on("end",()=>{try{const c=JSON.parse(o);return this.fromJSON(c),r()}catch(c){return n(c)}})})}}er.UserRefreshClient=Pd;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.Impersonated=tr.IMPERSONATED_ACCOUNT_TYPE=void 0;const ac=ir,Od=At;tr.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class Ud extends ac.OAuth2Client{constructor(e={}){var r,n,o,c,u,a;super(e),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=e.sourceClient)!==null&&r!==void 0?r:new ac.OAuth2Client,this.targetPrincipal=(n=e.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(o=e.delegates)!==null&&o!==void 0?o:[],this.targetScopes=(c=e.targetScopes)!==null&&c!==void 0?c:[],this.lifetime=(u=e.lifetime)!==null&&u!==void 0?u:3600,this.endpoint=(a=e.endpoint)!==null&&a!==void 0?a:"https://iamcredentials.googleapis.com"}async refreshToken(e){var r,n,o,c,u,a;try{await this.sourceClient.getAccessToken();const g="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${g}:generateAccessToken`,A={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},E=await this.sourceClient.request({url:f,data:A,method:"POST"}),p=E.data;return this.credentials.access_token=p.accessToken,this.credentials.expiry_date=Date.parse(p.expireTime),{tokens:this.credentials,res:E}}catch(g){if(!(g instanceof Error))throw g;let f=0,A="";throw g instanceof Od.GaxiosError&&(f=(o=(n=(r=g==null?void 0:g.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||o===void 0?void 0:o.status,A=(a=(u=(c=g==null?void 0:g.response)===null||c===void 0?void 0:c.data)===null||u===void 0?void 0:u.error)===null||a===void 0?void 0:a.message),f&&A?(g.message=`${f}: unable to impersonate: ${A}`,g):(g.message=`unable to impersonate: ${g}`,g)}}async fetchIdToken(e,r){var n;await this.sourceClient.getAccessToken();const o=`projects/-/serviceAccounts/${this.targetPrincipal}`,c=`${this.endpoint}/v1/${o}:generateIdToken`,u={delegates:this.delegates,audience:e,includeEmail:(n=r==null?void 0:r.includeEmail)!==null&&n!==void 0?n:!0};return(await this.sourceClient.request({url:c,data:u,method:"POST"})).data.token}}tr.Impersonated=Ud;var cn={},$t={},un={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.getErrorFromOAuthErrorResponse=rr.OAuthClientAuthHandler=void 0;const ic=Hn,kd=Jr(),Dd=["PUT","POST","PATCH"];class Ld{constructor(e){this.clientAuthentication=e,this.crypto=(0,kd.createCrypto)()}applyClientAuthenticationOptions(e,r){this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){var n;if(r)e.headers=e.headers||{},Object.assign(e.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){e.headers=e.headers||{};const o=this.clientAuthentication.clientId,c=this.clientAuthentication.clientSecret||"",u=this.crypto.encodeBase64StringUtf8(`${o}:${c}`);Object.assign(e.headers,{Authorization:`Basic ${u}`})}}injectAuthenticatedRequestBody(e){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){const n=(e.method||"GET").toUpperCase();if(Dd.indexOf(n)!==-1){let o;const c=e.headers||{};for(const u in c)if(u.toLowerCase()==="content-type"&&c[u]){o=c[u].toLowerCase();break}if(o==="application/x-www-form-urlencoded"){e.data=e.data||"";const u=ic.parse(e.data);Object.assign(u,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),e.data=ic.stringify(u)}else if(o==="application/json")e.data=e.data||{},Object.assign(e.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${o} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}}rr.OAuthClientAuthHandler=Ld;function Fd(t,e){const r=t.error,n=t.error_description,o=t.error_uri;let c=`Error code ${r}`;typeof n<"u"&&(c+=`: ${n}`),typeof o<"u"&&(c+=` - ${o}`);const u=new Error(c);if(e){const a=Object.keys(e);e.stack&&a.push("stack"),a.forEach(g=>{g!=="message"&&Object.defineProperty(u,g,{value:e[g],writable:!1,enumerable:!0})})}return u}rr.getErrorFromOAuthErrorResponse=Fd;Object.defineProperty(un,"__esModule",{value:!0});un.StsCredentials=void 0;const Md=At,qd=Hn,Vd=ar,sc=rr;class Kd extends sc.OAuthClientAuthHandler{constructor(e,r){super(r),this.tokenExchangeEndpoint=e,this.transporter=new Vd.DefaultTransporter}async exchangeToken(e,r,n){var o,c,u;const a={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:(o=e.scope)===null||o===void 0?void 0:o.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:(c=e.actingParty)===null||c===void 0?void 0:c.actorToken,actor_token_type:(u=e.actingParty)===null||u===void 0?void 0:u.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(a).forEach(A=>{typeof a[A]>"u"&&delete a[A]});const g={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(g,r||{});const f={url:this.tokenExchangeEndpoint,method:"POST",headers:g,data:qd.stringify(a),responseType:"json"};this.applyClientAuthenticationOptions(f);try{const A=await this.transporter.request(f),E=A.data;return E.res=A,E}catch(A){throw A instanceof Md.GaxiosError&&A.response?(0,sc.getErrorFromOAuthErrorResponse)(A.response.data,A):A}}}un.StsCredentials=Kd;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseExternalAccountClient=t.CLOUD_RESOURCE_MANAGER=t.EXTERNAL_ACCOUNT_TYPE=t.EXPIRATION_TIME_OFFSET=void 0;const e=Nt,r=Kt,n=un,o="urn:ietf:params:oauth:grant-type:token-exchange",c="urn:ietf:params:oauth:token-type:access_token",u="https://www.googleapis.com/auth/cloud-platform",a=3600;t.EXPIRATION_TIME_OFFSET=5*60*1e3,t.EXTERNAL_ACCOUNT_TYPE="external_account",t.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";const g="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+";class f extends r.AuthClient{constructor(E,p){var s,m;if(super(),E.type!==t.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${t.EXTERNAL_ACCOUNT_TYPE}" type but received "${E.type}"`);this.clientAuth=E.client_id?{confidentialClientType:"basic",clientId:E.client_id,clientSecret:E.client_secret}:void 0,this.stsCredential=new n.StsCredentials(E.token_url,this.clientAuth),this.scopes=[u],this.cachedAccessToken=null,this.audience=E.audience,this.subjectTokenType=E.subject_token_type,this.quotaProjectId=E.quota_project_id,this.workforcePoolUserProject=E.workforce_pool_user_project;const y=new RegExp(g);if(this.workforcePoolUserProject&&!this.audience.match(y))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=E.service_account_impersonation_url,this.serviceAccountImpersonationLifetime=(m=(s=E.service_account_impersonation)===null||s===void 0?void 0:s.token_lifetime_seconds)!==null&&m!==void 0?m:a,typeof(p==null?void 0:p.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=t.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=p.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(p!=null&&p.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var E;if(this.serviceAccountImpersonationUrl){const s=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((E=s==null?void 0:s.groups)===null||E===void 0?void 0:E.email)||null}return null}setCredentials(E){super.setCredentials(E),this.cachedAccessToken=E}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){const p={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(p)}request(E,p){if(p)this.requestAsync(E).then(s=>p(null,s),s=>p(s,s.response));else return this.requestAsync(E)}async getProjectId(){const E=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(E){const p=await this.getRequestHeaders(),s=await this.transporter.request({headers:p,url:`${t.CLOUD_RESOURCE_MANAGER}${E}`,responseType:"json"});return this.projectId=s.data.projectId,this.projectId}return null}async requestAsync(E,p=!1){let s;try{const m=await this.getRequestHeaders();E.headers=E.headers||{},m&&m["x-goog-user-project"]&&(E.headers["x-goog-user-project"]=m["x-goog-user-project"]),m&&m.Authorization&&(E.headers.Authorization=m.Authorization),s=await this.transporter.request(E)}catch(m){const y=m.response;if(y){const S=y.status,i=y.config.data instanceof e.Readable;if(!p&&(S===401||S===403)&&!i&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(E,!0)}throw m}return s}async refreshAccessTokenAsync(){const E=await this.retrieveSubjectToken(),p={grantType:o,audience:this.audience,requestedTokenType:c,subjectToken:E,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[u]:this.getScopesArray()},s=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,m=await this.stsCredential.exchangeToken(p,void 0,s);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(m.access_token):m.expires_in?this.cachedAccessToken={access_token:m.access_token,expiry_date:new Date().getTime()+m.expires_in*1e3,res:m.res}:this.cachedAccessToken={access_token:m.access_token,res:m.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(E){const p=E.match(/\/projects\/([^/]+)/);return p?p[1]:null}async getImpersonatedAccessToken(E){const p={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"},responseType:"json"},s=await this.transporter.request(p),m=s.data;return{access_token:m.accessToken,expiry_date:new Date(m.expireTime).getTime(),res:s}}isExpired(E){const p=new Date().getTime();return E.expiry_date?p>=E.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes>"u"?[u]:this.scopes}}t.BaseExternalAccountClient=f})($t);var ln={},xi,_i,wi;Object.defineProperty(ln,"__esModule",{value:!0});ln.IdentityPoolClient=void 0;const Ss=nr,As=Pt,$d=$t,Gd=(0,As.promisify)((xi=Ss.readFile)!==null&&xi!==void 0?xi:()=>{}),jd=(0,As.promisify)((_i=Ss.realpath)!==null&&_i!==void 0?_i:()=>{}),Hd=(0,As.promisify)((wi=Ss.lstat)!==null&&wi!==void 0?wi:()=>{});class zd extends $d.BaseExternalAccountClient{constructor(e,r){var n,o;if(super(e,r),this.file=e.credential_source.file,this.url=e.credential_source.url,this.headers=e.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=e.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(o=e.credential_source.format)===null||o===void 0?void 0:o.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}async retrieveSubjectToken(){return this.file?await this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):await this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)}async getTokenFromFile(e,r,n){try{if(e=await jd(e),!(await Hd(e)).isFile())throw new Error}catch(u){throw u instanceof Error&&(u.message=`The file at ${e} does not exist, or it is not a file. ${u.message}`),u}let o;const c=await Gd(e,{encoding:"utf8"});if(r==="text"?o=c:r==="json"&&n&&(o=JSON.parse(c)[n]),!o)throw new Error("Unable to parse the subject_token from the credential_source file");return o}async getTokenFromUrl(e,r,n,o){const c={url:e,method:"GET",headers:o,responseType:r};let u;if(r==="text"?u=(await this.transporter.request(c)).data:r==="json"&&n&&(u=(await this.transporter.request(c)).data[n]),!u)throw new Error("Unable to parse the subject_token from the credential_source URL");return u}}ln.IdentityPoolClient=zd;var fn={},la={};Object.defineProperty(la,"__esModule",{value:!0});la.AwsRequestSigner=void 0;const Du=Jr(),oc="AWS4-HMAC-SHA256",Wd="aws4_request";class Qd{constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,Du.createCrypto)()}async getRequestOptions(e){if(!e.url)throw new Error('"url" is required in "amzOptions"');const r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,o=e.method||"GET",c=e.body||r,u=e.headers,a=await this.getCredentials(),g=new URL(n),f=await Jd({crypto:this.crypto,host:g.host,canonicalUri:g.pathname,canonicalQuerystring:g.search.substr(1),method:o,region:this.region,securityCredentials:a,requestPayload:c,additionalAmzHeaders:u}),A=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:g.host},u||{});a.token&&Object.assign(A,{"x-amz-security-token":a.token});const E={url:n,method:o,headers:A};return typeof c<"u"&&(E.body=c),E}}la.AwsRequestSigner=Qd;async function Kr(t,e,r){return await t.signWithHmacSha256(e,r)}async function Yd(t,e,r,n,o){const c=await Kr(t,`AWS4${e}`,r),u=await Kr(t,c,n),a=await Kr(t,u,o);return await Kr(t,a,"aws4_request")}async function Jd(t){const e=t.additionalAmzHeaders||{},r=t.requestPayload||"",n=t.host.split(".")[0],o=new Date,c=o.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),u=o.toISOString().replace(/[-]/g,"").replace(/T.*/,""),a={};Object.keys(e).forEach(C=>{a[C.toLowerCase()]=e[C]}),t.securityCredentials.token&&(a["x-amz-security-token"]=t.securityCredentials.token);const g=Object.assign({host:t.host},a.date?{}:{"x-amz-date":c},a);let f="";const A=Object.keys(g).sort();A.forEach(C=>{f+=`${C}:${g[C]}
`});const E=A.join(";"),p=await t.crypto.sha256DigestHex(r),s=`${t.method}
${t.canonicalUri}
${t.canonicalQuerystring}
${f}
${E}
${p}`,m=`${u}/${t.region}/${n}/${Wd}`,y=`${oc}
${c}
${m}
`+await t.crypto.sha256DigestHex(s),S=await Yd(t.crypto,t.securityCredentials.secretAccessKey,u,t.region,n),i=await Kr(t.crypto,S,y),v=`${oc} Credential=${t.securityCredentials.accessKeyId}/${m}, SignedHeaders=${E}, Signature=${(0,Du.fromArrayBufferToHex)(i)}`;return{amzDate:a.date?void 0:c,authorizationHeader:v,canonicalQuerystring:t.canonicalQuerystring}}Object.defineProperty(fn,"__esModule",{value:!0});fn.AwsClient=void 0;const Xd=la,Zd=$t;class Ts extends Zd.BaseExternalAccountClient{constructor(e,r){super(e,r),this.environmentId=e.credential_source.environment_id,this.regionUrl=e.credential_source.region_url,this.securityCredentialsUrl=e.credential_source.url,this.regionalCredVerificationUrl=e.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=e.credential_source.imdsv2_session_token_url,this.awsRequestSigner=null,this.region="",this.validateEnvironmentId()}validateEnvironmentId(){var e;const r=(e=this.environmentId)===null||e===void 0?void 0:e.match(/^(aws)(\d+)$/);if(!r||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(r[2],10)!==1)throw new Error(`aws version "${r[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){if(!this.awsRequestSigner){const o={};this.shouldUseMetadataServer()&&this.imdsV2SessionTokenUrl&&(o["x-aws-ec2-metadata-token"]=await this.getImdsV2SessionToken()),this.region=await this.getAwsRegion(o),this.awsRequestSigner=new Xd.AwsRequestSigner(async()=>{if(this.securityCredentialsFromEnv)return this.securityCredentialsFromEnv;const c=await this.getAwsRoleName(o),u=await this.getAwsSecurityCredentials(c,o);return{accessKeyId:u.AccessKeyId,secretAccessKey:u.SecretAccessKey,token:u.Token}},this.region)}const e=await this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},e.headers);for(const o in n)r.push({key:o,value:n[o]});return encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))}async getImdsV2SessionToken(){const e={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(await this.transporter.request(e)).data}async getAwsRegion(e){if(this.regionFromEnv)return this.regionFromEnv;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');const r={url:this.regionUrl,method:"GET",responseType:"text",headers:e},n=await this.transporter.request(r);return n.data.substr(0,n.data.length-1)}async getAwsRoleName(e){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');const r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:e};return(await this.transporter.request(r)).data}async getAwsSecurityCredentials(e,r){return(await this.transporter.request({url:`${this.securityCredentialsUrl}/${e}`,responseType:"json",headers:r})).data}shouldUseMetadataServer(){return!this.regionFromEnv||!this.securityCredentialsFromEnv}get regionFromEnv(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get securityCredentialsFromEnv(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}fn.AwsClient=Ts;Ts.AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";Ts.AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";var Wt={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.InvalidSubjectTokenError=Ue.InvalidMessageFieldError=Ue.InvalidCodeFieldError=Ue.InvalidTokenTypeFieldError=Ue.InvalidExpirationTimeFieldError=Ue.InvalidSuccessFieldError=Ue.InvalidVersionFieldError=Ue.ExecutableResponseError=Ue.ExecutableResponse=void 0;const wn="urn:ietf:params:oauth:token-type:saml2",Ii="urn:ietf:params:oauth:token-type:id_token",bi="urn:ietf:params:oauth:token-type:jwt";class eh{constructor(e){if(!e.version)throw new Lu("Executable response must contain a 'version' field.");if(e.success===void 0)throw new Fu("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==wn&&this.tokenType!==Ii&&this.tokenType!==bi)throw new Mu(`Executable response must contain a 'token_type' field when successful and it must be one of ${Ii}, ${bi}, or ${wn}.`);if(this.tokenType===wn){if(!e.saml_response)throw new Xi(`Executable response must contain a 'saml_response' field when token_type=${wn}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new Xi(`Executable response must contain a 'id_token' field when token_type=${Ii} or ${bi}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new qu("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new Vu("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}}Ue.ExecutableResponse=eh;class Gt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}Ue.ExecutableResponseError=Gt;class Lu extends Gt{}Ue.InvalidVersionFieldError=Lu;class Fu extends Gt{}Ue.InvalidSuccessFieldError=Fu;class th extends Gt{}Ue.InvalidExpirationTimeFieldError=th;class Mu extends Gt{}Ue.InvalidTokenTypeFieldError=Mu;class qu extends Gt{}Ue.InvalidCodeFieldError=qu;class Vu extends Gt{}Ue.InvalidMessageFieldError=Vu;class Xi extends Gt{}Ue.InvalidSubjectTokenError=Xi;var Lr={},cc;function rh(){if(cc)return Lr;cc=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.PluggableAuthHandler=void 0;const t=xs(),e=Ue,r=kc,n=nr;class o{constructor(u){if(!u.command)throw new Error("No command provided.");if(this.commandComponents=o.parseCommand(u.command),this.timeoutMillis=u.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=u.outputFile}retrieveResponseFromExecutable(u){return new Promise((a,g)=>{const f=r.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(u)}});let A="";f.stdout.on("data",p=>{A+=p}),f.stderr.on("data",p=>{A+=p});const E=setTimeout(()=>(f.removeAllListeners(),f.kill(),g(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);f.on("close",p=>{if(clearTimeout(E),p===0)try{const s=JSON.parse(A),m=new e.ExecutableResponse(s);return a(m)}catch(s){return s instanceof e.ExecutableResponseError?g(s):g(new e.ExecutableResponseError(`The executable returned an invalid response: ${A}`))}else return g(new t.ExecutableError(A,p.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let u;try{u=await n.promises.realpath(this.outputFile)}catch{return}if(!(await n.promises.lstat(u)).isFile())return;const a=await n.promises.readFile(u,{encoding:"utf8"});if(a!=="")try{const g=JSON.parse(a);return new e.ExecutableResponse(g).isValid()?new e.ExecutableResponse(g):void 0}catch(g){throw g instanceof e.ExecutableResponseError?g:new e.ExecutableResponseError(`The output file contained an invalid response: ${a}`)}}static parseCommand(u){const a=u.match(/(?:[^\s"]+|"[^"]*")+/g);if(!a)throw new Error(`Provided command: "${u}" could not be parsed.`);for(let g=0;g<a.length;g++)a[g][0]==='"'&&a[g].slice(-1)==='"'&&(a[g]=a[g].slice(1,-1));return a}}return Lr.PluggableAuthHandler=o,Lr}var uc;function xs(){if(uc)return Wt;uc=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PluggableAuthClient=Wt.ExecutableError=void 0;const t=$t,e=Ue,r=rh();class n extends Error{constructor(E,p){super(`The executable failed with exit code: ${p} and error message: ${E}.`),this.code=p,Object.setPrototypeOf(this,new.target.prototype)}}Wt.ExecutableError=n;const o=30*1e3,c=5*1e3,u=120*1e3,a="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",g=1;class f extends t.BaseExternalAccountClient{constructor(E,p){if(super(E,p),!E.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=E.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(E.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=o;else if(this.timeoutMillis=E.credential_source.executable.timeout_millis,this.timeoutMillis<c||this.timeoutMillis>u)throw new Error(`Timeout must be between ${c} and ${u} milliseconds.`);this.outputFile=E.credential_source.executable.output_file,this.handler=new r.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile})}async retrieveSubjectToken(){if(process.env[a]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let E;if(this.outputFile&&(E=await this.handler.retrieveCachedResponse()),!E){const p=new Map;p.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),p.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),p.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&p.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);const s=this.getServiceAccountEmail();s&&p.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",s),E=await this.handler.retrieveResponseFromExecutable(p)}if(E.version>g)throw new Error(`Version of executable is not currently supported, maximum supported version is ${g}.`);if(!E.success)throw new n(E.errorMessage,E.errorCode);if(this.outputFile&&!E.expirationTime)throw new e.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(E.isExpired())throw new Error("Executable response is expired.");return E.subjectToken}}return Wt.PluggableAuthClient=f,Wt}Object.defineProperty(cn,"__esModule",{value:!0});cn.ExternalAccountClient=void 0;const nh=$t,ah=ln,ih=fn,sh=xs();class oh{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e,r){var n,o;return e&&e.type===nh.EXTERNAL_ACCOUNT_TYPE?!((n=e.credential_source)===null||n===void 0)&&n.environment_id?new ih.AwsClient(e,r):!((o=e.credential_source)===null||o===void 0)&&o.executable?new sh.PluggableAuthClient(e,r):new ah.IdentityPoolClient(e,r):null}}cn.ExternalAccountClient=oh;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.ExternalAccountAuthorizedUserClient=xr.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;const ch=Kt,lc=rr,uh=At,lh=Nt,fh=$t;xr.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class dh extends lc.OAuthClientAuthHandler{constructor(e,r,n){super(n),this.url=e,this.transporter=r}async refreshToken(e,r){const n=new URLSearchParams({grant_type:"refresh_token",refresh_token:e}),o={"Content-Type":"application/x-www-form-urlencoded",...r},c={url:this.url,method:"POST",headers:o,data:n.toString(),responseType:"json"};this.applyClientAuthenticationOptions(c);try{const u=await this.transporter.request(c),a=u.data;return a.res=u,a}catch(u){throw u instanceof uh.GaxiosError&&u.response?(0,lc.getErrorFromOAuthErrorResponse)(u.response.data,u):u}}}class hh extends ch.AuthClient{constructor(e,r){super(),this.refreshToken=e.refresh_token;const n={confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret};this.externalAccountAuthorizedUserHandler=new dh(e.token_url,this.transporter,n),this.cachedAccessToken=null,this.quotaProjectId=e.quota_project_id,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=fh.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r!=null&&r.forceRefreshOnFailure)}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){const r={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{const o=await this.getRequestHeaders();e.headers=e.headers||{},o&&o["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=o["x-goog-user-project"]),o&&o.Authorization&&(e.headers.Authorization=o.Authorization),n=await this.transporter.request(e)}catch(o){const c=o.response;if(c){const u=c.status,a=c.config.data instanceof lh.Readable;if(!r&&(u===401||u===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw o}return n}async refreshAccessTokenAsync(){const e=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+e.expires_in*1e3,res:e.res},e.refresh_token!==void 0&&(this.refreshToken=e.refresh_token),this.cachedAccessToken}isExpired(e){const r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}}xr.ExternalAccountAuthorizedUserClient=hh;Object.defineProperty(Ar,"__esModule",{value:!0});Ar.GoogleAuth=Ar.CLOUD_SDK_CLIENT_ID=void 0;const ph=kc,Fr=nr,Bi=Qn,yh=Lc,Ri=Fc,gh=Jr(),vh=ar,mh=Xr,Eh=tn,Ch=us,pr=rn,Ni=er,In=tr,Sh=cn,Mr=$t,fc=xr;Ar.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";const dc={NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`};class Ku{get isGCE(){return this.checkIsGCE}constructor(e){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,e=e||{},this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.jsonContent=e.credentials||null,this.clientOptions=e.clientOptions}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===dc.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||(e=await this.getProductionProjectId()),e||(e=await this.getFileProjectId()),e||(e=await this.getDefaultServiceProjectId()),e||(e=await this.getGCEProjectId()),e||(e=await this.getExternalAccountClientProjectId()),e)return this._cachedProjectId=e,e;throw new Error(dc.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(o=>r(null,o.credential,o.projectId),r);else return this.getApplicationDefaultAsync(n)}async getApplicationDefaultAsync(e={}){if(this.cachedCredential)return await this.prepareAndCacheADC(this.cachedCredential);const r=process.env.GOOGLE_CLOUD_QUOTA_PROJECT;let n;if(n=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e),n)return n instanceof pr.JWT?n.scopes=this.scopes:n instanceof Mr.BaseExternalAccountClient&&(n.scopes=this.getAnyScopes()),await this.prepareAndCacheADC(n,r);if(n=await this._tryGetApplicationCredentialsFromWellKnownFile(e),n)return n instanceof pr.JWT?n.scopes=this.scopes:n instanceof Mr.BaseExternalAccountClient&&(n.scopes=this.getAnyScopes()),await this.prepareAndCacheADC(n,r);let o;try{o=await this._checkIsGCE()}catch(c){throw c instanceof Error&&(c.message=`Unexpected error determining execution environment: ${c.message}`),c}if(!o)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return e.scopes=this.getAnyScopes(),await this.prepareAndCacheADC(new mh.Compute(e),r)}async prepareAndCacheADC(e,r){const n=await this.getProjectIdOptional();return r&&(e.quotaProjectId=r),this.cachedCredential=e,{credential:e,projectId:n}}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=await Bi.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){const r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let r=null;if(this._isWindows())r=process.env.APPDATA;else{const o=process.env.HOME;o&&(r=Ri.join(o,".config"))}return r&&(r=Ri.join(r,"gcloud","application_default_credentials.json"),Fr.existsSync(r)||(r=null)),r?await this._getApplicationCredentialsFromFilePath(r,e):null}async _getApplicationCredentialsFromFilePath(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=Fr.realpathSync(e),!Fr.lstatSync(e).isFile())throw new Error}catch(o){throw o instanceof Error&&(o.message=`The file at ${e} does not exist, or it is not a file. ${o.message}`),o}const n=Fr.createReadStream(e);return this.fromStream(n,r)}fromImpersonatedJSON(e){var r,n,o,c;if(!e)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==In.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${In.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");const u=new Ni.UserRefreshClient(e.source_credentials.client_id,e.source_credentials.client_secret,e.source_credentials.refresh_token),a=(n=(r=/(?<target>[^/]+):generateAccessToken$/.exec(e.service_account_impersonation_url))===null||r===void 0?void 0:r.groups)===null||n===void 0?void 0:n.target;if(!a)throw new RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);const g=(o=this.getAnyScopes())!==null&&o!==void 0?o:[];return new In.Impersonated({delegates:(c=e.delegates)!==null&&c!==void 0?c:[],sourceClient:u,targetPrincipal:a,targetScopes:Array.isArray(g)?g:[g]})}fromJSON(e,r={}){let n;return r=r||{},e.type===Ni.USER_REFRESH_ACCOUNT_TYPE?(n=new Ni.UserRefreshClient(r),n.fromJSON(e)):e.type===In.IMPERSONATED_ACCOUNT_TYPE?n=this.fromImpersonatedJSON(e):e.type===Mr.EXTERNAL_ACCOUNT_TYPE?(n=Sh.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):e.type===fc.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?n=new fc.ExternalAccountAuthorizedUserClient(e,r):(r.scopes=this.scopes,n=new pr.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),n}_cacheClientFromJSON(e,r){const n=this.fromJSON(e,r);return this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let o={};if(typeof r=="function"?n=r:o=r,n)this.fromStreamAsync(e,o).then(c=>n(null,c),n);else return this.fromStreamAsync(e,o)}fromStreamAsync(e,r){return new Promise((n,o)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let c="";e.setEncoding("utf8").on("error",o).on("data",u=>c+=u).on("end",()=>{try{try{const u=JSON.parse(c),a=this._cacheClientFromJSON(u,r);return n(a)}catch(u){if(!this.keyFilename)throw u;const a=new pr.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),n(a)}}catch(u){return o(u)}})})}fromAPIKey(e,r){r=r||{};const n=new pr.JWT(r);return n.fromAPIKey(e),n}_isWindows(){const e=yh.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(e=>{(0,ph.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{const o=JSON.parse(n).configuration.properties.core.project;e(o);return}catch{}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){const r=await this.getClient();if(r&&r.projectId)return r.projectId}const e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==Mr.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await Bi.project("project-id")}catch{return null}}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}async getCredentialsAsync(){const e=await this.getClient();if(e instanceof Mr.BaseExternalAccountClient){const o=e.getServiceAccountEmail();if(o)return{client_email:o}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!await this._checkIsGCE())throw new Error("Unknown error.");const n=await Bi.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}}async getClient(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){const e=Ri.resolve(this.keyFilename),r=Fr.createReadStream(e);await this.fromStreamAsync(r,this.clientOptions)}else await this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential}async getIdTokenClient(e){const r=await this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new Eh.IdTokenClient({targetAudience:e,idTokenProvider:r})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e){e=e||{};const r=e.url||e.uri,o=await(await this.getClient()).getRequestHeaders(r);return e.headers=Object.assign(e.headers||{},o),e}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,Ch.getEnv)()}async sign(e){const r=await this.getClient(),n=(0,gh.createCrypto)();if(r instanceof pr.JWT&&r.key)return await n.sign(r.key,e);const o=await this.getCredentials();if(!o.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,o.client_email,e)}async signBlob(e,r,n){const o=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(await this.request({method:"POST",url:o,data:{payload:e.encodeBase64StringUtf8(n)}})).data.signedBlob}}Ar.GoogleAuth=Ku;Ku.DefaultTransporter=vh.DefaultTransporter;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.IAMAuth=void 0;class Ah{constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}fa.IAMAuth=Ah;var $u={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DownscopedClient=t.EXPIRATION_TIME_OFFSET=t.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;const e=Nt,r=Kt,n=un,o="urn:ietf:params:oauth:grant-type:token-exchange",c="urn:ietf:params:oauth:token-type:access_token",u="urn:ietf:params:oauth:token-type:access_token",a="https://sts.googleapis.com/v1/token";t.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,t.EXPIRATION_TIME_OFFSET=5*60*1e3;class g extends r.AuthClient{constructor(A,E,p,s){if(super(),this.authClient=A,this.credentialAccessBoundary=E,E.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(E.accessBoundary.accessBoundaryRules.length>t.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${t.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(const m of E.accessBoundary.accessBoundaryRules)if(m.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new n.StsCredentials(a),this.cachedDownscopedAccessToken=null,typeof(p==null?void 0:p.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=t.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=p.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(p!=null&&p.forceRefreshOnFailure),this.quotaProjectId=s}setCredentials(A){if(!A.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(A),this.cachedDownscopedAccessToken=A}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){const E={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(E)}request(A,E){if(E)this.requestAsync(A).then(p=>E(null,p),p=>E(p,p.response));else return this.requestAsync(A)}async requestAsync(A,E=!1){let p;try{const s=await this.getRequestHeaders();A.headers=A.headers||{},s&&s["x-goog-user-project"]&&(A.headers["x-goog-user-project"]=s["x-goog-user-project"]),s&&s.Authorization&&(A.headers.Authorization=s.Authorization),p=await this.transporter.request(A)}catch(s){const m=s.response;if(m){const y=m.status,S=m.config.data instanceof e.Readable;if(!E&&(y===401||y===403)&&!S&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(A,!0)}throw s}return p}async refreshAccessTokenAsync(){var A;const E=(await this.authClient.getAccessToken()).token,p={grantType:o,requestedTokenType:c,subjectToken:E,subjectTokenType:u},s=await this.stsCredential.exchangeToken(p,void 0,this.credentialAccessBoundary),m=((A=this.authClient.credentials)===null||A===void 0?void 0:A.expiry_date)||null,y=s.expires_in?new Date().getTime()+s.expires_in*1e3:m;return this.cachedDownscopedAccessToken={access_token:s.access_token,expiry_date:y,res:s.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(A){const E=new Date().getTime();return A.expiry_date?E>=A.expiry_date-this.eagerRefreshThresholdMillis:!1}}t.DownscopedClient=g})($u);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleAuth=t.auth=t.DefaultTransporter=t.PluggableAuthClient=t.DownscopedClient=t.BaseExternalAccountClient=t.ExternalAccountClient=t.IdentityPoolClient=t.AwsClient=t.UserRefreshClient=t.LoginTicket=t.OAuth2Client=t.CodeChallengeMethod=t.Impersonated=t.JWT=t.JWTAccess=t.IdTokenClient=t.IAMAuth=t.GCPEnv=t.Compute=t.AuthClient=void 0;const e=Ar;Object.defineProperty(t,"GoogleAuth",{enumerable:!0,get:function(){return e.GoogleAuth}});var r=Kt;Object.defineProperty(t,"AuthClient",{enumerable:!0,get:function(){return r.AuthClient}});var n=Xr;Object.defineProperty(t,"Compute",{enumerable:!0,get:function(){return n.Compute}});var o=us;Object.defineProperty(t,"GCPEnv",{enumerable:!0,get:function(){return o.GCPEnv}});var c=fa;Object.defineProperty(t,"IAMAuth",{enumerable:!0,get:function(){return c.IAMAuth}});var u=tn;Object.defineProperty(t,"IdTokenClient",{enumerable:!0,get:function(){return u.IdTokenClient}});var a=on;Object.defineProperty(t,"JWTAccess",{enumerable:!0,get:function(){return a.JWTAccess}});var g=rn;Object.defineProperty(t,"JWT",{enumerable:!0,get:function(){return g.JWT}});var f=tr;Object.defineProperty(t,"Impersonated",{enumerable:!0,get:function(){return f.Impersonated}});var A=ir;Object.defineProperty(t,"CodeChallengeMethod",{enumerable:!0,get:function(){return A.CodeChallengeMethod}}),Object.defineProperty(t,"OAuth2Client",{enumerable:!0,get:function(){return A.OAuth2Client}});var E=en;Object.defineProperty(t,"LoginTicket",{enumerable:!0,get:function(){return E.LoginTicket}});var p=er;Object.defineProperty(t,"UserRefreshClient",{enumerable:!0,get:function(){return p.UserRefreshClient}});var s=fn;Object.defineProperty(t,"AwsClient",{enumerable:!0,get:function(){return s.AwsClient}});var m=ln;Object.defineProperty(t,"IdentityPoolClient",{enumerable:!0,get:function(){return m.IdentityPoolClient}});var y=cn;Object.defineProperty(t,"ExternalAccountClient",{enumerable:!0,get:function(){return y.ExternalAccountClient}});var S=$t;Object.defineProperty(t,"BaseExternalAccountClient",{enumerable:!0,get:function(){return S.BaseExternalAccountClient}});var i=$u;Object.defineProperty(t,"DownscopedClient",{enumerable:!0,get:function(){return i.DownscopedClient}});var v=xs();Object.defineProperty(t,"PluggableAuthClient",{enumerable:!0,get:function(){return v.PluggableAuthClient}});var C=ar;Object.defineProperty(t,"DefaultTransporter",{enumerable:!0,get:function(){return C.DefaultTransporter}});const I=new e.GoogleAuth;t.auth=I})(Yr);var da={};Object.defineProperty(da,"__esModule",{value:!0});da.getAPI=void 0;function Th(t,e,r,n){let o;if(typeof e=="string")o=e,e={};else if(typeof e=="object")o=e.version,delete e.version;else throw new Error("Argument error: Accepts only string or object");try{const c=r[o],u=new c(e,n);return Object.freeze(u)}catch(c){throw new Error(`Unable to load endpoint ${t}("${o}"): ${c.message}`)}}da.getAPI=Th;var Nr={},xh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,r);if(u.value!==o||u.enumerable!==!0)return!1}return!0},hc=typeof Symbol<"u"&&Symbol,_h=xh,wh=function(){return typeof hc!="function"||typeof Symbol!="function"||typeof hc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:_h()},Ih="Function.prototype.bind called on incompatible ",Pi=Array.prototype.slice,bh=Object.prototype.toString,Bh="[object Function]",Rh=function(e){var r=this;if(typeof r!="function"||bh.call(r)!==Bh)throw new TypeError(Ih+r);for(var n=Pi.call(arguments,1),o,c=function(){if(this instanceof o){var A=r.apply(this,n.concat(Pi.call(arguments)));return Object(A)===A?A:this}else return r.apply(e,n.concat(Pi.call(arguments)))},u=Math.max(0,r.length-n.length),a=[],g=0;g<u;g++)a.push("$"+g);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(c),r.prototype){var f=function(){};f.prototype=r.prototype,o.prototype=new f,f.prototype=null}return o},Nh=Rh,_s=Function.prototype.bind||Nh,Ph=_s,Oh=Ph.call(Function.call,Object.prototype.hasOwnProperty),Ce,_r=SyntaxError,Gu=Function,Cr=TypeError,Oi=function(t){try{return Gu('"use strict"; return ('+t+").constructor;")()}catch{}},Xt=Object.getOwnPropertyDescriptor;if(Xt)try{Xt({},"")}catch{Xt=null}var Ui=function(){throw new Cr},Uh=Xt?function(){try{return arguments.callee,Ui}catch{try{return Xt(arguments,"callee").get}catch{return Ui}}}():Ui,yr=wh(),Lt=Object.getPrototypeOf||function(t){return t.__proto__},mr={},kh=typeof Uint8Array>"u"?Ce:Lt(Uint8Array),Sr={"%AggregateError%":typeof AggregateError>"u"?Ce:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ce:ArrayBuffer,"%ArrayIteratorPrototype%":yr?Lt([][Symbol.iterator]()):Ce,"%AsyncFromSyncIteratorPrototype%":Ce,"%AsyncFunction%":mr,"%AsyncGenerator%":mr,"%AsyncGeneratorFunction%":mr,"%AsyncIteratorPrototype%":mr,"%Atomics%":typeof Atomics>"u"?Ce:Atomics,"%BigInt%":typeof BigInt>"u"?Ce:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ce:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ce:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ce:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ce:FinalizationRegistry,"%Function%":Gu,"%GeneratorFunction%":mr,"%Int8Array%":typeof Int8Array>"u"?Ce:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ce:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ce:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":yr?Lt(Lt([][Symbol.iterator]())):Ce,"%JSON%":typeof JSON=="object"?JSON:Ce,"%Map%":typeof Map>"u"?Ce:Map,"%MapIteratorPrototype%":typeof Map>"u"||!yr?Ce:Lt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ce:Promise,"%Proxy%":typeof Proxy>"u"?Ce:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ce:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ce:Set,"%SetIteratorPrototype%":typeof Set>"u"||!yr?Ce:Lt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ce:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":yr?Lt(""[Symbol.iterator]()):Ce,"%Symbol%":yr?Symbol:Ce,"%SyntaxError%":_r,"%ThrowTypeError%":Uh,"%TypedArray%":kh,"%TypeError%":Cr,"%Uint8Array%":typeof Uint8Array>"u"?Ce:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ce:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ce:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ce:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ce:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ce:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ce:WeakSet},Dh=function t(e){var r;if(e==="%AsyncFunction%")r=Oi("async function () {}");else if(e==="%GeneratorFunction%")r=Oi("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Oi("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(r=Lt(o.prototype))}return Sr[e]=r,r},pc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},dn=_s,Kn=Oh,Lh=dn.call(Function.call,Array.prototype.concat),Fh=dn.call(Function.apply,Array.prototype.splice),yc=dn.call(Function.call,String.prototype.replace),$n=dn.call(Function.call,String.prototype.slice),Mh=dn.call(Function.call,RegExp.prototype.exec),qh=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Vh=/\\(\\)?/g,Kh=function(e){var r=$n(e,0,1),n=$n(e,-1);if(r==="%"&&n!=="%")throw new _r("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new _r("invalid intrinsic syntax, expected opening `%`");var o=[];return yc(e,qh,function(c,u,a,g){o[o.length]=a?yc(g,Vh,"$1"):u||c}),o},$h=function(e,r){var n=e,o;if(Kn(pc,n)&&(o=pc[n],n="%"+o[0]+"%"),Kn(Sr,n)){var c=Sr[n];if(c===mr&&(c=Dh(n)),typeof c>"u"&&!r)throw new Cr("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:c}}throw new _r("intrinsic "+e+" does not exist!")},ws=function(e,r){if(typeof e!="string"||e.length===0)throw new Cr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Cr('"allowMissing" argument must be a boolean');if(Mh(/^%?[^%]*%?$/,e)===null)throw new _r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Kh(e),o=n.length>0?n[0]:"",c=$h("%"+o+"%",r),u=c.name,a=c.value,g=!1,f=c.alias;f&&(o=f[0],Fh(n,Lh([0,1],f)));for(var A=1,E=!0;A<n.length;A+=1){var p=n[A],s=$n(p,0,1),m=$n(p,-1);if((s==='"'||s==="'"||s==="`"||m==='"'||m==="'"||m==="`")&&s!==m)throw new _r("property names with quotes must have matching quotes");if((p==="constructor"||!E)&&(g=!0),o+="."+p,u="%"+o+"%",Kn(Sr,u))a=Sr[u];else if(a!=null){if(!(p in a)){if(!r)throw new Cr("base intrinsic for "+e+" exists, but the property is not available.");return}if(Xt&&A+1>=n.length){var y=Xt(a,p);E=!!y,E&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[p]}else E=Kn(a,p),a=a[p];E&&!g&&(Sr[u]=a)}}return a},ju={exports:{}};(function(t){var e=_s,r=ws,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),c=r("%Reflect.apply%",!0)||e.call(o,n),u=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),g=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(E){var p=c(e,o,arguments);if(u&&a){var s=u(p,"length");s.configurable&&a(p,"length",{value:1+g(0,E.length-(arguments.length-1))})}return p};var f=function(){return c(e,n,arguments)};a?a(t.exports,"apply",{value:f}):t.exports.apply=f})(ju);var Gh=ju.exports,Hu=ws,zu=Gh,jh=zu(Hu("String.prototype.indexOf")),Hh=function(e,r){var n=Hu(e,!!r);return typeof n=="function"&&jh(e,".prototype.")>-1?zu(n):n};const zh={},Wh=Object.freeze(Object.defineProperty({__proto__:null,default:zh},Symbol.toStringTag,{value:"Module"})),Qh=Gl(Wh);var Is=typeof Map=="function"&&Map.prototype,ki=Object.getOwnPropertyDescriptor&&Is?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Gn=Is&&ki&&typeof ki.get=="function"?ki.get:null,Yh=Is&&Map.prototype.forEach,bs=typeof Set=="function"&&Set.prototype,Di=Object.getOwnPropertyDescriptor&&bs?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,jn=bs&&Di&&typeof Di.get=="function"?Di.get:null,Jh=bs&&Set.prototype.forEach,Xh=typeof WeakMap=="function"&&WeakMap.prototype,Gr=Xh?WeakMap.prototype.has:null,Zh=typeof WeakSet=="function"&&WeakSet.prototype,jr=Zh?WeakSet.prototype.has:null,ep=typeof WeakRef=="function"&&WeakRef.prototype,gc=ep?WeakRef.prototype.deref:null,tp=Boolean.prototype.valueOf,rp=Object.prototype.toString,np=Function.prototype.toString,ap=String.prototype.match,Bs=String.prototype.slice,Mt=String.prototype.replace,ip=String.prototype.toUpperCase,vc=String.prototype.toLowerCase,Wu=RegExp.prototype.test,mc=Array.prototype.concat,mt=Array.prototype.join,sp=Array.prototype.slice,Ec=Math.floor,Zi=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Li=Object.getOwnPropertySymbols,es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,wr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",st=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===wr||"symbol")?Symbol.toStringTag:null,Qu=Object.prototype.propertyIsEnumerable,Cc=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Sc(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Wu.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Ec(-t):Ec(t);if(n!==t){var o=String(n),c=Bs.call(e,o.length+1);return Mt.call(o,r,"$&_")+"."+Mt.call(Mt.call(c,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Mt.call(e,r,"$&_")}var ts=Qh,Ac=ts.custom,Tc=Ju(Ac)?Ac:null,op=function t(e,r,n,o){var c=r||{};if(Ft(c,"quoteStyle")&&c.quoteStyle!=="single"&&c.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ft(c,"maxStringLength")&&(typeof c.maxStringLength=="number"?c.maxStringLength<0&&c.maxStringLength!==1/0:c.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=Ft(c,"customInspect")?c.customInspect:!0;if(typeof u!="boolean"&&u!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ft(c,"indent")&&c.indent!==null&&c.indent!=="	"&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ft(c,"numericSeparator")&&typeof c.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=c.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Zu(e,c);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var g=String(e);return a?Sc(e,g):g}if(typeof e=="bigint"){var f=String(e)+"n";return a?Sc(e,f):f}var A=typeof c.depth>"u"?5:c.depth;if(typeof n>"u"&&(n=0),n>=A&&A>0&&typeof e=="object")return rs(e)?"[Array]":"[Object]";var E=_p(c,n);if(typeof o>"u")o=[];else if(Xu(o,e)>=0)return"[Circular]";function p(q,j,H){if(j&&(o=sp.call(o),o.push(j)),H){var Q={depth:c.depth};return Ft(c,"quoteStyle")&&(Q.quoteStyle=c.quoteStyle),t(q,Q,n+1,o)}return t(q,c,n+1,o)}if(typeof e=="function"&&!xc(e)){var s=gp(e),m=bn(e,p);return"[Function"+(s?": "+s:" (anonymous)")+"]"+(m.length>0?" { "+mt.call(m,", ")+" }":"")}if(Ju(e)){var y=wr?Mt.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):es.call(e);return typeof e=="object"&&!wr?qr(y):y}if(Ap(e)){for(var S="<"+vc.call(String(e.nodeName)),i=e.attributes||[],v=0;v<i.length;v++)S+=" "+i[v].name+"="+Yu(cp(i[v].value),"double",c);return S+=">",e.childNodes&&e.childNodes.length&&(S+="..."),S+="</"+vc.call(String(e.nodeName))+">",S}if(rs(e)){if(e.length===0)return"[]";var C=bn(e,p);return E&&!xp(C)?"["+ns(C,E)+"]":"[ "+mt.call(C,", ")+" ]"}if(lp(e)){var I=bn(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!Qu.call(e,"cause")?"{ ["+String(e)+"] "+mt.call(mc.call("[cause]: "+p(e.cause),I),", ")+" }":I.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+mt.call(I,", ")+" }"}if(typeof e=="object"&&u){if(Tc&&typeof e[Tc]=="function"&&ts)return ts(e,{depth:A-n});if(u!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(vp(e)){var B=[];return Yh.call(e,function(q,j){B.push(p(j,e,!0)+" => "+p(q,e))}),_c("Map",Gn.call(e),B,E)}if(Cp(e)){var T=[];return Jh.call(e,function(q){T.push(p(q,e))}),_c("Set",jn.call(e),T,E)}if(mp(e))return Fi("WeakMap");if(Sp(e))return Fi("WeakSet");if(Ep(e))return Fi("WeakRef");if(dp(e))return qr(p(Number(e)));if(pp(e))return qr(p(Zi.call(e)));if(hp(e))return qr(tp.call(e));if(fp(e))return qr(p(String(e)));if(!up(e)&&!xc(e)){var h=bn(e,p),l=Cc?Cc(e)===Object.prototype:e instanceof Object||e.constructor===Object,R=e instanceof Object?"":"null prototype",N=!l&&st&&Object(e)===e&&st in e?Bs.call(jt(e),8,-1):R?"Object":"",F=l||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",D=F+(N||R?"["+mt.call(mc.call([],N||[],R||[]),": ")+"] ":"");return h.length===0?D+"{}":E?D+"{"+ns(h,E)+"}":D+"{ "+mt.call(h,", ")+" }"}return String(e)};function Yu(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function cp(t){return Mt.call(String(t),/"/g,"&quot;")}function rs(t){return jt(t)==="[object Array]"&&(!st||!(typeof t=="object"&&st in t))}function up(t){return jt(t)==="[object Date]"&&(!st||!(typeof t=="object"&&st in t))}function xc(t){return jt(t)==="[object RegExp]"&&(!st||!(typeof t=="object"&&st in t))}function lp(t){return jt(t)==="[object Error]"&&(!st||!(typeof t=="object"&&st in t))}function fp(t){return jt(t)==="[object String]"&&(!st||!(typeof t=="object"&&st in t))}function dp(t){return jt(t)==="[object Number]"&&(!st||!(typeof t=="object"&&st in t))}function hp(t){return jt(t)==="[object Boolean]"&&(!st||!(typeof t=="object"&&st in t))}function Ju(t){if(wr)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!es)return!1;try{return es.call(t),!0}catch{}return!1}function pp(t){if(!t||typeof t!="object"||!Zi)return!1;try{return Zi.call(t),!0}catch{}return!1}var yp=Object.prototype.hasOwnProperty||function(t){return t in this};function Ft(t,e){return yp.call(t,e)}function jt(t){return rp.call(t)}function gp(t){if(t.name)return t.name;var e=ap.call(np.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Xu(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function vp(t){if(!Gn||!t||typeof t!="object")return!1;try{Gn.call(t);try{jn.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function mp(t){if(!Gr||!t||typeof t!="object")return!1;try{Gr.call(t,Gr);try{jr.call(t,jr)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Ep(t){if(!gc||!t||typeof t!="object")return!1;try{return gc.call(t),!0}catch{}return!1}function Cp(t){if(!jn||!t||typeof t!="object")return!1;try{jn.call(t);try{Gn.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Sp(t){if(!jr||!t||typeof t!="object")return!1;try{jr.call(t,jr);try{Gr.call(t,Gr)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Ap(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Zu(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Zu(Bs.call(t,0,e.maxStringLength),e)+n}var o=Mt.call(Mt.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Tp);return Yu(o,"single",e)}function Tp(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+ip.call(e.toString(16))}function qr(t){return"Object("+t+")"}function Fi(t){return t+" { ? }"}function _c(t,e,r,n){var o=n?ns(r,n):mt.call(r,", ");return t+" ("+e+") {"+o+"}"}function xp(t){for(var e=0;e<t.length;e++)if(Xu(t[e],`
`)>=0)return!1;return!0}function _p(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=mt.call(Array(t.indent+1)," ");else return null;return{base:r,prev:mt.call(Array(e+1),r)}}function ns(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+mt.call(t,","+r)+`
`+e.prev}function bn(t,e){var r=rs(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=Ft(t,o)?e(t[o],t):""}var c=typeof Li=="function"?Li(t):[],u;if(wr){u={};for(var a=0;a<c.length;a++)u["$"+c[a]]=c[a]}for(var g in t)Ft(t,g)&&(r&&String(Number(g))===g&&g<t.length||wr&&u["$"+g]instanceof Symbol||(Wu.call(/[^\w$]/,g)?n.push(e(g,t)+": "+e(t[g],t)):n.push(g+": "+e(t[g],t))));if(typeof Li=="function")for(var f=0;f<c.length;f++)Qu.call(t,c[f])&&n.push("["+e(c[f])+"]: "+e(t[c[f]],t));return n}var Rs=ws,Pr=Hh,wp=op,Ip=Rs("%TypeError%"),Bn=Rs("%WeakMap%",!0),Rn=Rs("%Map%",!0),bp=Pr("WeakMap.prototype.get",!0),Bp=Pr("WeakMap.prototype.set",!0),Rp=Pr("WeakMap.prototype.has",!0),Np=Pr("Map.prototype.get",!0),Pp=Pr("Map.prototype.set",!0),Op=Pr("Map.prototype.has",!0),Ns=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Up=function(t,e){var r=Ns(t,e);return r&&r.value},kp=function(t,e,r){var n=Ns(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Dp=function(t,e){return!!Ns(t,e)},Lp=function(){var e,r,n,o={assert:function(c){if(!o.has(c))throw new Ip("Side channel does not contain "+wp(c))},get:function(c){if(Bn&&c&&(typeof c=="object"||typeof c=="function")){if(e)return bp(e,c)}else if(Rn){if(r)return Np(r,c)}else if(n)return Up(n,c)},has:function(c){if(Bn&&c&&(typeof c=="object"||typeof c=="function")){if(e)return Rp(e,c)}else if(Rn){if(r)return Op(r,c)}else if(n)return Dp(n,c);return!1},set:function(c,u){Bn&&c&&(typeof c=="object"||typeof c=="function")?(e||(e=new Bn),Bp(e,c,u)):Rn?(r||(r=new Rn),Pp(r,c,u)):(n||(n={key:{},next:null}),kp(n,c,u))}};return o},Fp=String.prototype.replace,Mp=/%20/g,Mi={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ps={default:Mi.RFC3986,formatters:{RFC1738:function(t){return Fp.call(t,Mp,"+")},RFC3986:function(t){return String(t)}},RFC1738:Mi.RFC1738,RFC3986:Mi.RFC3986},qp=Ps,qi=Object.prototype.hasOwnProperty,Yt=Array.isArray,vt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Vp=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Yt(n)){for(var o=[],c=0;c<n.length;++c)typeof n[c]<"u"&&o.push(n[c]);r.obj[r.prop]=o}}},el=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},Kp=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Yt(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!qi.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var o=e;return Yt(e)&&!Yt(r)&&(o=el(e,n)),Yt(e)&&Yt(r)?(r.forEach(function(c,u){if(qi.call(e,u)){var a=e[u];a&&typeof a=="object"&&c&&typeof c=="object"?e[u]=t(a,c,n):e.push(c)}else e[u]=c}),e):Object.keys(r).reduce(function(c,u){var a=r[u];return qi.call(c,u)?c[u]=t(c[u],a,n):c[u]=a,c},o)},$p=function(e,r){return Object.keys(r).reduce(function(n,o){return n[o]=r[o],n},e)},Gp=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},jp=function(e,r,n,o,c){if(e.length===0)return e;var u=e;if(typeof e=="symbol"?u=Symbol.prototype.toString.call(e):typeof e!="string"&&(u=String(e)),n==="iso-8859-1")return escape(u).replace(/%u[0-9a-f]{4}/gi,function(A){return"%26%23"+parseInt(A.slice(2),16)+"%3B"});for(var a="",g=0;g<u.length;++g){var f=u.charCodeAt(g);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||c===qp.RFC1738&&(f===40||f===41)){a+=u.charAt(g);continue}if(f<128){a=a+vt[f];continue}if(f<2048){a=a+(vt[192|f>>6]+vt[128|f&63]);continue}if(f<55296||f>=57344){a=a+(vt[224|f>>12]+vt[128|f>>6&63]+vt[128|f&63]);continue}g+=1,f=65536+((f&1023)<<10|u.charCodeAt(g)&1023),a+=vt[240|f>>18]+vt[128|f>>12&63]+vt[128|f>>6&63]+vt[128|f&63]}return a},Hp=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],o=0;o<r.length;++o)for(var c=r[o],u=c.obj[c.prop],a=Object.keys(u),g=0;g<a.length;++g){var f=a[g],A=u[f];typeof A=="object"&&A!==null&&n.indexOf(A)===-1&&(r.push({obj:u,prop:f}),n.push(A))}return Vp(r),e},zp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Wp=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Qp=function(e,r){return[].concat(e,r)},Yp=function(e,r){if(Yt(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(r(e[o]));return n}return r(e)},tl={arrayToObject:el,assign:$p,combine:Qp,compact:Hp,decode:Gp,encode:jp,isBuffer:Wp,isRegExp:zp,maybeMap:Yp,merge:Kp},rl=Lp,as=tl,Hr=Ps,Jp=Object.prototype.hasOwnProperty,wc={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Rt=Array.isArray,Xp=String.prototype.split,Zp=Array.prototype.push,nl=function(t,e){Zp.apply(t,Rt(e)?e:[e])},ey=Date.prototype.toISOString,Ic=Hr.default,tt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:as.encode,encodeValuesOnly:!1,format:Ic,formatter:Hr.formatters[Ic],indices:!1,serializeDate:function(e){return ey.call(e)},skipNulls:!1,strictNullHandling:!1},ty=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Vi={},ry=function t(e,r,n,o,c,u,a,g,f,A,E,p,s,m,y,S){for(var i=e,v=S,C=0,I=!1;(v=v.get(Vi))!==void 0&&!I;){var B=v.get(e);if(C+=1,typeof B<"u"){if(B===C)throw new RangeError("Cyclic object value");I=!0}typeof v.get(Vi)>"u"&&(C=0)}if(typeof g=="function"?i=g(r,i):i instanceof Date?i=E(i):n==="comma"&&Rt(i)&&(i=as.maybeMap(i,function(re){return re instanceof Date?E(re):re})),i===null){if(c)return a&&!m?a(r,tt.encoder,y,"key",p):r;i=""}if(ty(i)||as.isBuffer(i)){if(a){var T=m?r:a(r,tt.encoder,y,"key",p);if(n==="comma"&&m){for(var h=Xp.call(String(i),","),l="",R=0;R<h.length;++R)l+=(R===0?"":",")+s(a(h[R],tt.encoder,y,"value",p));return[s(T)+(o&&Rt(i)&&h.length===1?"[]":"")+"="+l]}return[s(T)+"="+s(a(i,tt.encoder,y,"value",p))]}return[s(r)+"="+s(String(i))]}var N=[];if(typeof i>"u")return N;var F;if(n==="comma"&&Rt(i))F=[{value:i.length>0?i.join(",")||null:void 0}];else if(Rt(g))F=g;else{var D=Object.keys(i);F=f?D.sort(f):D}for(var q=o&&Rt(i)&&i.length===1?r+"[]":r,j=0;j<F.length;++j){var H=F[j],Q=typeof H=="object"&&typeof H.value<"u"?H.value:i[H];if(!(u&&Q===null)){var J=Rt(i)?typeof n=="function"?n(q,H):q:q+(A?"."+H:"["+H+"]");S.set(e,C);var X=rl();X.set(Vi,S),nl(N,t(Q,J,n,o,c,u,a,g,f,A,E,p,s,m,y,X))}}return N},ny=function(e){if(!e)return tt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||tt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Hr.default;if(typeof e.format<"u"){if(!Jp.call(Hr.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=Hr.formatters[n],c=tt.filter;return(typeof e.filter=="function"||Rt(e.filter))&&(c=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:tt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?tt.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:tt.charsetSentinel,delimiter:typeof e.delimiter>"u"?tt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:tt.encode,encoder:typeof e.encoder=="function"?e.encoder:tt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:tt.encodeValuesOnly,filter:c,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:tt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:tt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:tt.strictNullHandling}},ay=function(t,e){var r=t,n=ny(e),o,c;typeof n.filter=="function"?(c=n.filter,r=c("",r)):Rt(n.filter)&&(c=n.filter,o=c);var u=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in wc?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var g=wc[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var f=g==="comma"&&e&&e.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);for(var A=rl(),E=0;E<o.length;++E){var p=o[E];n.skipNulls&&r[p]===null||nl(u,ry(r[p],p,g,f,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,A))}var s=u.join(n.delimiter),m=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),s.length>0?m+s:""},Ir=tl,is=Object.prototype.hasOwnProperty,iy=Array.isArray,Ze={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Ir.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},sy=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},al=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},oy="utf8=%26%2310003%3B",cy="utf8=%E2%9C%93",uy=function(e,r){var n={},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=r.parameterLimit===1/0?void 0:r.parameterLimit,u=o.split(r.delimiter,c),a=-1,g,f=r.charset;if(r.charsetSentinel)for(g=0;g<u.length;++g)u[g].indexOf("utf8=")===0&&(u[g]===cy?f="utf-8":u[g]===oy&&(f="iso-8859-1"),a=g,g=u.length);for(g=0;g<u.length;++g)if(g!==a){var A=u[g],E=A.indexOf("]="),p=E===-1?A.indexOf("="):E+1,s,m;p===-1?(s=r.decoder(A,Ze.decoder,f,"key"),m=r.strictNullHandling?null:""):(s=r.decoder(A.slice(0,p),Ze.decoder,f,"key"),m=Ir.maybeMap(al(A.slice(p+1),r),function(y){return r.decoder(y,Ze.decoder,f,"value")})),m&&r.interpretNumericEntities&&f==="iso-8859-1"&&(m=sy(m)),A.indexOf("[]=")>-1&&(m=iy(m)?[m]:m),is.call(n,s)?n[s]=Ir.combine(n[s],m):n[s]=m}return n},ly=function(t,e,r,n){for(var o=n?e:al(e,r),c=t.length-1;c>=0;--c){var u,a=t[c];if(a==="[]"&&r.parseArrays)u=[].concat(o);else{u=r.plainObjects?Object.create(null):{};var g=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,f=parseInt(g,10);!r.parseArrays&&g===""?u={0:o}:!isNaN(f)&&a!==g&&String(f)===g&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(u=[],u[f]=o):g!=="__proto__"&&(u[g]=o)}o=u}return o},fy=function(e,r,n,o){if(e){var c=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,u=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,g=n.depth>0&&u.exec(c),f=g?c.slice(0,g.index):c,A=[];if(f){if(!n.plainObjects&&is.call(Object.prototype,f)&&!n.allowPrototypes)return;A.push(f)}for(var E=0;n.depth>0&&(g=a.exec(c))!==null&&E<n.depth;){if(E+=1,!n.plainObjects&&is.call(Object.prototype,g[1].slice(1,-1))&&!n.allowPrototypes)return;A.push(g[1])}return g&&A.push("["+c.slice(g.index)+"]"),ly(A,r,n,o)}},dy=function(e){if(!e)return Ze;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?Ze.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Ze.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ze.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ze.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ze.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ze.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ze.comma,decoder:typeof e.decoder=="function"?e.decoder:Ze.decoder,delimiter:typeof e.delimiter=="string"||Ir.isRegExp(e.delimiter)?e.delimiter:Ze.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ze.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ze.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ze.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ze.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ze.strictNullHandling}},hy=function(t,e){var r=dy(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?uy(t,r):t,o=r.plainObjects?Object.create(null):{},c=Object.keys(n),u=0;u<c.length;++u){var a=c[u],g=fy(a,n[a],r,typeof t=="string");o=Ir.merge(o,g,r)}return r.allowSparse===!0?o:Ir.compact(o)},py=ay,yy=hy,gy=Ps,il={formats:gy,parse:yy,stringify:py},sl={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Be,function(){function r(){}return r.prototype.encodeReserved=function(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(o){return/%[0-9A-Fa-f]/.test(o)||(o=encodeURI(o).replace(/%5B/g,"[").replace(/%5D/g,"]")),o}).join("")},r.prototype.encodeUnreserved=function(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(o){return"%"+o.charCodeAt(0).toString(16).toUpperCase()})},r.prototype.encodeValue=function(n,o,c){return o=n==="+"||n==="#"?this.encodeReserved(o):this.encodeUnreserved(o),c?this.encodeUnreserved(c)+"="+o:o},r.prototype.isDefined=function(n){return n!=null},r.prototype.isKeyOperator=function(n){return n===";"||n==="&"||n==="?"},r.prototype.getValues=function(n,o,c,u){var a=n[c],g=[];if(this.isDefined(a)&&a!=="")if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")a=a.toString(),u&&u!=="*"&&(a=a.substring(0,parseInt(u,10))),g.push(this.encodeValue(o,a,this.isKeyOperator(o)?c:null));else if(u==="*")Array.isArray(a)?a.filter(this.isDefined).forEach(function(A){g.push(this.encodeValue(o,A,this.isKeyOperator(o)?c:null))},this):Object.keys(a).forEach(function(A){this.isDefined(a[A])&&g.push(this.encodeValue(o,a[A],A))},this);else{var f=[];Array.isArray(a)?a.filter(this.isDefined).forEach(function(A){f.push(this.encodeValue(o,A))},this):Object.keys(a).forEach(function(A){this.isDefined(a[A])&&(f.push(this.encodeUnreserved(A)),f.push(this.encodeValue(o,a[A].toString())))},this),this.isKeyOperator(o)?g.push(this.encodeUnreserved(c)+"="+f.join(",")):f.length!==0&&g.push(f.join(","))}else o===";"?this.isDefined(a)&&g.push(this.encodeUnreserved(c)):a===""&&(o==="&"||o==="?")?g.push(this.encodeUnreserved(c)+"="):a===""&&g.push("");return g},r.prototype.parse=function(n){var o=this,c=["+","#",".","/",";","?","&"];return{expand:function(u){return n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(a,g,f){if(g){var A=null,E=[];if(c.indexOf(g.charAt(0))!==-1&&(A=g.charAt(0),g=g.substr(1)),g.split(/,/g).forEach(function(s){var m=/([^:\*]*)(?::(\d+)|(\*))?/.exec(s);E.push.apply(E,o.getValues(u,A,m[1],m[2]||m[3]))}),A&&A!=="+"){var p=",";return A==="?"?p="&":A!=="#"&&(p=A),(E.length!==0?A:"")+E.join(p)}else return E.join(",")}else return o.encodeReserved(f)})}}},new r})})(sl);var vy=sl.exports,ol={},ha={},pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.default=Ey;let Nn;const my=new Uint8Array(16);function Ey(){if(!Nn&&(Nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nn(my)}var Ht={},cr={},ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.default=void 0;var Cy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;ya.default=Cy;Object.defineProperty(cr,"__esModule",{value:!0});cr.default=void 0;var Sy=Ay(ya);function Ay(t){return t&&t.__esModule?t:{default:t}}function Ty(t){return typeof t=="string"&&Sy.default.test(t)}var xy=Ty;cr.default=xy;Object.defineProperty(Ht,"__esModule",{value:!0});Ht.default=void 0;Ht.unsafeStringify=cl;var _y=wy(cr);function wy(t){return t&&t.__esModule?t:{default:t}}const et=[];for(let t=0;t<256;++t)et.push((t+256).toString(16).slice(1));function cl(t,e=0){return(et[t[e+0]]+et[t[e+1]]+et[t[e+2]]+et[t[e+3]]+"-"+et[t[e+4]]+et[t[e+5]]+"-"+et[t[e+6]]+et[t[e+7]]+"-"+et[t[e+8]]+et[t[e+9]]+"-"+et[t[e+10]]+et[t[e+11]]+et[t[e+12]]+et[t[e+13]]+et[t[e+14]]+et[t[e+15]]).toLowerCase()}function Iy(t,e=0){const r=cl(t,e);if(!(0,_y.default)(r))throw TypeError("Stringified UUID is invalid");return r}var by=Iy;Ht.default=by;Object.defineProperty(ha,"__esModule",{value:!0});ha.default=void 0;var By=Ny(pa),Ry=Ht;function Ny(t){return t&&t.__esModule?t:{default:t}}let bc,Ki,$i=0,Gi=0;function Py(t,e,r){let n=e&&r||0;const o=e||new Array(16);t=t||{};let c=t.node||bc,u=t.clockseq!==void 0?t.clockseq:Ki;if(c==null||u==null){const p=t.random||(t.rng||By.default)();c==null&&(c=bc=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),u==null&&(u=Ki=(p[6]<<8|p[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),g=t.nsecs!==void 0?t.nsecs:Gi+1;const f=a-$i+(g-Gi)/1e4;if(f<0&&t.clockseq===void 0&&(u=u+1&16383),(f<0||a>$i)&&t.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");$i=a,Gi=g,Ki=u,a+=122192928e5;const A=((a&268435455)*1e4+g)%4294967296;o[n++]=A>>>24&255,o[n++]=A>>>16&255,o[n++]=A>>>8&255,o[n++]=A&255;const E=a/4294967296*1e4&268435455;o[n++]=E>>>8&255,o[n++]=E&255,o[n++]=E>>>24&15|16,o[n++]=E>>>16&255,o[n++]=u>>>8|128,o[n++]=u&255;for(let p=0;p<6;++p)o[n+p]=c[p];return e||(0,Ry.unsafeStringify)(o)}var Oy=Py;ha.default=Oy;var ga={},Vt={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.default=void 0;var Uy=ky(cr);function ky(t){return t&&t.__esModule?t:{default:t}}function Dy(t){if(!(0,Uy.default)(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Ly=Dy;hn.default=Ly;Object.defineProperty(Vt,"__esModule",{value:!0});Vt.URL=Vt.DNS=void 0;Vt.default=Ky;var Fy=Ht,My=qy(hn);function qy(t){return t&&t.__esModule?t:{default:t}}function Vy(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const ul="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Vt.DNS=ul;const ll="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Vt.URL=ll;function Ky(t,e,r){function n(o,c,u,a){var g;if(typeof o=="string"&&(o=Vy(o)),typeof c=="string"&&(c=(0,My.default)(c)),((g=c)===null||g===void 0?void 0:g.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+o.length);if(f.set(c),f.set(o,c.length),f=r(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,u){a=a||0;for(let A=0;A<16;++A)u[a+A]=f[A];return u}return(0,Fy.unsafeStringify)(f)}try{n.name=t}catch{}return n.DNS=ul,n.URL=ll,n}var va={};Object.defineProperty(va,"__esModule",{value:!0});va.default=void 0;function $y(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Gy(jy(Hy(t),t.length*8))}function Gy(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let o=0;o<r;o+=8){const c=t[o>>5]>>>o%32&255,u=parseInt(n.charAt(c>>>4&15)+n.charAt(c&15),16);e.push(u)}return e}function fl(t){return(t+64>>>9<<4)+14+1}function jy(t,e){t[e>>5]|=128<<e%32,t[fl(e)-1]=e;let r=1732584193,n=-271733879,o=-1732584194,c=271733878;for(let u=0;u<t.length;u+=16){const a=r,g=n,f=o,A=c;r=rt(r,n,o,c,t[u],7,-680876936),c=rt(c,r,n,o,t[u+1],12,-389564586),o=rt(o,c,r,n,t[u+2],17,606105819),n=rt(n,o,c,r,t[u+3],22,-1044525330),r=rt(r,n,o,c,t[u+4],7,-176418897),c=rt(c,r,n,o,t[u+5],12,1200080426),o=rt(o,c,r,n,t[u+6],17,-1473231341),n=rt(n,o,c,r,t[u+7],22,-45705983),r=rt(r,n,o,c,t[u+8],7,1770035416),c=rt(c,r,n,o,t[u+9],12,-1958414417),o=rt(o,c,r,n,t[u+10],17,-42063),n=rt(n,o,c,r,t[u+11],22,-1990404162),r=rt(r,n,o,c,t[u+12],7,1804603682),c=rt(c,r,n,o,t[u+13],12,-40341101),o=rt(o,c,r,n,t[u+14],17,-1502002290),n=rt(n,o,c,r,t[u+15],22,1236535329),r=nt(r,n,o,c,t[u+1],5,-165796510),c=nt(c,r,n,o,t[u+6],9,-1069501632),o=nt(o,c,r,n,t[u+11],14,643717713),n=nt(n,o,c,r,t[u],20,-373897302),r=nt(r,n,o,c,t[u+5],5,-701558691),c=nt(c,r,n,o,t[u+10],9,38016083),o=nt(o,c,r,n,t[u+15],14,-660478335),n=nt(n,o,c,r,t[u+4],20,-405537848),r=nt(r,n,o,c,t[u+9],5,568446438),c=nt(c,r,n,o,t[u+14],9,-1019803690),o=nt(o,c,r,n,t[u+3],14,-187363961),n=nt(n,o,c,r,t[u+8],20,1163531501),r=nt(r,n,o,c,t[u+13],5,-1444681467),c=nt(c,r,n,o,t[u+2],9,-51403784),o=nt(o,c,r,n,t[u+7],14,1735328473),n=nt(n,o,c,r,t[u+12],20,-1926607734),r=at(r,n,o,c,t[u+5],4,-378558),c=at(c,r,n,o,t[u+8],11,-2022574463),o=at(o,c,r,n,t[u+11],16,1839030562),n=at(n,o,c,r,t[u+14],23,-35309556),r=at(r,n,o,c,t[u+1],4,-1530992060),c=at(c,r,n,o,t[u+4],11,1272893353),o=at(o,c,r,n,t[u+7],16,-155497632),n=at(n,o,c,r,t[u+10],23,-1094730640),r=at(r,n,o,c,t[u+13],4,681279174),c=at(c,r,n,o,t[u],11,-358537222),o=at(o,c,r,n,t[u+3],16,-722521979),n=at(n,o,c,r,t[u+6],23,76029189),r=at(r,n,o,c,t[u+9],4,-640364487),c=at(c,r,n,o,t[u+12],11,-421815835),o=at(o,c,r,n,t[u+15],16,530742520),n=at(n,o,c,r,t[u+2],23,-995338651),r=it(r,n,o,c,t[u],6,-198630844),c=it(c,r,n,o,t[u+7],10,1126891415),o=it(o,c,r,n,t[u+14],15,-1416354905),n=it(n,o,c,r,t[u+5],21,-57434055),r=it(r,n,o,c,t[u+12],6,1700485571),c=it(c,r,n,o,t[u+3],10,-1894986606),o=it(o,c,r,n,t[u+10],15,-1051523),n=it(n,o,c,r,t[u+1],21,-2054922799),r=it(r,n,o,c,t[u+8],6,1873313359),c=it(c,r,n,o,t[u+15],10,-30611744),o=it(o,c,r,n,t[u+6],15,-1560198380),n=it(n,o,c,r,t[u+13],21,1309151649),r=it(r,n,o,c,t[u+4],6,-145523070),c=it(c,r,n,o,t[u+11],10,-1120210379),o=it(o,c,r,n,t[u+2],15,718787259),n=it(n,o,c,r,t[u+9],21,-343485551),r=qt(r,a),n=qt(n,g),o=qt(o,f),c=qt(c,A)}return[r,n,o,c]}function Hy(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(fl(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function qt(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function zy(t,e){return t<<e|t>>>32-e}function ma(t,e,r,n,o,c){return qt(zy(qt(qt(e,t),qt(n,c)),o),r)}function rt(t,e,r,n,o,c,u){return ma(e&r|~e&n,t,e,o,c,u)}function nt(t,e,r,n,o,c,u){return ma(e&n|r&~n,t,e,o,c,u)}function at(t,e,r,n,o,c,u){return ma(e^r^n,t,e,o,c,u)}function it(t,e,r,n,o,c,u){return ma(r^(e|~n),t,e,o,c,u)}var Wy=$y;va.default=Wy;Object.defineProperty(ga,"__esModule",{value:!0});ga.default=void 0;var Qy=dl(Vt),Yy=dl(va);function dl(t){return t&&t.__esModule?t:{default:t}}const Jy=(0,Qy.default)("v3",48,Yy.default);var Xy=Jy;ga.default=Xy;var Ea={},Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.default=void 0;const Zy=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var eg={randomUUID:Zy};Ca.default=eg;Object.defineProperty(Ea,"__esModule",{value:!0});Ea.default=void 0;var Bc=hl(Ca),tg=hl(pa),rg=Ht;function hl(t){return t&&t.__esModule?t:{default:t}}function ng(t,e,r){if(Bc.default.randomUUID&&!e&&!t)return Bc.default.randomUUID();t=t||{};const n=t.random||(t.rng||tg.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return(0,rg.unsafeStringify)(n)}var ag=ng;Ea.default=ag;var Sa={},Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.default=void 0;function ig(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ji(t,e){return t<<e|t>>>32-e}function sg(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const u=unescape(encodeURIComponent(t));t=[];for(let a=0;a<u.length;++a)t.push(u.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,o=Math.ceil(n/16),c=new Array(o);for(let u=0;u<o;++u){const a=new Uint32Array(16);for(let g=0;g<16;++g)a[g]=t[u*64+g*4]<<24|t[u*64+g*4+1]<<16|t[u*64+g*4+2]<<8|t[u*64+g*4+3];c[u]=a}c[o-1][14]=(t.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(t.length-1)*8&4294967295;for(let u=0;u<o;++u){const a=new Uint32Array(80);for(let s=0;s<16;++s)a[s]=c[u][s];for(let s=16;s<80;++s)a[s]=ji(a[s-3]^a[s-8]^a[s-14]^a[s-16],1);let g=r[0],f=r[1],A=r[2],E=r[3],p=r[4];for(let s=0;s<80;++s){const m=Math.floor(s/20),y=ji(g,5)+ig(m,f,A,E)+p+e[m]+a[s]>>>0;p=E,E=A,A=ji(f,30)>>>0,f=g,g=y}r[0]=r[0]+g>>>0,r[1]=r[1]+f>>>0,r[2]=r[2]+A>>>0,r[3]=r[3]+E>>>0,r[4]=r[4]+p>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var og=sg;Aa.default=og;Object.defineProperty(Sa,"__esModule",{value:!0});Sa.default=void 0;var cg=pl(Vt),ug=pl(Aa);function pl(t){return t&&t.__esModule?t:{default:t}}const lg=(0,cg.default)("v5",80,ug.default);var fg=lg;Sa.default=fg;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.default=void 0;var dg="00000000-0000-0000-0000-000000000000";Ta.default=dg;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.default=void 0;var hg=pg(cr);function pg(t){return t&&t.__esModule?t:{default:t}}function yg(t){if(!(0,hg.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var gg=yg;xa.default=gg;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var e=A(ha),r=A(ga),n=A(Ea),o=A(Sa),c=A(Ta),u=A(xa),a=A(cr),g=A(Ht),f=A(hn);function A(E){return E&&E.__esModule?E:{default:E}}})(ol);var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.isBrowser=void 0;function vg(){return typeof window<"u"}_a.isBrowser=vg;var yl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.closeSession=t.request=t.sessions=void 0;const e=ql,r=Vl,n=zn,o=il,c=os,u=Nt,a=Pt,g=Kl,f=br,{HTTP2_HEADER_CONTENT_ENCODING:A,HTTP2_HEADER_CONTENT_TYPE:E,HTTP2_HEADER_METHOD:p,HTTP2_HEADER_PATH:s,HTTP2_HEADER_STATUS:m}=e.constants,y=!!g.env.HTTP2_DEBUG;t.sessions={};async function S(I){const B=c(!0,{},I);B.validateStatus=B.validateStatus||i,B.responseType=B.responseType||"json";const T=new n.URL(B.url),h=v(T.host);h.timeoutHandle!==void 0&&clearTimeout(h.timeoutHandle);let l=T.pathname;if(I.params&&Object.keys(I.params).length>0){const H=(I.paramsSerializer||o.stringify)(B.params);l+=`?${H}`}const R=Object.assign({},B.headers,{[s]:l,[p]:I.method||"GET"});R[E]||B.responseType!=="text"&&(R[E]="application/json");const N={config:I,request:{},headers:[],status:0,data:{},statusText:""},F=[],D=h.session;let q;return new Promise((j,H)=>{try{q=D.request(R).on("response",Q=>{N.headers=Q,N.status=Number(Q[m]);let J=q;if(Q[A]==="gzip"&&(J=q.pipe(r.createGunzip())),B.responseType==="stream"){N.data=J,j(N);return}J.on("data",X=>{F.push(X)}).on("error",X=>{H(X)}).on("end",()=>{const X=Buffer.concat(F);let re=X;if(X){if(B.responseType==="json")try{re=JSON.parse(X.toString("utf8"))}catch{re=X.toString("utf8")}else B.responseType==="text"?re=X.toString("utf8"):B.responseType==="arraybuffer"&&(re=X.buffer);N.data=re}if(!B.validateStatus(N.status)){let se=`Request failed with status code ${N.status}. `;if(N.data&&typeof N.data=="object"){const de=a.inspect(N.data,{depth:5});se=`${se}
'${de}`}H(new f.GaxiosError(se,B,N))}j(N)})}).on("error",Q=>{H(Q)})}catch(Q){C(T),H(Q)}if(N.request=q,I.data){if(I.data instanceof u.Stream)I.data.pipe(q);else if(typeof I.data=="string"){const Q=Buffer.from(I.data);q.end(Q)}else if(typeof I.data=="object"){const Q=JSON.stringify(I.data);q.end(Q)}}h.timeoutHandle=setTimeout(()=>{C(T)},500)})}t.request=S;function i(I){return I>=200&&I<300}function v(I){if(t.sessions[I])y&&console.log(`Used cached client for ${I}`);else{y&&console.log(`Creating client for ${I}`);const B=e.connect(`https://${I}`);B.on("error",T=>{console.error(`*ERROR*: ${T}`),delete t.sessions[I]}).on("goaway",(T,h)=>{console.error(`*GOAWAY*: ${T} : ${h}`),delete t.sessions[I]}),t.sessions[I]={session:B}}return t.sessions[I]}async function C(I){const B=t.sessions[I.host];if(!B)return;const{session:T}=B;delete t.sessions[I.host],y&&console.error(`Closing ${I.host}`),T.close(()=>{y&&console.error(`Closed ${I.host}`)}),setTimeout(()=>{T&&!T.destroyed&&(y&&console.log(`Forcing close ${I.host}`),T&&T.destroy())},1e3)}t.closeSession=C})(yl);const mg="googleapis-common",Eg="6.0.4",Cg="A common tooling library used by the googleapis npm module. You probably don't want to use this directly.",Sg="googleapis/nodejs-googleapis-common",Ag="build/src/index.js",Tg="build/src/index.d.ts",xg=["build/src","!build/src/**/*.map"],_g={prebenchmark:"npm run compile",benchmark:"node build/benchmark/bench.js",compile:"tsc -p .",test:"c8 mocha build/test","system-test":"c8 mocha build/system-test --timeout 600000","presystem-test":"npm run compile",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",lint:"gts check","samples-test":"mocha build/samples-test",docs:"compodoc src/","docs-test":"linkinator docs",webpack:"webpack","browser-test":"karma start","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",clean:"gts clean",precompile:"gts clean"},wg=[],Ig="Google LLC",bg="Apache-2.0",Bg={extend:"^3.0.2",gaxios:"^5.0.1","google-auth-library":"^8.0.2",qs:"^6.7.0","url-template":"^2.0.8",uuid:"^9.0.0"},Rg={"@compodoc/compodoc":"^1.1.9","@types/execa":"^0.9.0","@types/extend":"^3.0.1","@types/mocha":"^9.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/nock":"^10.0.3","@types/proxyquire":"^1.3.28","@types/qs":"^6.5.3","@types/sinon":"^10.0.0","@types/tmp":"0.2.3","@types/url-template":"^2.0.28","@types/uuid":"^8.0.0",c8:"^7.0.0",codecov:"^3.5.0",execa:"^5.0.0",gts:"^3.1.0",http2spy:"^2.0.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",linkinator:"^3.1.0",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",proxyquire:"^2.1.3",puppeteer:"^18.2.1",sinon:"^14.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.4",webpack:"^5.30.0","webpack-cli":"^4.0.0"},Ng={node:">=12.0.0"},Pg={name:mg,version:Eg,description:Cg,repository:Sg,main:Ag,types:Tg,files:xg,scripts:_g,keywords:wg,author:Ig,license:bg,dependencies:Bg,devDependencies:Rg,engines:Ng};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.createAPIRequest=void 0;const Og=Yr,Ug=il,gl=Nt,Rc=vy,Nc=ol,Hi=os,ss=_a,kg=yl,vl=Pg;function Dg(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object"}function Lg(t,e){const r=new Array;return e.forEach(n=>{t[n]===void 0&&r.push(n)}),r.length>0?r:null}function Fg(t,e){if(e)Pc(t).then(r=>e(null,r),e);else return Pc(t)}Nr.createAPIRequest=Fg;async function Pc(t){var e;const r=Hi(!0,{},((e=t.context.google)===null||e===void 0?void 0:e._options)||{},t.context._options||{},t.options),n=Hi(!0,{},r.params,t.params);r.userAgentDirectives=r.userAgentDirectives||[];const o=n.media||{};let c=n.requestBody;!n.requestBody&&n.resource&&(!t.requiredParams.includes("resource")||typeof n.resource!="string")&&(c=n.resource,delete n.resource),delete n.requestBody;let u=n.auth||r.auth;const a=typeof o.body=="string"?"text/plain":"application/octet-stream";delete n.media,delete n.auth;const g=n.headers||{};qg(g),delete n.headers,Object.keys(n).forEach(p=>{if(p.slice(-1)==="_"){const s=p.slice(0,-1);n[s]=n[p],delete n[p]}});const f=Lg(n,t.requiredParams);if(f)throw new Error("Missing required parameters: "+f.join(", "));if(r.url&&(r.url=Rc.parse(r.url).expand(n)),t.mediaUrl&&(t.mediaUrl=Rc.parse(t.mediaUrl).expand(n)),t.context._options.rootUrl!==void 0&&r.url!==void 0){const p=new URL(r.url),s=p.href.substr(p.origin.length);r.url=new URL(s,t.context._options.rootUrl).href}r.paramsSerializer=p=>Ug.stringify(p,{arrayFormat:"repeat"}),t.pathParams.forEach(p=>delete n[p]),typeof u=="string"&&(n.key=n.key||u,u=void 0);function A(p){const s=Nc.v4(),m=`--${s}--`,y=new gl.PassThrough({flush(v){this.push(`\r
`),this.push(m),v()}}),S=new Mg,i=Dg(p[1].body);g["content-type"]=`multipart/related; boundary=${s}`;for(const v of p){const C=`--${s}\r
content-type: ${v["content-type"]}\r
\r
`;y.push(C),typeof v.body=="string"?(y.push(v.body),y.push(`\r
`)):(S.on("progress",I=>{r.onUploadProgress&&r.onUploadProgress({bytesRead:I})}),v.body.pipe(S).pipe(y))}i||(y.push(m),y.push(null)),r.data=y}function E(p){const s=Nc.v4(),m=`--${s}--`;g["content-type"]=`multipart/related; boundary=${s}`;let y="";for(const S of p){const i=`--${s}\r
content-type: ${S["content-type"]}\r
\r
`;y+=i,typeof S.body=="string"&&(y+=S.body,y+=`\r
`)}y+=m,r.data=y}if(t.mediaUrl&&o.body)if(r.url=t.mediaUrl,c){n.uploadType="multipart";const p=[{"content-type":"application/json",body:JSON.stringify(c)},{"content-type":o.mimeType||c&&c.mimeType||a,body:o.body}];(0,ss.isBrowser)()?E(p):A(p)}else n.uploadType="media",Object.assign(g,{"content-type":o.mimeType||a}),r.data=o.body;else r.data=c||void 0;if(r.headers=Hi(!0,r.headers||{},g),r.params=n,!(0,ss.isBrowser)()){r.headers["Accept-Encoding"]="gzip",r.userAgentDirectives.push({product:"google-api-nodejs-client",version:vl.version,comment:"gzip"});const p=r.userAgentDirectives.map(s=>{let m=`${s.product}/${s.version}`;return s.comment&&(m+=` (${s.comment})`),m}).join(" ");r.headers["User-Agent"]=p}if(r.validateStatus||(r.validateStatus=p=>p>=200&&p<300||p===304),r.retry=r.retry===void 0?!0:r.retry,delete r.auth,u&&typeof u=="object")if(r.http2){const p=await u.getRequestHeaders(r.url),s=Object.assign({},r);return s.headers=Object.assign(s.headers,p),kg.request(s)}else return u.request(r);else return new Og.DefaultTransporter().request(r)}class Mg extends gl.Transform{constructor(){super(...arguments),this.bytesRead=0}_transform(e,r,n){this.bytesRead+=e.length,this.emit("progress",this.bytesRead),this.push(e),n()}}function qg(t){(0,ss.isBrowser)()||(t["x-goog-api-client"]=`gdcl/${vl.version} gl-node/${process.versions.node}`)}var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.AuthPlus=void 0;const It=Yr;class Vg extends It.GoogleAuth{constructor(){super(...arguments),this.JWT=It.JWT,this.Compute=It.Compute,this.OAuth2=It.OAuth2Client,this.GoogleAuth=It.GoogleAuth,this.AwsClient=It.AwsClient,this.IdentityPoolClient=It.IdentityPoolClient,this.ExternalAccountClient=It.ExternalAccountClient}async getClient(e){return this._cachedAuth=new It.GoogleAuth(e),this._cachedAuth.getClient()}getProjectId(e){return e?this._cachedAuth?this._cachedAuth.getProjectId(e):super.getProjectId(e):this._cachedAuth?this._cachedAuth.getProjectId():super.getProjectId()}}wa.AuthPlus=Vg;var Ia={},pn={};Object.defineProperty(pn,"__esModule",{value:!0});pn.Endpoint=void 0;const Oc=Nr;class Kg{constructor(e){this._options=e||{}}applySchema(e,r,n,o){if(this.applyMethodsFromSchema(e,r,n,o),n.resources){for(const c in n.resources)if(Object.prototype.hasOwnProperty.call(n.resources,c)){const u=n.resources[c];e[c]||(e[c]={}),this.applySchema(e[c],r,u,o)}}}applyMethodsFromSchema(e,r,n,o){if(n.methods){for(const c in n.methods)if(Object.prototype.hasOwnProperty.call(n.methods,c)){const u=n.methods[c];e[c]=this.makeMethod(r,u,o)}}}makeMethod(e,r,n){return(o,c)=>{const u=typeof o=="function"?{}:o;c=typeof o=="function"?o:c;const a=Uc(e.rootUrl+e.servicePath+r.path),g={options:{url:a.substring(1,a.length-1),method:r.httpMethod},params:u,requiredParams:r.parameterOrder||[],pathParams:this.getPathParams(r.parameters),context:n};if(r.mediaUpload&&r.mediaUpload.protocols&&r.mediaUpload.protocols.simple&&r.mediaUpload.protocols.simple.path){const f=Uc(e.rootUrl+r.mediaUpload.protocols.simple.path);g.mediaUrl=f.substring(1,f.length-1)}if(!c)return(0,Oc.createAPIRequest)(g);(0,Oc.createAPIRequest)(g,c)}}getPathParams(e){const r=new Array;return typeof e!="object"&&(e={}),Object.keys(e).forEach(n=>{e[n].location==="path"&&r.push(n)}),r}}pn.Endpoint=Kg;function Uc(t){return t?`'${t}'`.replace(/([^:]\/)\/+/g,"$1"):""}Object.defineProperty(Ia,"__esModule",{value:!0});Ia.Discovery=void 0;const $g=nr,Gg=Yr,jg=zn,ml=Pt,Hg=Nr,zg=pn,Wg=ml.promisify($g.readFile);class Qg{constructor(e){this.transporter=new Gg.DefaultTransporter,this.options=e||{}}makeEndpoint(e){return r=>{const n=new zg.Endpoint(r);return n.applySchema(n,e,e,n),n}}log(...e){this.options&&this.options.debug&&console.log(...e)}async discoverAllAPIs(e){const r=this.options.includePrivate?{}:{"X-User-Ip":"0.0.0.0"},o=(await this.transporter.request({url:e,headers:r})).data.items,c=await Promise.all(o.map(async g=>{const f=await this.discoverAPI(g.discoveryRestUrl);return{api:g,endpointCreator:f}})),u={},a={};for(const g of c)a[g.api.name]||(u[g.api.name]={},a[g.api.name]=f=>{const A=typeof f;let E;if(A==="string")E=f,f={};else if(A==="object")E=f.version,delete f.version;else throw new Error("Argument error: Accepts only string or object");try{const p=g.endpointCreator(f,this);return Object.freeze(p)}catch(p){throw new Error(ml.format('Unable to load endpoint %s("%s"): %s',g.api.name,E,p.message))}}),u[g.api.name][g.api.version]=g.endpointCreator;return a}async discoverAPI(e){if(typeof e=="string"){const r=jg.parse(e);if(e&&!r.protocol){this.log("Reading from file "+e);const n=await Wg(e,{encoding:"utf8"});return this.makeEndpoint(JSON.parse(n))}else{this.log("Requesting "+e);const n=await this.transporter.request({url:e});return this.makeEndpoint(n.data)}}else{const r=e;this.log("Requesting "+r.url);const n=r.url;delete r.url;const o={options:{url:n,method:"GET"},requiredParams:[],pathParams:[],params:r,context:{google:{_options:{}},_options:{}}},c=await(0,Hg.createAPIRequest)(o);return this.makeEndpoint(c.data)}}}Ia.Discovery=Qg;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Endpoint=t.Discovery=t.AuthPlus=t.createAPIRequest=t.getAPI=t.GaxiosError=t.Gaxios=t.AwsClient=t.IdentityPoolClient=t.BaseExternalAccountClient=t.ExternalAccountClient=t.GoogleAuth=t.DefaultTransporter=t.UserRefreshClient=t.Compute=t.JWT=t.OAuth2Client=void 0;var e=Yr;Object.defineProperty(t,"OAuth2Client",{enumerable:!0,get:function(){return e.OAuth2Client}}),Object.defineProperty(t,"JWT",{enumerable:!0,get:function(){return e.JWT}}),Object.defineProperty(t,"Compute",{enumerable:!0,get:function(){return e.Compute}}),Object.defineProperty(t,"UserRefreshClient",{enumerable:!0,get:function(){return e.UserRefreshClient}}),Object.defineProperty(t,"DefaultTransporter",{enumerable:!0,get:function(){return e.DefaultTransporter}}),Object.defineProperty(t,"GoogleAuth",{enumerable:!0,get:function(){return e.GoogleAuth}}),Object.defineProperty(t,"ExternalAccountClient",{enumerable:!0,get:function(){return e.ExternalAccountClient}}),Object.defineProperty(t,"BaseExternalAccountClient",{enumerable:!0,get:function(){return e.BaseExternalAccountClient}}),Object.defineProperty(t,"IdentityPoolClient",{enumerable:!0,get:function(){return e.IdentityPoolClient}}),Object.defineProperty(t,"AwsClient",{enumerable:!0,get:function(){return e.AwsClient}});var r=At;Object.defineProperty(t,"Gaxios",{enumerable:!0,get:function(){return r.Gaxios}}),Object.defineProperty(t,"GaxiosError",{enumerable:!0,get:function(){return r.GaxiosError}});var n=da;Object.defineProperty(t,"getAPI",{enumerable:!0,get:function(){return n.getAPI}});var o=Nr;Object.defineProperty(t,"createAPIRequest",{enumerable:!0,get:function(){return o.createAPIRequest}});var c=wa;Object.defineProperty(t,"AuthPlus",{enumerable:!0,get:function(){return c.AuthPlus}});var u=Ia;Object.defineProperty(t,"Discovery",{enumerable:!0,get:function(){return u.Discovery}});var a=pn;Object.defineProperty(t,"Endpoint",{enumerable:!0,get:function(){return a.Endpoint}})})(kn);var El={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calendar_v3=void 0;const e=kn;(function(r){class n{constructor(s,m){this.context={_options:s||{},google:m},this.acl=new o(this.context),this.calendarList=new c(this.context),this.calendars=new u(this.context),this.channels=new a(this.context),this.colors=new g(this.context),this.events=new f(this.context),this.freebusy=new A(this.context),this.settings=new E(this.context)}}r.Calendar=n;class o{constructor(s){this.context=s}delete(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/acl/{ruleId}").replace(/([^:]\/)\/+/g,"$1"),method:"DELETE"},i),params:S,requiredParams:["calendarId","ruleId"],pathParams:["calendarId","ruleId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}get(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/acl/{ruleId}").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["calendarId","ruleId"],pathParams:["calendarId","ruleId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}insert(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/acl").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}list(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/acl").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}patch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/acl/{ruleId}").replace(/([^:]\/)\/+/g,"$1"),method:"PATCH"},i),params:S,requiredParams:["calendarId","ruleId"],pathParams:["calendarId","ruleId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}update(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/acl/{ruleId}").replace(/([^:]\/)\/+/g,"$1"),method:"PUT"},i),params:S,requiredParams:["calendarId","ruleId"],pathParams:["calendarId","ruleId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}watch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/acl/watch").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Acl=o;class c{constructor(s){this.context=s}delete(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/calendarList/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"DELETE"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}get(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/calendarList/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}insert(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/calendarList").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}list(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/calendarList").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}patch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/calendarList/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"PATCH"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}update(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/calendarList/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"PUT"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}watch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/calendarList/watch").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Calendarlist=c;class u{constructor(s){this.context=s}clear(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/clear").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}delete(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"DELETE"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}get(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}insert(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}patch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"PATCH"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}update(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}").replace(/([^:]\/)\/+/g,"$1"),method:"PUT"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Calendars=u;class a{constructor(s){this.context=s}stop(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/channels/stop").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Channels=a;class g{constructor(s){this.context=s}get(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/colors").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Colors=g;class f{constructor(s){this.context=s}delete(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/{eventId}").replace(/([^:]\/)\/+/g,"$1"),method:"DELETE"},i),params:S,requiredParams:["calendarId","eventId"],pathParams:["calendarId","eventId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}get(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/{eventId}").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["calendarId","eventId"],pathParams:["calendarId","eventId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}import(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/import").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}insert(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}instances(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/{eventId}/instances").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["calendarId","eventId"],pathParams:["calendarId","eventId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}list(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}move(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/{eventId}/move").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId","eventId","destination"],pathParams:["calendarId","eventId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}patch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/{eventId}").replace(/([^:]\/)\/+/g,"$1"),method:"PATCH"},i),params:S,requiredParams:["calendarId","eventId"],pathParams:["calendarId","eventId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}quickAdd(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/quickAdd").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId","text"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}update(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/{eventId}").replace(/([^:]\/)\/+/g,"$1"),method:"PUT"},i),params:S,requiredParams:["calendarId","eventId"],pathParams:["calendarId","eventId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}watch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/calendars/{calendarId}/events/watch").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:["calendarId"],pathParams:["calendarId"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Events=f;class A{constructor(s){this.context=s}query(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/freeBusy").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Freebusy=A;class E{constructor(s){this.context=s}get(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/settings/{setting}").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:["setting"],pathParams:["setting"],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}list(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/settings").replace(/([^:]\/)\/+/g,"$1"),method:"GET"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}watch(s,m,y){let S=s||{},i=m||{};typeof s=="function"&&(y=s,S={},i={}),typeof m=="function"&&(y=m,i={});const v=i.rootUrl||"https://www.googleapis.com/",C={options:Object.assign({url:(v+"/calendar/v3/users/me/settings/watch").replace(/([^:]\/)\/+/g,"$1"),method:"POST"},i),params:S,requiredParams:[],pathParams:[],context:this.context};if(y)(0,e.createAPIRequest)(C,y);else return(0,e.createAPIRequest)(C)}}r.Resource$Settings=E})(t.calendar_v3||(t.calendar_v3={}))})(El);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthPlus=t.calendar_v3=t.auth=t.calendar=t.VERSIONS=void 0;/*! THIS FILE IS AUTO-GENERATED */const e=kn,r=El;Object.defineProperty(t,"calendar_v3",{enumerable:!0,get:function(){return r.calendar_v3}}),t.VERSIONS={v3:r.calendar_v3.Calendar};function n(u){return(0,e.getAPI)("calendar",u,t.VERSIONS,this)}t.calendar=n;const o=new e.AuthPlus;t.auth=o;var c=kn;Object.defineProperty(t,"AuthPlus",{enumerable:!0,get:function(){return c.AuthPlus}})})(zi);const Pn="account-tokens",gr="connected-calendars",Yg=$l("google-calendar",t=>{const e=`${t.pluginSlug}-get-events`,r=`${t.pluginSlug}-calendars-sync`,n=`${t.pluginSlug}-upsert-item-from-event`,o=`${t.pluginSlug}-process-events-webhook`,c=`flow-${t.pluginSlug}-events-webhook`,u=async()=>{const f=await t.store.getPluginItem(Pn);if(!f)throw new Error("NOT_AUTHENTICATED: You are not authenticated and will need to connect your Google account first.");return f.value},a=async f=>{const E=(f.accountsTokens??await u())[f.account];if(!E)throw new Error("NOT_AUTHENTICATED: You are not authenticated and will need to connect your Google account first.");if(t.dayjs().isAfter(E.expires_at)){const p=await fetch("https://google-calendar-api-flow-dev.vercel.app/api/auth/refresh?refresh_token="+E.refresh_token);if(!p.ok)throw new Error("COULD_NOT_REFRESH_TOKEN: Could not refresh token.");const s=await p.json(),m={...s,refresh_token:E.refresh_token,expires_at:t.dayjs().add((s.expires_in??10)-10,"seconds").toISOString()};return await t.store.setSecretItem(Pn,{...f.accountsTokens,[f.account]:m}),m}return E},g=async f=>{const A=await a(f),E=new zi.auth.OAuth2;return E.setCredentials(A),zi.calendar({version:"v3",auth:E})};return{onRequest:async(f,A)=>{var E;if(f.path==="/auth")return A.redirect(`https://google-calendar-api-flow-dev.vercel.app/api/auth?api_endpoint=${t.serverOrigin}/api/plugin/${t.pluginSlug}/auth/callback`);if(f.path==="/auth/callback"&&f.method==="POST"){const p={...f.body,expires_at:t.dayjs().add((f.body.expires_in??10)-10,"seconds").toISOString()};"expires_in"in p&&delete p.expires_in;const s=await t.store.getPluginItem(Pn);return await t.store.setSecretItem(Pn,{...(s==null?void 0:s.value)??{},[p.email]:p}),A.status(200).send()}else if(f.path==="/events/webhook"&&f.method==="POST"){const p=f.headers["x-goog-resource-uri"],s=(E=p.match(/\/calendars\/(.*)\/events/))==null?void 0:E[1];if(!s)return console.log("â Could not find calendarId in x-goog-resource-uri header",p),A.status(200).send();const m=decodeURIComponent(s);return await t.pgBoss.send(o,{calendarId:m}),A.status(200).send()}},operations:{calendars:async()=>{var E;const f=await u(),A=[];for(const p of Object.keys(f)){const m=await(await g({account:p,accountsTokens:f})).calendarList.list(),y=await t.store.getPluginItem(gr).then(S=>{var i;return new Set(((i=S==null?void 0:S.value)==null?void 0:i.map(v=>v.calendarId))??[])});A.push({account:p,calendars:((E=m.data.items)==null?void 0:E.map(S=>({...S,connected:y.has(S.id??"")})))??[]})}return{data:A}},connectCalendars:async f=>{const A=await u(),E=await t.store.getPluginItem(gr).then(s=>{var m;return new Map(((m=s==null?void 0:s.value)==null?void 0:m.map(y=>[y.calendarId,y]))??[])}),p=[];for(const s of Object.keys(A)){const m=await g({account:s,accountsTokens:A}),y=await m.calendarList.list().then(S=>S.data.items);for(const S of f.calendarIds){if(E.has(S)||!(y!=null&&y.some(v=>v.id===S)))continue;await t.pgBoss.send(e,{calendarId:S,days:7});const i=await m.events.watch({calendarId:S,requestBody:{id:c,type:"web_hook",address:`${t.serverOrigin}/api/plugin/${t.pluginSlug}/events/webhook`}});console.log("â Set up webhook for calendar",S),E.set(S,{account:s,calendarId:S,lastSyncedAt:t.dayjs().toISOString(),channelId:i.data.id??c,resourceId:i.data.resourceId,expiresAt:t.dayjs(i.data.expiration??0).toISOString()})}for(const S of y??[]){if(!S.id||f.calendarIds.includes(S.id))continue;const i=E.get(S.id);i&&(await m.channels.stop({requestBody:{id:i.channelId,resourceId:i.resourceId}}),console.log("â Removed webhook for calendar",S.id),E.delete(S.id))}p.push({account:s,calendars:(y==null?void 0:y.map(S=>({...S,connected:E.has(S.id??"")})))??[]})}return await t.store.setItem(gr,Array.from(E.values())),await t.pgBoss.schedule(r,"0 0 */3 * *",{calendarIds:f.calendarIds}),console.log("â Scheduled calendars sync job"),{operationName:"calendars",data:p}},refreshEvents:async f=>{const A=await t.store.getPluginItem(gr).then(E=>(E==null?void 0:E.value.map(p=>p.calendarId))??[]);return await t.pgBoss.send(r,{calendarIds:A??[],days:f.days??7}),{data:"Job sent to refresh events."}}},handlePgBossWork:f=>[f(n,{batchSize:5},async A=>{var E,p,s,m,y,S,i,v;for(const C of A){const I=C.data,B=await t.prisma.item.findFirst({where:{pluginDatas:{some:{originalId:I.id,pluginSlug:t.pluginSlug}}},include:{pluginDatas:{where:{originalId:I.id,pluginSlug:t.pluginSlug},select:{id:!0}}}});if(I.status==="cancelled"&&B){try{await t.prisma.itemPluginData.delete({where:{id:(E=B.pluginDatas[0])==null?void 0:E.id}}),await t.prisma.item.delete({where:{id:B.id}})}catch(R){console.log("Error deleting item and it's dependencies:",R)}console.log("â Deleted item from event",B.title,B.scheduledAt);continue}const T={title:I.summary??"No title",color:I.calendarColor?t.getNearestItemColor(I.calendarColor):null,isAllDay:!!((p=I.start)!=null&&p.date),scheduledAt:((s=I.start)==null?void 0:s.dateTime)??null,durationInMinutes:t.dayjs((m=I.end)==null?void 0:m.dateTime).diff((y=I.start)==null?void 0:y.dateTime,"minute"),isRelevant:!0},h={status:I.status,htmlLink:I.htmlLink,numOfAttendees:((S=I.attendees)==null?void 0:S.length)??0},l={...h,description:I.description,attendees:I.attendees,eventType:I.eventType,organizer:I.organizer,hangoutLink:I.hangoutLink,conferenceData:I.conferenceData,backgroundColor:I.calendarColor};B?await t.prisma.item.update({where:{id:B.id},data:{...T,pluginDatas:{update:{where:{id:(i=B.pluginDatas[0])==null?void 0:i.id},data:{min:h,full:l}}}}}):await t.prisma.item.create({data:{...T,pluginDatas:{create:{pluginSlug:t.pluginSlug,originalId:I.id,min:h,full:l}}}}),console.log("â Upserted item from event",I.summary,(v=I.start)==null?void 0:v.dateTime)}}),f(e,async A=>{var s,m;const E=A.data,p=await u();for(const y of Object.keys(p)){const S=await g({account:y,accountsTokens:p}),i=await S.calendarList.get({calendarId:E.calendarId}),v=await S.events.list({calendarId:E.calendarId,timeMin:t.dayjs().startOf("day").toISOString(),timeMax:t.dayjs().add(E.days??7,"day").toISOString(),singleEvents:!0,orderBy:"startTime"});console.log(((s=v.data.items)==null?void 0:s.length)??0,((m=v.data.items)==null?void 0:m.length)===1?"event":"events","to process from initial sync of calendar",E.calendarId);for(const C of v.data.items??[])await t.pgBoss.send(n,{...C,calendarColor:i.data.backgroundColor??null})}}),f(o,async A=>{var i,v;const E=A.data,p=await t.store.getPluginItem(gr).then(C=>(C==null?void 0:C.value)??[]),s=p.find(C=>C.calendarId===E.calendarId);if(!s){console.log("â Could not find calendar to process",E.calendarId);return}const m=await g({account:s.account}),y=await m.calendarList.get({calendarId:E.calendarId}),S=await m.events.list({calendarId:E.calendarId,updatedMin:t.dayjs(s.lastSyncedAt).toISOString(),singleEvents:!0,orderBy:"updated"});console.log(((i=S.data.items)==null?void 0:i.length)??0,((v=S.data.items)==null?void 0:v.length)===1?"event":"events","to process from webhook of calendar",E.calendarId);for(const C of S.data.items??[])await t.pgBoss.send(n,{...C,calendarColor:y.data.backgroundColor??null});await t.store.setItem(gr,[...p.filter(C=>C.calendarId!==E.calendarId),{...s,lastSyncedAt:t.dayjs().toISOString()}])}),f(r,async A=>{const E=A.data;for(const p of E.calendarIds)await t.pgBoss.send(e,{calendarId:p,days:E.days??7})})]}});module.exports=Yg;
